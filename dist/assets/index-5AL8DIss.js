import{r as E,a as Zn,u as Yn,L as U,b as Xn,R as zn,c as Ee,d as Qn,B as ea}from"./vendor-CV00cFDn.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))m(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&m(p)}).observe(document,{childList:!0,subtree:!0});function u(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function m(a){if(a.ep)return;a.ep=!0;const d=u(a);fetch(a.href,d)}})();var tn={exports:{}},vt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=E,na=Symbol.for("react.element"),aa=Symbol.for("react.fragment"),sa=Object.prototype.hasOwnProperty,ia=ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ra={key:!0,ref:!0,__self:!0,__source:!0};function nn(s,o,u){var m,a={},d=null,p=null;u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),o.ref!==void 0&&(p=o.ref);for(m in o)sa.call(o,m)&&!ra.hasOwnProperty(m)&&(a[m]=o[m]);if(s&&s.defaultProps)for(m in o=s.defaultProps,o)a[m]===void 0&&(a[m]=o[m]);return{$$typeof:na,type:s,key:d,ref:p,props:a,_owner:ia.current}}vt.Fragment=aa;vt.jsx=nn;vt.jsxs=nn;tn.exports=vt;var e=tn.exports,an,Vt=Zn;an=Vt.createRoot,Vt.hydrateRoot;const sn="mathpop_translate_cache_v1";function oa(){try{const s=localStorage.getItem(sn);if(!s)return{};const o=JSON.parse(s);return o&&typeof o=="object"?o:{}}catch{return{}}}function la(s){try{localStorage.setItem(sn,JSON.stringify(s))}catch{}}function ca(){if(typeof navigator>"u")return"en";const s=navigator.languages&&navigator.languages[0]||navigator.language||"en";return String(s).toLowerCase()}async function da(s,o){const u=new URL("https://translate.googleapis.com/translate_a/single");u.searchParams.set("client","gtx"),u.searchParams.set("sl","en"),u.searchParams.set("tl",o),u.searchParams.set("dt","t"),u.searchParams.set("q",s);const m=await fetch(u.toString());if(!m.ok)throw new Error(`translate_failed_${m.status}`);const a=await m.json();if(!Array.isArray(a)||!Array.isArray(a[0]))throw new Error("invalid_translate_payload");return a[0].map(d=>Array.isArray(d)?d[0]:"").join("").trim()||s}function ua(s,o=!0){const[u]=E.useState(()=>ca()),[m,a]=E.useState(s),[d,p]=E.useState(!1),g=E.useMemo(()=>s||{},[s]),y=E.useMemo(()=>JSON.stringify(g),[g]),M=u.split("-")[0]||"en";return E.useEffect(()=>{if(!o||M==="en"){a(g);return}let $=!1;const _=oa();return(async()=>{p(!0);const D={...g},I=Object.entries(g);for(let H=0;H<I.length;H+=1){const[k,A]=I[H];if(!A)continue;const j=`${M}|${A}`;if(_[j]){D[k]=_[j];continue}try{const we=await da(A,M);_[j]=we,D[k]=we}catch{D[k]=A}}$||(la(_),a(D),p(!1))})().catch(()=>{$||(a(g),p(!1))}),()=>{$=!0}},[o,g,y,M]),{translated:m,language:M,isTranslating:d}}const Zt=[{id:"euclid",phrase:"Geometry Has No Shortcuts",quote:"There is no royal road to geometry.",author:"Euclid",country:"Greece",translationKey:"quote.euclid"},{id:"gauss",phrase:"Math Leads The Sciences",quote:"Mathematics is the queen of the sciences.",author:"Carl Friedrich Gauss",country:"Germany",translationKey:"quote.gauss"},{id:"poincare",phrase:"Name Patterns Clearly",quote:"Mathematics is the art of giving the same name to different things.",author:"Henri Poincare",country:"France",translationKey:"quote.poincare"},{id:"russell",phrase:"Math Has Beauty",quote:"Mathematics, rightly viewed, possesses beauty.",author:"Bertrand Russell",country:"United Kingdom",translationKey:"quote.russell"},{id:"galileo",phrase:"Nature Speaks Math",quote:"Mathematics is the language of nature.",author:"Galileo Galilei",country:"Italy",translationKey:"quote.galileo"},{id:"mirzakhani",phrase:"Beauty Tests Ideas",quote:"Beauty is the first test of mathematics.",author:"Maryam Mirzakhani",country:"Iran",translationKey:"quote.mirzakhani"},{id:"ramanujan",phrase:"Equations Need Meaning",quote:"An equation means nothing unless it expresses a thought.",author:"Srinivasa Ramanujan",country:"India",translationKey:"quote.ramanujan"},{id:"kovalevskaya",phrase:"Think Like A Poet",quote:"It is impossible to be a mathematician without being a poet.",author:"Sofia Kovalevskaya",country:"Russia",translationKey:"quote.kovalevskaya"},{id:"banach",phrase:"Spirit Builds Math",quote:"Mathematics is the most beautiful creation of the human spirit.",author:"Stefan Banach",country:"Poland",translationKey:"quote.banach"},{id:"euler",phrase:"Reason Is Everywhere",quote:"Nothing takes place without a mathematical reason.",author:"Leonhard Euler",country:"Switzerland",translationKey:"quote.euler"},{id:"brouwer",phrase:"Build It In Mind",quote:"Mathematics is mental construction.",author:"L.E.J. Brouwer",country:"Netherlands",translationKey:"quote.brouwer"},{id:"erdos",phrase:"Open Mind Wins",quote:"My brain is open.",author:"Paul Erdos",country:"Hungary",translationKey:"quote.erdos"},{id:"fields",phrase:"Connections Matter",quote:"Mathematics reveals hidden connections.",author:"John Charles Fields",country:"Canada",translationKey:"quote.fields"},{id:"ito",phrase:"Uncertainty Has Shape",quote:"Probability describes uncertainty.",author:"Kiyoshi Ito",country:"Japan",translationKey:"quote.ito"},{id:"hua",phrase:"Calculation Drives Progress",quote:"Where there is calculation, there is progress.",author:"Hua Luogeng",country:"China",translationKey:"quote.hua"},{id:"avila",phrase:"Explore The Unknown",quote:"Mathematics is exploration.",author:"Artur Avila",country:"Brazil",translationKey:"quote.avila"},{id:"tao",phrase:"Practice Clear Thinking",quote:"Mathematics is a way of thinking.",author:"Terence Tao",country:"Australia",translationKey:"quote.tao"},{id:"adem",phrase:"Build Real Understanding",quote:"Mathematics builds understanding.",author:"Jose Adem",country:"Mexico",translationKey:"quote.adem"},{id:"hypatia",phrase:"Protect Thought",quote:"Reserve your right to think.",author:"Hypatia",country:"Egypt",translationKey:"quote.hypatia"},{id:"rey-pastor",phrase:"Science Needs Math",quote:"Mathematics underlies science.",author:"Julio Rey Pastor",country:"Spain",translationKey:"quote.rey_pastor"},{id:"arf",phrase:"Understand Do Not Memorize",quote:"Understanding is more valuable than memorizing.",author:"Cahit Arf",country:"Turkey",translationKey:"quote.arf"},{id:"lindenstrauss",phrase:"Patterns Lead Discovery",quote:"Patterns are the heart of mathematics.",author:"Elon Lindenstrauss",country:"Israel",translationKey:"quote.lindenstrauss"},{id:"katherine-johnson",phrase:"Love The Work",quote:"Like what you do and then you will do your best.",author:"Katherine Johnson",country:"United States",translationKey:"quote.katherine_johnson"},{id:"mittag-leffler",phrase:"Patterns Spark Wonder",quote:"Beautiful patterns inspire mathematics.",author:"Magnus Gosta Mittag-Leffler",country:"Sweden",translationKey:"quote.mittag_leffler"},{id:"abdool-karim",phrase:"Numbers Expose Truth",quote:"Numbers help reveal truth.",author:"Quarraisha Abdool Karim",country:"South Africa",translationKey:"quote.abdool_karim"}],Yt={A:["01110","10001","11111","10001","10001"],B:["11110","10001","11110","10001","11110"],C:["01111","10000","10000","10000","01111"],D:["11110","10001","10001","10001","11110"],E:["11111","10000","11110","10000","11111"],F:["11111","10000","11110","10000","10000"],G:["01111","10000","10111","10001","01111"],H:["10001","10001","11111","10001","10001"],I:["11111","00100","00100","00100","11111"],J:["00111","00010","00010","10010","01100"],K:["10001","10010","11100","10010","10001"],L:["10000","10000","10000","10000","11111"],M:["10001","11011","10101","10001","10001"],N:["10001","11001","10101","10011","10001"],O:["01110","10001","10001","10001","01110"],P:["11110","10001","11110","10000","10000"],Q:["01110","10001","10001","10011","01111"],R:["11110","10001","11110","10010","10001"],S:["01111","10000","01110","00001","11110"],T:["11111","00100","00100","00100","00100"],U:["10001","10001","10001","10001","01110"],V:["10001","10001","10001","01010","00100"],W:["10001","10001","10101","11011","10001"],X:["10001","01010","00100","01010","10001"],Y:["10001","01010","00100","00100","00100"],Z:["11111","00010","00100","01000","11111"]," ":["000","000","000","000","000"]};function ma(s,o){const u=String(s||"").toUpperCase().split(/\s+/).filter(Boolean),m=[];let a="";const d=p=>{if(!p)return;if(!a){a=p;return}const g=`${a} ${p}`;g.length<=o?a=g:(m.push(a),a=p)};return u.forEach(p=>{if(p.length>o){a&&(m.push(a),a="");for(let g=0;g<p.length;g+=o)m.push(p.slice(g,g+o));return}d(p)}),a&&m.push(a),m.length?m:["MATH"]}function Xt(s,o){const m=ma(s,o).map(g=>{const y=Array.from({length:5},()=>"");return g.split("").forEach((b,M)=>{const $=/[A-Z ]/.test(b)?b:" ",_=Yt[$]||Yt[" "];for(let C=0;C<5;C+=1)y[C]+=_[C];if(M<g.length-1)for(let C=0;C<5;C+=1)y[C]+="0"}),y}),a=m.reduce((g,y)=>{var b;return Math.max(g,((b=y[0])==null?void 0:b.length)||0)},0)||1,d=m.map(g=>g.map(y=>y.padEnd(a,"0"))),p=[];return d.forEach((g,y)=>{p.push(...g),y<d.length-1&&p.push("0".repeat(a))}),p}function ha(s,o,u,m,a,d,p){const g=-2.4*p,y=a+2.4*p,b=-2.4*p,M=d+2.4*p,$=a/2,_=d/2,C=u>1?o/(u-1):0,D=Math.sin(C*Math.PI*2.5),I=C*Math.PI*2,H=k=>Math.sin((o+1)*(k+1.7))*.5+.5;switch(s){case 0:return{x:H(1)*a,y:H(2)*d};case 1:return{x:m.c*p,y:b-H(1)*d*.3};case 2:return{x:m.c*p,y:M+H(2)*d*.3};case 3:return{x:g-H(1)*a*.25,y:m.r*p};case 4:return{x:y+H(2)*a*.25,y:m.r*p};case 5:return{x:g,y:b};case 6:return{x:y,y:b};case 7:return{x:g,y:M};case 8:return{x:y,y:M};case 9:return{x:$+Math.cos(I)*(a*.46),y:_+Math.sin(I)*(d*.46)};case 10:return{x:$+Math.cos(I)*(a*.58),y:_+Math.sin(I)*(d*.58)};case 11:return{x:$+Math.cos(-I)*(a*.58),y:_+Math.sin(-I)*(d*.58)};case 12:{const k=1.2-C;return{x:$+Math.cos(I*4)*a*.5*k,y:_+Math.sin(I*4)*d*.5*k}}case 13:return{x:C*a,y:o%2===0?b:M};case 14:return{x:g,y:_+D*d*.45};case 15:return{x:y,y:_+D*d*.45};case 16:return{x:g+C*(y-g),y:b+C*(M-b)};case 17:return{x:y-C*(y-g),y:b+C*(M-b)};case 18:return{x:C<.5?g:y,y:_+(C-.5)*d*1.8};case 19:return{x:$+(C-.5)*a*1.8,y:C<.5?b:M};case 20:return{x:$+Math.cos(I*1.6)*(Math.max(a,d)*.9),y:_+Math.sin(I*1.6)*(Math.max(a,d)*.9)};case 21:return{x:C<.5?g+C*a*2:y-(C-.5)*a*2,y:_+Math.sin(I*3.4)*d*.38};case 22:return{x:(m.r+m.c)%2?g:y,y:m.r%2?b:M};case 23:return{x:C*a,y:b-Math.sin(C*Math.PI)*d*.75};default:{const k=Math.max(a,d)*(.9+H(3)*.55);return{x:$+Math.cos(I*6.2)*k,y:_+Math.sin(I*6.2)*k}}}}function pa(){var le;const s=((le=Yn)==null?void 0:le())||(()=>{window.location.href="/game"}),[o,u]=E.useState(()=>localStorage.getItem("highContrast")==="true"),[m,a]=E.useState(!1),[d,p]=E.useState("signup"),[g]=E.useState(()=>{const x=Math.floor(Math.random()*Zt.length);return{quote:Zt[x],quoteIndex:x}}),y=g.quote,[b,M]=E.useState(!1),[$,_]=E.useState(""),[C,D]=E.useState(""),[I,H]=E.useState(""),[k,A]=E.useState(!1),[j,we]=E.useState(()=>localStorage.getItem("mathpop_current_user")||null),[je,ge]=E.useState(0),q=E.useMemo(()=>({navHowTo:"How to Play",navGames:"Games",navAbout:"About",navProfile:"Profile",heroTagline:"Math isn't lame — it's an adventure!",signUp:"Sign Up",signIn:"Sign In",viewProfile:"View Profile",notSignedIn:"Not signed in",highScore:"High Score",modalSignUp:"Sign Up",modalSignIn:"Sign In",username:"Username",email:"Email",password:"Password",createProfile:"Create Profile",disclaimerText:"By signing up you agree that Math isn't Lame.",quotePhrase:y.phrase,quoteText:y.quote,quoteByline:`${y.country} — ${y.author}`}),[y]),{translated:F}=ua(q,!0);E.useEffect(()=>{document.body.classList.toggle("high-contrast",!!o),localStorage.setItem("highContrast",o?"true":"false")},[o]),E.useEffect(()=>{const x=requestAnimationFrame(()=>M(!0));return()=>cancelAnimationFrame(x)},[]),E.useEffect(()=>{if(j){const x=parseInt(localStorage.getItem("mathpop_highscore_"+j)||"0",10);ge(Number.isNaN(x)?0:x)}else ge(0)},[j]);function V(x){if(!(!x||!x.username))try{return localStorage.setItem("mathpop_profile_"+x.username,JSON.stringify(x)),W(x.username),!0}catch{return alert("Unable to save profile on this device right now."),!1}}function ae(x){if(!x)return null;const Z=localStorage.getItem("mathpop_profile_"+x);if(!Z)return null;try{return JSON.parse(Z)}catch{return null}}function W(x){x?(localStorage.setItem("mathpop_current_user",x),we(x)):(localStorage.removeItem("mathpop_current_user"),we(null))}function J(x){if(x)try{const Z="mathpop_emails",O=JSON.parse(localStorage.getItem(Z)||"[]");O.includes(x)||O.push(x),localStorage.setItem(Z,JSON.stringify(O)),localStorage.setItem("mathpop_email_compilation",O.join(","))}catch{}}function K(){try{if(typeof s=="function"){s("/game");return}}catch{}window.location.href="/game"}function he(){if(!$.trim()||!C.trim()||!I){alert("Please fill all fields");return}if(!k){alert("You must accept the disclaimer");return}const x=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),Z={username:$.trim(),email:C.trim(),password:I,created:x};V(Z)&&(localStorage.setItem("mathpop_highscore_"+Z.username,localStorage.getItem("mathpop_highscore_"+Z.username)||"0"),J(Z.email),a(!1),alert("Profile created — starting game"),setTimeout(K,200))}function oe(){if(!$.trim()||!I){alert("Please fill both fields");return}const x=ae($.trim()),Z=String((x==null?void 0:x.password)||"");if(!x||!Z||Z!==I){alert("Invalid username or password");return}W($.trim()),a(!1),alert("Signed in — starting game"),setTimeout(K,200)}function ee(){W(null),window.location.reload()}const R=E.useMemo(()=>{var Q,Se;const x=typeof window<"u"?window.innerWidth:1024,Z=Math.max(260,Math.min(x-30,980));let O=x<=420?9:x<=720?12:18,se=Xt(y.phrase,O),me=((Q=se[0])==null?void 0:Q.length)||1,ie=Math.floor(Z/me);for(;(ie<5||se.length>18)&&O>6;)O-=1,se=Xt(y.phrase,O),me=((Se=se[0])==null?void 0:Se.length)||1,ie=Math.floor(Z/me);ie=Math.max(4,Math.min(x<=520?16:20,ie));const te=me*ie,ne=se.length*ie,pe=Math.max(x<=520?220:250,ne+22),ue=g.quoteIndex%25,Me=1100+ue%5*220,be=6+ue%7*4,z=["cubic-bezier(0.2,0.9,0.25,1)","cubic-bezier(0.4,0,0.2,1)","cubic-bezier(0.18,0.84,0.28,1)","cubic-bezier(0.34,1.56,0.64,1)","cubic-bezier(0.07,0.82,0.17,1)"],P=[];se.forEach((fe,ce)=>{fe.split("").forEach((re,Te)=>{re==="1"&&P.push({r:ce,c:Te})})});const S=P.length||1,B=P.map((fe,ce)=>{const re=ha(ue,ce,S,fe,Z,pe,ie),Te=Math.floor(ce*be),Ne=(ue*19+ce*7)%100-50,Ie=.75+(ce+ue)%5*.08;return{key:`${fe.r}-${fe.c}`,endX:fe.c*ie,endY:fe.r*ie,startX:re.x,startY:re.y,delay:Te,duration:Me,ease:z[ue%z.length],rotate:`${Ne}deg`,scale:String(Ie)}});return{cellSize:ie,width:te,height:ne,stageHeight:pe,variant:ue,targets:B}},[y.phrase,g.quoteIndex]);return e.jsxs("div",{className:"background",children:[e.jsxs("nav",{children:[e.jsx("div",{className:"logo",children:e.jsxs("span",{className:"desk-logo",children:[e.jsx("span",{className:"back"}),e.jsx("span",{className:"seat"}),e.jsx("span",{className:"leg-left"}),e.jsx("span",{className:"leg-right"}),e.jsx("span",{className:"desk"})]})}),e.jsxs("div",{id:"userArea",className:"user-area",style:{marginLeft:12},children:[e.jsx("span",{id:"usernameDisplay",style:{display:j?"inline":"none"},children:j}),e.jsx("button",{id:"logoutBtn",style:{display:j?"inline-block":"none"},onClick:ee,children:"Logout"})]}),e.jsxs("ul",{className:"nav",style:{listStyle:"none",display:"flex",gap:8,padding:0},children:[e.jsx("li",{children:e.jsx(U,{to:"/howto",children:F.navHowTo||q.navHowTo})}),e.jsx("li",{children:e.jsx(U,{to:"/list",children:F.navGames||q.navGames})}),e.jsx("li",{children:e.jsx(U,{to:"/about",children:F.navAbout||q.navAbout})}),j&&e.jsx("li",{children:e.jsx(U,{to:"/profile",children:F.navProfile||q.navProfile})})]})]}),e.jsx("button",{className:"home-benny",type:"button","aria-pressed":o?"true":"false",title:"Toggle high contrast",onClick:()=>u(x=>!x),children:e.jsx("span",{className:"benny-base",children:e.jsxs("span",{className:"benny-shape",children:[e.jsx("span",{className:"back"}),e.jsx("span",{className:"leg-left"}),e.jsx("span",{className:"leg-right"}),e.jsx("span",{className:"head"})]})})}),e.jsx("header",{children:e.jsxs("div",{className:"hero-card",children:[e.jsx("p",{className:"tagline",children:F.heroTagline||q.heroTagline}),e.jsxs("div",{className:"hero-actions",id:"heroActions",children:[e.jsx("button",{className:"start-btn",id:"openSignUp",onClick:()=>{p("signup"),a(!0)},children:F.signUp||q.signUp}),e.jsx("button",{className:"start-btn",id:"openSignIn",style:{marginLeft:8},onClick:()=>{p("signin"),a(!0)},children:F.signIn||q.signIn}),j&&e.jsx(U,{className:"start-btn",style:{marginLeft:8,textDecoration:"none"},to:"/profile",children:F.viewProfile||q.viewProfile}),e.jsx("div",{id:"homeHighScore",style:{marginTop:10,color:"#e9e2e2",fontWeight:700},children:j?`${j} — ${F.highScore||q.highScore}: ${je}`:F.notSignedIn||q.notSignedIn})]})]})}),e.jsxs("section",{className:`quote-stage quote-anim-${y.id} quote-motion-${R.variant}${b?" animate":""}`,"data-translation-key":y.translationKey,"aria-label":"Featured math quote",children:[e.jsx("p",{className:"quote-phrase",children:F.quotePhrase||q.quotePhrase}),e.jsx("div",{className:"phrase-field-wrap",style:{minHeight:`${R.stageHeight}px`},children:e.jsx("div",{className:"chair-field quote-chair-field",style:{"--cell":`${R.cellSize}px`,width:`${R.width}px`,height:`${R.height}px`},children:R.targets.map(x=>e.jsxs("div",{className:"chair",style:{"--start-x":`${x.startX}px`,"--start-y":`${x.startY}px`,"--end-x":`${x.endX}px`,"--end-y":`${x.endY}px`,"--delay-ms":`${x.delay}ms`,"--travel-ms":`${x.duration}ms`,"--travel-ease":x.ease,"--start-rot":x.rotate,"--start-scale":x.scale},children:[e.jsx("div",{className:"back"}),e.jsx("div",{className:"seat"}),e.jsx("div",{className:"leg-left"}),e.jsx("div",{className:"leg-right"}),e.jsx("div",{className:"desk"})]},x.key))})}),e.jsx("blockquote",{className:"quote-text",children:F.quoteText||q.quoteText}),e.jsx("p",{className:"quote-byline",children:F.quoteByline||q.quoteByline})]}),e.jsx("div",{id:"authModal",className:"modal","aria-hidden":m?"false":"true",style:{display:m?"flex":"none"},children:e.jsxs("div",{className:"modal-content",role:"dialog","aria-modal":"true",children:[e.jsx("button",{className:"modal-close",id:"authClose",onClick:()=>a(!1),children:"✕"}),e.jsx("h2",{id:"modalTitle",children:d==="signup"?F.modalSignUp||q.modalSignUp:F.modalSignIn||q.modalSignIn}),e.jsxs("form",{className:"auth-form",onSubmit:x=>{if(x.preventDefault(),d==="signup"){he();return}oe()},children:[e.jsxs("label",{children:[F.username||q.username,e.jsx("input",{id:"suUsername",required:!0,value:$,onChange:x=>_(x.target.value)})]}),d==="signup"&&e.jsxs("label",{children:[F.email||q.email,e.jsx("input",{id:"suEmail",type:"email",required:!0,value:C,onChange:x=>D(x.target.value)})]}),d==="signin"&&e.jsxs("label",{children:[F.password||q.password,e.jsx("input",{id:"siPassword",type:"password",required:!0,value:I,onChange:x=>H(x.target.value)})]}),d==="signup"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{children:[F.password||q.password,e.jsx("input",{id:"suPassword",type:"password",required:!0,value:I,onChange:x=>H(x.target.value)})]}),e.jsxs("label",{className:"disclaimer",children:[e.jsx("input",{id:"dataAccept",type:"checkbox",checked:k,onChange:x=>A(x.target.checked)})," I accept the ",e.jsx("strong",{children:"disclaimer"})," below"]}),e.jsxs("div",{className:"disclaimer-box",children:[F.disclaimerText||q.disclaimerText," ",e.jsx("br",{}),"✔ No ads or tracking",e.jsx("br",{}),"✔ Stored locally on your device",e.jsx("br",{}),"✔ Clear data anytime",e.jsx("br",{}),"✔ Email optional"]})]}),e.jsx("div",{className:"auth-actions",children:e.jsx("button",{type:"submit",id:d==="signup"?"doSignUp":"doSignIn",children:d==="signup"?F.createProfile||q.createProfile:F.signIn||q.signIn})})]})]})})]})}const lt=[{id:"song-01",label:"Math isn’t lame",filename:"01-math-isnt-lame.mp3",originalFilename:" Math isn’t lame.mp3"},{id:"song-02",label:"5ever is a long time",filename:"02-5ever-is-a-long-time.mp3",originalFilename:"5ever is a long time.mp3"},{id:"song-03",label:"Al-Khwarizmi Father of Algebra",filename:"03-al-khwarizmi-father-of-algebra.mp3",originalFilename:"Al-Khwarizmi Father of Algebra.mp3"},{id:"song-04",label:"Avila Dynamics",filename:"04-avila-dynamics.mp3",originalFilename:"Avila Dynamics.mp3"},{id:"song-05",label:"Cloudy numbers with a chance of math",filename:"05-cloudy-numbers-with-a-chance-of-math.mp3",originalFilename:"Cloudy numbers with a chance of math.mp3"},{id:"song-06",label:"Common denominator",filename:"06-common-denominator.mp3",originalFilename:"Common denominator.mp3"},{id:"song-07",label:"Decimal situation",filename:"07-decimal-situation.mp3",originalFilename:"Decimal situation.mp3"},{id:"song-08",label:"Dedicated to Ahmed Baba al-Timbukti",filename:"08-dedicated-to-ahmed-baba-al-timbukti.mp3",originalFilename:"Dedicated to Ahmed Baba al-Timbukti.mp3"},{id:"song-09",label:"Dedicated to Einstein",filename:"09-dedicated-to-einstein.mp3",originalFilename:"Dedicated to Einstein.mp3"},{id:"song-10",label:"Dedicated to Jose Adem",filename:"10-dedicated-to-jose-adem.mp3",originalFilename:"Dedicated to Jose Adem.mp3"},{id:"song-11",label:"Dedicated to Sofia Kovalevskaya",filename:"11-dedicated-to-sofia-kovalevskaya.mp3",originalFilename:"Dedicated to Sofia Kovalevskaya.mp3"},{id:"song-12",label:"Dedicated to Srinivasa Ramanujan",filename:"12-dedicated-to-srinivasa-ramanujan.mp3",originalFilename:"Dedicated to Srinivasa Ramanujan.mp3"},{id:"song-13",label:"Dedicated to Thomas Fuller",filename:"13-dedicated-to-thomas-fuller.mp3",originalFilename:"Dedicated to Thomas Fuller.mp3"},{id:"song-14",label:"Do you even geometrize_",filename:"14-do-you-even-geometrize.mp3",originalFilename:"Do you even geometrize_.mp3"},{id:"song-15",label:"Falling Numbers",filename:"15-falling-numbers.mp3",originalFilename:"Falling Numbers.mp3"},{id:"song-16",label:"Fraction funk",filename:"16-fraction-funk.mp3",originalFilename:"Fraction funk.mp3"},{id:"song-17",label:"Goofy Numbers",filename:"17-goofy-numbers.mp3",originalFilename:"Goofy Numbers.mp3"},{id:"song-18",label:"Jump!",filename:"18-jump.mp3",originalFilename:"Jump!.mp3"},{id:"song-19",label:"Katherine Johnson mission mathematics",filename:"19-katherine-johnson-mission-mathematics.mp3",originalFilename:"Katherine Johnson mission mathematics .mp3"},{id:"song-20",label:"Kiyoshi’s Probability",filename:"20-kiyoshis-probability.mp3",originalFilename:"Kiyoshi’s Probability.mp3"},{id:"song-21",label:"Logarithm",filename:"21-logarithm.mp3",originalFilename:"Logarithm.mp3"},{id:"song-22",label:"The Ballad of Miguel de Guzmán",filename:"22-the-ballad-of-miguel-de-guzman.mp3",originalFilename:"The Ballad of Miguel de Guzmán.mp3"},{id:"song-23",label:"The Lovelace Loop",filename:"23-the-lovelace-loop.mp3",originalFilename:"The Lovelace Loop.mp3"},{id:"song-24",label:"The Mirzakhani Method",filename:"24-the-mirzakhani-method.mp3",originalFilename:"The Mirzakhani Method.mp3"},{id:"song-25",label:"What if 7never89",filename:"25-what-if-7never89.mp3",originalFilename:"What if 7never89.mp3"}],fa="/Math-isn-t-Lame/assets/math-DT29OAa5.js",ya="data:text/javascript;base64,bGV0IGR1cmF0aW9uTXMgPSAzMDAwMDsKbGV0IGludGVydmFsSWQgPSBudWxsOwpsZXQgZW5kQXQgPSAwOwpsZXQgcmVtYWluaW5nTXMgPSAwOwpsZXQgdG9rZW4gPSAwOwpsZXQgb25UaWNrID0gKCkgPT4ge307CmxldCBvblRpbWVvdXQgPSAoKSA9PiB7fTsKCmZ1bmN0aW9uIGNvbmZpZ3VyZVRpbWVyKG9wdGlvbnMgPSB7fSkgewogIGlmIChOdW1iZXIuaXNGaW5pdGUob3B0aW9ucy5kdXJhdGlvbk1zKSkgewogICAgZHVyYXRpb25NcyA9IE1hdGgubWF4KDAsIG9wdGlvbnMuZHVyYXRpb25Ncyk7CiAgfQogIGlmICh0eXBlb2Ygb3B0aW9ucy5vblRpY2sgPT09ICdmdW5jdGlvbicpIHsKICAgIG9uVGljayA9IG9wdGlvbnMub25UaWNrOwogIH0KICBpZiAodHlwZW9mIG9wdGlvbnMub25UaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICBvblRpbWVvdXQgPSBvcHRpb25zLm9uVGltZW91dDsKICB9Cn0KCmZ1bmN0aW9uIHN0YXJ0Um91bmQoKSB7CiAgc3RvcFRpbWVyKCk7CiAgdG9rZW4gKz0gMTsKICBlbmRBdCA9IHBlcmZvcm1hbmNlLm5vdygpICsgZHVyYXRpb25NczsKICByZW1haW5pbmdNcyA9IGR1cmF0aW9uTXM7CiAgb25UaWNrKHJlbWFpbmluZ01zKTsKICBjb25zdCBjdXJyZW50VG9rZW4gPSB0b2tlbjsKICBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgaWYgKGN1cnJlbnRUb2tlbiAhPT0gdG9rZW4pIHJldHVybjsKICAgIGNvbnN0IHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIGVuZEF0IC0gcGVyZm9ybWFuY2Uubm93KCkpOwogICAgcmVtYWluaW5nTXMgPSByZW1haW5pbmc7CiAgICBvblRpY2socmVtYWluaW5nTXMpOwogICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7CiAgICAgIHN0b3BUaW1lcigpOwogICAgICBvblRpbWVvdXQoKTsKICAgIH0KICB9LCAyNTApOwp9CgpmdW5jdGlvbiBoYW5kbGVBbnN3ZXIoKSB7CiAgc3RvcFRpbWVyKCk7CiAgcmVtYWluaW5nTXMgPSBkdXJhdGlvbk1zOwogIG9uVGljayhyZW1haW5pbmdNcyk7Cn0KCmZ1bmN0aW9uIHN0b3BUaW1lcigpIHsKICBpZiAoaW50ZXJ2YWxJZCkgewogICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTsKICAgIGludGVydmFsSWQgPSBudWxsOwogIH0KfQoKZnVuY3Rpb24gZ2V0UHJvYmxlbVRpbWVSZW1haW5pbmcoKSB7CiAgcmV0dXJuIHJlbWFpbmluZ01zOwp9CgpmdW5jdGlvbiByZXNldFRpbWVyKCkgewogIHN0b3BUaW1lcigpOwogIGR1cmF0aW9uTXMgPSAzMDAwMDsKICBlbmRBdCA9IDA7CiAgcmVtYWluaW5nTXMgPSAwOwogIHRva2VuID0gMDsKICBvblRpY2sgPSAoKSA9PiB7fTsKICBvblRpbWVvdXQgPSAoKSA9PiB7fTsKfQoKaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93Lm1hdGhQdXBUaW1lciA9IHsKICAgIGNvbmZpZ3VyZVRpbWVyLAogICAgc3RhcnRSb3VuZCwKICAgIGhhbmRsZUFuc3dlciwKICAgIHN0b3BUaW1lciwKICAgIGdldFByb2JsZW1UaW1lUmVtYWluaW5nLAogICAgcmVzZXRUaW1lcgogIH07Cn0KCmV4cG9ydCB7CiAgY29uZmlndXJlVGltZXIsCiAgc3RhcnRSb3VuZCwKICBoYW5kbGVBbnN3ZXIsCiAgc3RvcFRpbWVyLAogIGdldFByb2JsZW1UaW1lUmVtYWluaW5nLAogIHJlc2V0VGltZXIKfTsK",ga="/Math-isn-t-Lame/assets/game-BzZo9hPE.js";function xa(){if(typeof window<"u"&&window.performance){const s=window.Performance||window.performance.constructor;s&&typeof s.now!="function"&&(s.now=()=>window.performance.now()),window.Performance||(window.Performance=s)}return E.useEffect(()=>{let s=!1;if(window.__MathPopBaseUrl="/Math-isn-t-Lame/",window.__MathPopJukeboxSongs=lt,window.screen&&window.screen.orientation)try{window.screen.orientation.lock("landscape").catch(()=>{})}catch{}window.mathPupTimer&&typeof window.mathPupTimer.resetTimer=="function"&&window.mathPupTimer.resetTimer(),window.__MathPupCleanupDone=!1;const o=(u,m,a={})=>new Promise(d=>{const p=document.querySelector(`script[data-script-key="${m}"]`);p&&p.parentNode&&p.parentNode.removeChild(p);const g=document.createElement("script");g.src=u,g.async=a.async??!0,a.type&&(g.type=a.type),g.dataset.scriptKey=m,g.onload=()=>d(g),document.body.appendChild(g)});return o(fa,"mathjs",{async:!1}).then(()=>s?null:o(ya,"mathpup-timer",{async:!1,type:"module"}).then(()=>s?null:o(ga,"mathpup",{type:"module"}))),()=>{if(s=!0,window.__MathPupCleanupDone=!0,window.screen&&window.screen.orientation)try{window.screen.orientation.unlock()}catch{}const u=document.querySelector('script[data-script-key="mathjs"]');u&&u.parentNode&&u.parentNode.removeChild(u);const m=document.querySelector('script[data-script-key="mathpup-timer"]');m&&m.parentNode&&m.parentNode.removeChild(m);const a=document.querySelector('script[data-script-key="mathpup"]');a&&a.parentNode&&a.parentNode.removeChild(a),window.mathPupTimer&&typeof window.mathPupTimer.resetTimer=="function"&&window.mathPupTimer.resetTimer(),window.__MathPupCleanup&&(window.__MathPupCleanup(),window.__MathPupCleanup=null),window.MathPup=null,window.__MathPopJukeboxSongs=null}},[]),e.jsxs("main",{className:"game-shell game-page--mathpup",children:[e.jsxs("header",{className:"game-shell__header",children:[e.jsx(U,{to:"/list",className:"back-link",id:"backBtn",children:"Back"}),e.jsx("h1",{children:"Math Pup"}),e.jsxs("div",{className:"game-shell__controls controls",children:[e.jsx("label",{htmlFor:"levelSelect",children:"Level:"}),e.jsxs("select",{id:"levelSelect",defaultValue:"Easy",children:[e.jsx("option",{value:"Easy",children:"Easy (subtraction + addition)"}),e.jsx("option",{value:"Easy25",children:"Easy25 (addition & subtraction)"}),e.jsx("option",{value:"Easy50",children:"Easy50 (two-digit addition & subtraction)"}),e.jsx("option",{value:"Easy75",children:"Easy75 (two-digit addition & subtraction)"}),e.jsx("option",{value:"Medium",children:"Medium (multiplication & division)"}),e.jsx("option",{value:"Medium26",children:"Medium26 (mul & div)"}),e.jsx("option",{value:"Medium60",children:"Medium60 (mul & div)"}),e.jsx("option",{value:"Medium100",children:"Medium100 (mul & div)"}),e.jsx("option",{value:"Mathanomical",children:"Mathanomical (all ops)"})]}),e.jsx("button",{id:"startBtn",children:"Start"}),e.jsx("button",{id:"pauseBtn",disabled:!0,children:"Pause"}),e.jsxs("label",{htmlFor:"musicToggle",className:"music-toggle",children:[e.jsx("input",{id:"musicToggle",type:"checkbox"}),"Music"]})]})]}),e.jsxs("section",{className:"game-shell__body",children:[e.jsxs("section",{className:"game-info game-shell__panel","aria-live":"polite",children:[e.jsxs("div",{className:"stats-card","aria-label":"Score and timing",children:[e.jsx("div",{id:"score",children:"Score: 0"}),e.jsx("div",{id:"highscore",children:"High Score: 0"}),e.jsx("div",{id:"math-problem",children:"Problem: —"}),e.jsx("div",{id:"timer",children:"Time: —"})]}),e.jsxs("div",{className:"status-row",children:[e.jsx("p",{id:"status",children:"Press Start to begin."}),e.jsx("div",{id:"bennyDock",className:"benny-dock","aria-hidden":"true"})]}),e.jsx("p",{id:"mathHint",className:"math-hint","aria-live":"polite"}),e.jsxs("div",{className:"mobile-answer","aria-label":"Answer input",children:[e.jsx("input",{id:"mobileAnswer",type:"text",inputMode:"numeric",placeholder:"Type answer",autoComplete:"off"}),e.jsx("button",{id:"mobileAnswerBtn",type:"button",children:"Answer"})]}),e.jsx("p",{id:"bennyStory",className:"benny-story",children:"while Mr Boooiii is at work benny is at home working on his math pup game can you help him get rid of the bugs??? Benny is 54 in human years but he still has alot of pep in his steps. Solve math problems to unlock mini game."}),e.jsx("div",{id:"bennyUnlockInfo",style:{marginTop:8}}),e.jsx("div",{id:"bennyPalette",className:"benny-palette"}),e.jsxs("div",{className:"mobile-controls",id:"mobileControls","aria-hidden":"true",children:[e.jsx("div",{className:"joystick",id:"mobileJoystick",children:e.jsx("div",{className:"stick",id:"mobileStick"})}),e.jsx("button",{className:"shoot-btn",id:"mobileShoot",type:"button",children:"Benny, Go Play!"})]})]}),e.jsx("div",{className:"game-shell__board",children:e.jsxs("div",{className:"canvas-anchor",children:[e.jsx("canvas",{id:"gameCanvas",width:"800",height:"600","aria-label":"Game canvas"}),e.jsx("div",{id:"game-area",className:"game-area","aria-hidden":"false"})]})})]}),e.jsx("div",{id:"musicNowPlaying",className:"music-now-playing","aria-live":"polite"})]})}function ba(){return e.jsxs("div",{className:"list-page",children:[e.jsxs("div",{className:"list-bar",children:[e.jsx(U,{className:"back-link",to:"/",children:"← Home"}),e.jsx("h1",{children:"Available Games"})]}),e.jsxs("main",{className:"main-content",children:[e.jsx("p",{children:"Select a game to play:"}),e.jsxs("ul",{className:"game-list",children:[e.jsx("li",{children:e.jsx(U,{to:"/game",children:"Math Pup"})}),e.jsx("li",{children:e.jsx(U,{to:"/capture",children:"Capture The Fraction"})}),e.jsx("li",{children:e.jsx(U,{to:"/decimal",children:"Deci-What?"})}),e.jsx("li",{children:e.jsx(U,{to:"/mathsynth",children:"Ma+h5Yn+h3 (MathSynth)"})}),e.jsx("li",{children:e.jsx(U,{to:"/bennyworld",children:"Benny Dash (Zone 1)"})})]})]})]})}function bt(s,o){const u=E.useRef(!1),m=E.useRef(!1),a=E.useCallback(()=>{if(!s||!o)return Promise.reject(new Error("Invalid src or key"));const d=document.querySelector(`script[data-script-key="${o}"]`);if(d){const p=d.dataset.loaded==="true";if(u.current||p)return u.current=!0,m.current=!1,Promise.resolve(d);if(m.current)return new Promise((g,y)=>{const b=setInterval(()=>{u.current?(clearInterval(b),g(d)):document.querySelector(`script[data-script-key="${o}"]`)===null&&(clearInterval(b),y(new Error("Script was removed")))},100);setTimeout(()=>{clearInterval(b),y(new Error("Script load timeout"))},3e4)})}return d&&d.parentNode&&d.parentNode.removeChild(d),m.current=!0,u.current=!1,new Promise((p,g)=>{const y=document.createElement("script");y.src=s,y.async=!1,y.dataset.scriptKey=o,y.onload=()=>{u.current=!0,m.current=!1,y.dataset.loaded="true",console.log(`[useScriptOnce] Loaded: ${s}`),p(y)},y.onerror=()=>{u.current=!1,m.current=!1,console.error(`[useScriptOnce] Failed to load: ${s}`),g(new Error(`Failed to load script: ${s}`))},document.body.appendChild(y)})},[s,o]);return E.useEffect(()=>{if(!s||!o)return;const d=()=>{u.current=!1};return a().catch(p=>{console.error(`[useScriptOnce] Error loading ${o}:`,p.message)}),d},[s,o,a]),{loadScript:a,isLoaded:u.current,isLoading:m.current}}function wt({toggleId:s,popupId:o,statusId:u,playOnIds:m=[],pauseOnIds:a=[],togglePauseIds:d=[],interactionSelectors:p=[],startChecked:g=!1,enableHeadsetControls:y=!0,sequenceWindowMs:b=5e3}){E.useEffect(()=>{if(typeof window>"u"||typeof Audio>"u")return;const M="/Math-isn-t-Lame/",$=M.endsWith("/")?M:`${M}/`,_=o?document.getElementById(o):null,C=s?document.getElementById(s):null,D=u?document.getElementById(u):null;let I=null,H=!!g,k=[],A=[],j=null,we=!1,je=[],ge=0,q=0,F=null;const V=320,ae=P=>{const S=P.slice();for(let B=S.length-1;B>0;B-=1){const Q=Math.floor(Math.random()*(B+1));[S[B],S[Q]]=[S[Q],S[B]]}return S},W=()=>{const P=localStorage.getItem("mathpop_current_user");if(!P)return[];const S=localStorage.getItem(`mathpop_jukebox_${P}`);if(!S)return[];try{const B=JSON.parse(S);return lt.filter(Q=>!!(B!=null&&B[Q.id])).map(Q=>({title:Q.label,filename:Q.filename}))}catch{return[]}},J=()=>{k=W(),A=[],j=null,we=!1,je=[],!k.length&&D&&(D.textContent="No songs enabled. Turn songs On in Profile > Benny Jukebox.")},K=new Audio;K.loop=!0,K.preload="auto",K.volume=.85;const he=P=>{_&&(_.textContent=`Now Playing: ${P}`,_.classList.add("show"),I&&clearTimeout(I),I=setTimeout(()=>_.classList.remove("show"),2200))},oe=()=>k.length?(A.length||(A=ae(k)),A.shift()||null):null,ee=(P,S=!1)=>{if(!P)return!1;j=P,we=S;const B=P.filename.replace(/^\//,"");return K.src=S?`/audio/jukebox/${B}`:`${$}audio/jukebox/${B}`,K.load(),!0},R=()=>{if(j){if(!we){ee(j,!0);return}me()}},le=()=>{me()};K.loop=!1,K.addEventListener("error",R),K.addEventListener("ended",le),J();const x=()=>{if(!H||!k.length&&(J(),!k.length))return;if(!j){const B=oe();if(!B||!ee(B,!1))return}const P=K.paused,S=K.play();if(S&&typeof S.catch=="function"){S.then(()=>{P&&j&&he(j.title)}).catch(()=>{D&&(D.textContent="Music blocked by browser. Tap Music once.")});return}P&&j&&he(j.title)},Z=()=>{K.pause()},O=()=>{ge=0,q=0,F&&(clearTimeout(F),F=null)},se=()=>{F&&clearTimeout(F),F=setTimeout(()=>{const P=ge;if(O(),P>=3){ie();return}if(P===2){me();return}P===1&&(K.paused?x():Z())},V)},me=()=>{if(!k.length&&(J(),!k.length))return;j&&je.push(j);const P=oe();!P||!ee(P,!1)||x()},ie=()=>{if(!je.length)return;const P=je.pop();j&&A.unshift(j),ee(P,!1)&&x()},te=()=>{const P=Date.now();P-q>b&&(ge=0),ge+=1,q=P,se()},ne=()=>{H=!!(C!=null&&C.checked),H?(J(),x()):(Z(),O())};let pe=null;C&&(C.checked=H,C.addEventListener("change",ne),y&&(pe=P=>{H&&(P.preventDefault(),te())},C.addEventListener("click",pe)));const ue=[];m.forEach(P=>{const S=document.getElementById(P);if(!S)return;const B=()=>x();S.addEventListener("click",B),ue.push([S,B])});const Me=[];a.forEach(P=>{const S=document.getElementById(P);if(!S)return;const B=()=>Z();S.addEventListener("click",B),Me.push([S,B])});const be=[];d.forEach(P=>{const S=document.getElementById(P);if(!S)return;const B=()=>{window.setTimeout(()=>{(S.textContent||"").toLowerCase().includes("resume")?Z():x()},0)};S.addEventListener("click",B),be.push([S,B])});const z=[];return p.forEach(P=>{const S=document.querySelector(P);if(!S)return;const B=()=>x();S.addEventListener("pointerdown",B),z.push([S,B,"pointerdown"])}),()=>{Z(),K.removeEventListener("error",R),C&&C.removeEventListener("change",ne),C&&pe&&C.removeEventListener("click",pe),ue.forEach(([P,S])=>P.removeEventListener("click",S)),Me.forEach(([P,S])=>P.removeEventListener("click",S)),be.forEach(([P,S])=>P.removeEventListener("click",S)),z.forEach(([P,S,B])=>P.removeEventListener(B,S)),I&&clearTimeout(I),F&&clearTimeout(F),_&&_.classList.remove("show"),K.removeEventListener("ended",le),K.removeEventListener("error",R)}},[s,o,u,m.join("|"),a.join("|"),d.join("|"),p.join("|"),g,y,b])}const va="/Math-isn-t-Lame/";function wa(){const{loadScript:s}=bt(`${va}js/capture.js`,"capture"),[o,u]=E.useState(null),[m,a]=E.useState(!1);return wt({toggleId:"captureMusicToggle",popupId:"captureNowPlaying",statusId:"status",playOnIds:["startBtn"],pauseOnIds:["pauseBtn"]}),E.useEffect(()=>{let d=!0;return(async()=>{if(!window.__CaptureCleanup)try{await s(),await new Promise(g=>setTimeout(g,100))}catch(g){d&&u(`Failed to load Capture game: ${g.message}`);return}d&&(a(!0),console.log("[Capture] Game initialized"))})(),()=>{d=!1}},[s]),E.useEffect(()=>()=>{window.__CaptureCleanup&&(console.log("[Capture] Running cleanup"),window.__CaptureCleanup())},[]),o?e.jsxs("main",{className:"app-page error-page",children:[e.jsxs("header",{className:"app-header",children:[e.jsx(U,{to:"/list",className:"back-link",id:"backBtn",children:"Back"}),e.jsx("h1",{children:"Capture"})]}),e.jsxs("div",{className:"error-message",children:[e.jsx("p",{children:o}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn--primary",children:"Reload"})]})]}):e.jsxs("main",{className:"app-page game-page--capture",children:[e.jsxs("header",{className:"app-header",children:[e.jsx(U,{to:"/list",className:"back-link",id:"backBtn",children:"Back"}),e.jsx("h1",{children:"Capture"}),e.jsxs("div",{className:"game-controls",children:[e.jsx("label",{htmlFor:"levelSelect",children:"Difficulty:"}),e.jsxs("select",{id:"levelSelect",className:"select",defaultValue:"easy",children:[e.jsx("option",{value:"easy",children:"Easy (halves, thirds, quarters)"}),e.jsx("option",{value:"medium",children:"Medium (denominators up to 9)"}),e.jsx("option",{value:"mathanomical",children:"Mathanomical (mixed numbers)"})]}),e.jsx("button",{id:"startBtn",className:"btn btn--primary",children:"Start"}),e.jsx("button",{id:"pauseBtn",className:"btn btn--secondary",disabled:!0,children:"Pause"}),e.jsxs("label",{htmlFor:"captureMusicToggle",className:"game-music-toggle",children:[e.jsx("input",{id:"captureMusicToggle",type:"checkbox"}),"Music"]})]})]}),e.jsxs("section",{className:"game-stats",children:[e.jsx("div",{className:"stat-badge stat-badge--score",id:"scoreDisplay",children:"Score: 0"}),e.jsx("div",{className:"stat-badge",id:"streakDisplay",children:"Streak: x0"}),e.jsx("div",{className:"stat-badge",id:"targetFraction",children:"Find: —"})]}),e.jsxs("section",{className:"game-body",children:[e.jsxs("section",{className:"game-panel","aria-live":"polite",children:[e.jsx("p",{id:"status",children:"Press Start to begin."}),e.jsx("div",{className:"hint",id:"hint",style:{marginTop:"12px"}}),e.jsxs("div",{className:"inputWrap",style:{marginTop:"12px"},children:[e.jsx("label",{htmlFor:"fractionInput",style:{marginBottom:"6px"},children:"Type Answer:"}),e.jsx("input",{type:"text",id:"fractionInput",placeholder:"example: 3/6",autoComplete:"off",className:"input"})]})]}),e.jsx("div",{className:"game-board",children:e.jsx("div",{className:"canvas-anchor",children:e.jsx("canvas",{id:"gameCanvas",width:"800",height:"600","aria-label":"Game canvas"})})})]}),e.jsx("div",{id:"captureNowPlaying",className:"game-music-popup","aria-live":"polite"})]})}const de=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],Qe=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];function _e(s){if(s=Math.abs(Math.trunc(s)),s<20)return de[s];if(s<100){const m=Math.floor(s/10),a=s%10;return a?`${Qe[m]}-${de[a]}`:Qe[m]}const o=Math.floor(s/100),u=s%100;return u?`${de[o]} hundred ${_e(u)}`:`${de[o]} hundred`}function ja(s){if(!s||Number(s)===0)return"";let o=s;o.endsWith("00")?o=o.slice(0,1):o.endsWith("0")&&(o=o.slice(0,2));const a=({1:"tenth",2:"hundredth",3:"thousandth"}[o.length]||`${Math.pow(10,o.length)}th`)+"s",d=parseInt(o,10);return`${_e(d).replace(/\s+/g,"-")}-${a}`}function ke(s){if(!s)return null;const o=s.trim().toLowerCase();for(let m=0;m<de.length;m++)if(de[m]===o)return m;for(let m=2;m<Qe.length;m++){const a=Qe[m];if(o===a)return m*10;if(o.startsWith(a)){const d=o.slice(a.length),p=de.indexOf(d);if(p>0&&p<10)return m*10+p}}if(o.includes("-")){const m=o.split("-");if(m.length===2){const a=Qe.indexOf(m[0]),d=de.indexOf(m[1]);if(a>=2&&d>=0)return a*10+d}}else{const m=Qe.indexOf(o);if(m>=2)return m*10}const u=o.split(/\s+/);if(u.length===2){const m=ke(u[0]),a=ke(u[1]);if(m!==null&&a!==null)return m+a}return null}function _t(s){const o=Math.trunc(s),u=Math.round((s-o)*1e3),m=_e(o);if(u===0)return m.toLowerCase().replace(/\s+/g,"-");let a=String(u).padStart(3,"0");a.endsWith("00")?a=a.slice(0,1):a.endsWith("0")&&(a=a.slice(0,2));const d=ja(a);return`${m.toLowerCase().replace(/\s+/g,"-")}-and-${d}`}function zt(s,o){const u=typeof s=="number"?s:Math.floor(Math.random()*80)+20,m=typeof o=="number"?o:Math.floor(Math.random()*100),a=_t(u),d=String(m).padStart(2,"0");return`${a}.${d}`}function Qt(s,o="word-digit"){const u=_e(s).toLowerCase().replace(/[\s-]+/g,""),m=Math.floor(s/10),a=s%10;return o==="digits"?String(s):o==="word"?u:o==="digit-word"?a===0?String(s):`${m}${de[a]}`:a>0?`${_e(m*10).toLowerCase().replace(/[\s-]+/g,"")}${a}`:u}function Na(s,o="word-and-digit"){const u=Math.max(0,Math.min(99,s)),m=Math.floor(u/10),a=u%10,d=_e(u).toLowerCase().replace(/[\s-]+/g,"");return o==="digits"?`${u}hundredths`:o==="word"?`${_e(u).toLowerCase().replace(/[\s-]+/g,"")}hundredths`:o==="word-digit"?a===0?`${d}hundredths`:`${de[m]}${a}hundredths`:u>=10?a===0?`${d}hundredths`:`${de[m]}and${a}hundredths`:`${_e(u).toLowerCase().replace(/[\s-]+/g,"")}hundredths`}function ka(s,o="word-and-digit"){const u=Math.max(0,Math.min(999,s));if(o==="digits")return`${u}thousandths`;const m=_e(u).toLowerCase().replace(/[\s-]+/g,"");if(o==="word")return`${m}thousandths`;const a=_e(Math.floor(u/10)*10).toLowerCase().replace(/[\s-]+/g,""),d=Math.floor(u/100),p=Math.floor(u%100/10),g=u%10;if(o==="word-digit-word"&&d>0){const y=de[d],b=g>0?de[g]:"";return`${b?`${y}${p}${b}`:`${y}${p}`}thousandths`}return o==="word-digit"&&u>=10?g===0?`${a}thousandths`:`${de[p]}${g}thousandths`:o==="digit-word"&&u>=10?g===0?`${a}thousandths`:`${p}${de[g]}thousandths`:u>=10?g===0?`${a}thousandths`:`${de[p]}and${g}thousandths`:`${m}thousandths`}function Sa(s){if(!s)return null;const o=s.toLowerCase().replace(/thousandths?$/,"");if(!o)return null;const u=o.match(/^(\d)([a-z\-]+)$/);if(u){const d=parseInt(u[1],10),p=u[2],g=ke(p);if(isFinite(d)&&g!==null&&g>=0&&g<10)return d*10+g}const m=o.replace(/[^0-9]/g,""),a=o.replace(/[^a-z\-]/g,"").replace(/and/g,"");if(m&&a){const d=parseInt(m,10),p=ke(a);if(p!==null)return m.length===2&&p<10?p*100+d:m.length===1&&p<10?p*10+d:m.length===1&&p>=20&&p%10===0?p+d:parseInt(`${d}${p}`,10);const g=rn(o);if(g!==null)return g}return m?parseInt(m,10):ke(a)}function rn(s){if(!s)return null;let o=null,u=null;for(const g of de.slice(1))if(s.startsWith(g)){o=g;break}for(const g of de.slice(1))if(s.endsWith(g)){u=g;break}if(!o||!u)return null;const m=s.slice(o.length,s.length-u.length);if(!/^\d+$/.test(m))return null;const a=de.indexOf(o),d=de.indexOf(u),p=parseInt(m,10);return a<0||d<0||p<0||p>9?null:a*100+p*10+d}function Ma(s){if(!s)return null;const o=s.toLowerCase(),u=o.match(/^(\d)([a-z\-]+)$/);if(u){const p=parseInt(u[1],10),g=u[2],y=ke(g);if(isFinite(p)&&y!==null&&y>=0&&y<10)return p*10+y}const m=o.replace(/[^0-9]/g,""),a=o.replace(/[^a-z\-]/g,"").replace(/and/g,""),d=a?ke(a):null;if(m){const p=parseInt(m,10);return d!==null?m.length===1&&d<10?d*10+p:d>=20&&d%10===0&&m.length===1?d+p:parseInt(`${d}${m}`,10):p}return d}function Ca(s){if(!s)return null;const o=s.toLowerCase().replace(/hundredths?$/,""),u=o.replace(/[^0-9]/g,""),m=o.replace(/[^a-z\-]/g,"").replace(/and/g,""),a=m?ke(m):null;if(u){const d=parseInt(u,10);return a!==null?u.length===1&&a<10?a*10+d:a>=20&&a%10===0&&u.length===1?a+d:parseInt(`${a}${u}`,10):d}return a}function gt(s){if(!s)return null;if(s.includes("-and-"))return Ea(s);if(s.includes("&")){const[o,u]=s.split("&"),m=Ma(o);if(m===null)return null;const a=u||"";if(a.includes("thousandth")){const p=a.toLowerCase().replace(/thousandths?$/,""),g=Sa(a)??rn(p);return g===null||g<0||g>999?null:Number((m+g/1e3).toFixed(6))}const d=Ca(a);return d===null||d<0||d>99?null:Number((m+d/100).toFixed(6))}return Pa(s)}function Pa(s){if(!s)return null;const u=s.toLowerCase().replace(/[^a-z0-9\.\-]/g,"").split(".");if(u.length!==2)return null;const m=u[0].replace(/[^a-z\-]/g,""),a=u[1].replace(/[^0-9]/g,"");if(!m||!a)return null;const d=ke(m);if(d===null)return null;const p=Math.pow(10,a.length);return Number((d+Number(a)/p).toFixed(6))}function Ea(s){if(!s)return null;const o=s.trim().toLowerCase().replace(/^-+/,"").replace(/-+$/,"");if(o.includes("-and-")){const[m,a]=o.split("-and-"),d=ke(m);if(d===null)return null;let p=null,g=null;if(a.endsWith("thousandths"))p=1e3,g=a.slice(0,-11);else if(a.endsWith("hundredths"))p=100,g=a.slice(0,-10);else if(a.endsWith("tenths"))p=10,g=a.slice(0,-6);else if(a.endsWith("thousandth"))p=1e3,g=a.slice(0,-10);else if(a.endsWith("hundredth"))p=100,g=a.slice(0,-9);else if(a.endsWith("tenth"))p=10,g=a.slice(0,-5);else return null;g=g.replace(/-+$/,"").replace(/^-+/,"").trim();const y=ke(g);return y===null?null:Number((d+y/p).toFixed(6))}const u=ke(o);return u===null?null:Number(u.toFixed(6))}function _a(){window.__DecimalCleanup&&window.__DecimalCleanup(),window.__DecimalCleanup=null;const s=document.getElementById("level"),o=document.getElementById("start"),u=document.getElementById("pause");document.getElementById("backBtn");const m=document.getElementById("prompt"),a=document.getElementById("hint"),d=document.getElementById("score"),p=document.getElementById("timer"),g=document.getElementById("streak"),y=document.getElementById("answerInput"),b=document.getElementById("feedback"),M=document.getElementById("colsInput"),$=document.getElementById("rowsInput"),_=document.getElementById("cellSizeInput"),C=document.getElementById("applyGridBtn"),D=document.getElementById("gridPreview"),I=document.getElementById("palette"),H=document.getElementById("selectedColorPreview");let k=Number(M==null?void 0:M.value)||15,A=Number($==null?void 0:$.value)||15,j=Number(_==null?void 0:_.value)||28;const we=20,je=15;let ge=Number(_==null?void 0:_.value)||28,q=0,F=0,V={primary:"#1f77b4",secondary:"#0b2740"},ae,W,J=[],K=!1,he=!1,oe=0,ee=0,R=null,le=10,x=3;const Z={easy:125e4,medium:125e4,medium5:125e4,mathamatical:125e4};let O=null,se=0,me=0,ie=null,te=null,ne=null,pe=null,ue=null;const Me=.001;let be=!1,z=null,P=null,S=null,B=[],Q=[],Se=null,fe=null,ce=null,re={left:!1,right:!1,up:!1,down:!1},Te=0,Ne=0,Ie=0;const et=18e3;let Ce=null,Ae=null,Be=!1,Ke={x:0,y:0},Ze={x:0,y:0};const Ye=28;let $e=null,Le=null,Re=null,We=null,ve=null,Fe=null,Ue=null;function Xe(){return localStorage.getItem("mathpop_current_user")||"guest"}function tt(){return`mathpop_profile_stats_${Xe()}`}function nt(){return`mathpop_benny_desk_fuel_${Xe()}`}function at(){return`mathpop_benny_desk_charge_${Xe()}`}function ct(){return Math.max(0,parseInt(localStorage.getItem(nt())||"0",10)||0)}function dt(){return Math.max(0,parseInt(localStorage.getItem(at())||"0",10)||0)}function ut(t){const n=Math.max(0,Math.floor(t)),i=ct(),l=dt();if(!n)return{tanksEarned:0,fuelBank:i,chargeRemainder:l};const c=l+n,h=Math.floor(c/6),f=c%6,v=i+h;return localStorage.setItem(at(),String(f)),localStorage.setItem(nt(),String(v)),{tanksEarned:h,fuelBank:v,chargeRemainder:f}}function Oe(){const t=localStorage.getItem(tt());if(!t)return{totalPoints:0,totalCorrect:0,totalAttempted:0,pupStreakRecord:0,levelsCompleted:[],games:{}};try{const n=JSON.parse(t);return{totalPoints:Number(n.totalPoints)||0,totalCorrect:Number(n.totalCorrect)||0,totalAttempted:Number(n.totalAttempted)||0,pupStreakRecord:Number(n.pupStreakRecord)||0,levelsCompleted:Array.isArray(n.levelsCompleted)?n.levelsCompleted:[],games:n.games&&typeof n.games=="object"?n.games:{}}}catch{return{totalPoints:0,totalCorrect:0,totalAttempted:0,pupStreakRecord:0,levelsCompleted:[],games:{}}}}function Je(t,n){return t.games[n]||(t.games[n]={points:0,correct:0,attempted:0,bestScore:0,streakRecord:0,gamesPlayed:0}),t.games[n]}function r(t){localStorage.setItem(tt(),JSON.stringify(t))}function T(t,n){const i=Oe(),l=Je(i,"decimal");i.totalAttempted+=1,l.attempted+=1,t&&(i.totalCorrect+=1,l.correct+=1,i.totalPoints+=n,l.points+=n),l.streakRecord=Math.max(l.streakRecord,ee),l.bestScore=Math.max(l.bestScore,oe),r(i)}function Y(){const t=jt();return t.startsWith("easy")?{level:"easy",cols:parseInt(t.replace("easy",""),10)||20}:t==="medium"?{level:"medium",cols:Number(M==null?void 0:M.value)||25}:{level:"mathamatical",cols:Number(M==null?void 0:M.value)||25}}function xe(){const t=jt();return t.startsWith("easy")?"easy":t==="medium"?"medium":"mathamatical"}function ze(){const t=Y();k=t.cols,A=15,$&&($.value=String(A),$.disabled=!0),M&&(M.value=String(k),M.disabled=t.level==="easy"),C&&(C.disabled=t.level==="easy")}const De=[{id:"dp-01",primary:"#0c0b18",secondary:"#3b0f58"},{id:"dp-02",primary:"#0b1026",secondary:"#0f6b6d"},{id:"dp-03",primary:"#160a2a",secondary:"#5b1e57"},{id:"dp-04",primary:"#071a24",secondary:"#164c70"},{id:"dp-05",primary:"#140b1f",secondary:"#6b2a3f"},{id:"dp-06",primary:"#09131c",secondary:"#246b4f"},{id:"dp-07",primary:"#0e0f1e",secondary:"#4a2f8a"},{id:"dp-08",primary:"#0a1a1f",secondary:"#1e5a7a"},{id:"dp-09",primary:"#131126",secondary:"#3f2d78"},{id:"dp-10",primary:"#0d1a2d",secondary:"#1b5ea5"},{id:"dp-11",primary:"#150b24",secondary:"#6d1f5f"},{id:"dp-12",primary:"#111629",secondary:"#3c5bdc"},{id:"dp-13",primary:"#0f0e1d",secondary:"#7a2bff"},{id:"dp-14",primary:"#0b1426",secondary:"#2f8bff"},{id:"dp-15",primary:"#120d1a",secondary:"#ff2f92"},{id:"dp-16",primary:"#0f1216",secondary:"#27f2ff"},{id:"dp-17",primary:"#170f25",secondary:"#8a4bff"},{id:"dp-18",primary:"#0f1a24",secondary:"#22d3ee"},{id:"dp-19",primary:"#120a1c",secondary:"#ff5e5e"},{id:"dp-20",primary:"#10121d",secondary:"#c97bff"},{id:"dp-21",primary:"#0b0f18",secondary:"#19b5a5"},{id:"dp-22",primary:"#0f1422",secondary:"#ff8a3d"},{id:"dp-23",primary:"#0c1520",secondary:"#3dd6ff"},{id:"dp-24",primary:"#140c1c",secondary:"#ff42c7"},{id:"dp-25",primary:"#0d1420",secondary:"#40ff8a"},{id:"dp-26",primary:"#0b1222",secondary:"#7c7cff"},{id:"dp-27",primary:"#0f0b18",secondary:"#ff6a00"},{id:"dp-28",primary:"#0d1a2b",secondary:"#00d1ff"},{id:"dp-29",primary:"#0f0f1b",secondary:"#ff4f7b"},{id:"dp-30",primary:"#101821",secondary:"#23c3ff"},{id:"dp-31",primary:"#120b1e",secondary:"#a855f7"},{id:"dp-32",primary:"#0a1622",secondary:"#00f5a0"},{id:"dp-33",primary:"#0c101f",secondary:"#4ade80"},{id:"dp-34",primary:"#0f1428",secondary:"#60a5fa"},{id:"dp-35",primary:"#150c20",secondary:"#f472b6"},{id:"dp-36",primary:"#0d1821",secondary:"#14b8a6"},{id:"dp-37",primary:"#140c24",secondary:"#e879f9"},{id:"dp-38",primary:"#0b151f",secondary:"#22d3ee"},{id:"dp-39",primary:"#0f0c1f",secondary:"#a3e635"},{id:"dp-40",primary:"#0e1420",secondary:"#38bdf8"},{id:"dp-41",primary:"#130d22",secondary:"#f97316"},{id:"dp-42",primary:"#0c1723",secondary:"#06b6d4"},{id:"dp-43",primary:"#120c1a",secondary:"#fb7185"},{id:"dp-44",primary:"#0d1524",secondary:"#3b82f6"},{id:"dp-45",primary:"#130c1f",secondary:"#d946ef"},{id:"dp-46",primary:"#0b1620",secondary:"#10b981"},{id:"dp-47",primary:"#0f0d18",secondary:"#facc15"},{id:"dp-48",primary:"#0c1326",secondary:"#6366f1"},{id:"dp-49",primary:"#100b1d",secondary:"#f43f5e"},{id:"dp-50",primary:"#0c1726",secondary:"#0ea5e9"}];let st=[];function L(t,n){return Math.floor(Math.random()*(n-t+1))+t}function Pe(t,n,i){return Math.max(n,Math.min(i,t))}function qe(t){return Number(t).toFixed(3).replace(/\.?0+$/,"")}function jt(){return s&&s.value||"easy20"}const Tt={easy20:[{name:"euler-vortex",map:["...#####.....","..#...#..###.",".#....#.#...#","#.....###...#","#....##.....#",".#..###..#...","..#...#..#...","...###..#....","....#..###..."]},{name:"quadratic-wave",map:[".....#.......","....#.#......","...#...#.....","..#.....#....",".#.......#...","#.........#..",".#.......#...","..#.....#....","...#...#....."]},{name:"sine-cosine",map:["..#.....#....",".#.#...#.#...","#...#.#...#..",".#...#...#...","..#...#...#..",".#...#...#...","#..#...#..#..",".#.#...#.#...","..#.....#...."]},{name:"log-tunnel",map:["#############","##.........##","#..#######..#","#..#.....#..#","#..#..#..#..#","#..#.....#..#","#..#######..#","##.........##","#############"]},{name:"exponential-bloom",map:[".....#.......","...#.#.#.....","..#..#..#....","..#..#..#....",".##.###.##...","..#..#..#....","..#..#..#....","...#.#.#.....",".....#......."]}],easy25:[{name:"mandelbrot",map:["....#####....","..#########..",".###########.",".###########.",".###########.","..#########..","...#######...","....#####....",".....###....."]},{name:"julia-dream",map:["....###..###.","...####..####","..#####..####","..####....###","..####....###","..#####..####","...####..####","....###..###.",".....#....#.."]},{name:"chaos-glitch",map:["#..#...#..#..",".#....##.....","...##...#.#..","#...#..#....#","..#..#...##..",".##....#..#..","..#.#...##...","#..##.....#..",".#..#..#..#.."]},{name:"spiral-stair",map:["#............","##...........",".##..........","..##.........","...##........","....##.......",".....##......","......##.....",".......##...."]},{name:"butterfly",map:["..##.....##..",".###.....###.","#####...#####",".###..#..###.","..##.###.##..",".###..#..###.","#####...#####",".###.....###.","..##.....##.."]}],easy30:[{name:"fourier-spectrum",map:["....#...#....","...##..###...","..###.####...",".####.#####..","#####.#####..","#####.######.","######.######","######.######","#############"]},{name:"wave-interference",map:["#.#.#.#.#.#.#",".#.#.#.#.#.#.","#.#.#.#.#.#.#",".#.#.#.#.#.#.","#.#.#.#.#.#.#",".#.#.#.#.#.#.","#.#.#.#.#.#.#",".#.#.#.#.#.#.","#.#.#.#.#.#.#"]},{name:"beat-grid",map:["##..##..##..#","..##..##..##.","##..##..##..#","..##..##..##.","##..##..##..#","..##..##..##.","##..##..##..#","..##..##..##.","##..##..##..#"]},{name:"harmonic-rings",map:["...#####.....","..#.....#....",".#..###..#...",".#..#.#..#...",".#..###..#...","..#.....#....","...#####.....",".............","............."]},{name:"rhythm-matrix",map:["###...###...#","#..#..#..#..#","###...###...#","..#.....#....","###...###...#","#..#..#..#..#","###...###...#","....#....#...","###...###...#"]}],medium:[{name:"impossible-triangle",map:["......#......",".....#.#.....","....#...#....","...#.....#...","..#.......#..",".#.........#.","#############","............#","###########.."]},{name:"tessellation",map:["..#...#...#..",".#.#.#.#.#.#.","#...#...#...#",".#.#.#.#.#.#.","..#...#...#..",".#.#.#.#.#.#.","#...#...#...#",".#.#.#.#.#.#.","..#...#...#.."]},{name:"mobius-loop",map:["..####...####",".#....#.#....","#......#.....","#.....#......",".#....#.#....","..####...####","....#.#....#.",".....#......#","....#........"]},{name:"golden-garden",map:["....#####....","...#.....#...","..#..###..#..",".#..#...#..#.",".#..#...#..#.","..#..###..#..","...#.....#...","....#####....","......#......"]},{name:"polyhedron",map:["....#####....","...#.....#...","..#.......#..",".#.........#.",".#.........#.","..#.......#..","...#.....#...","....#####....","............."]}],mathamatical:[{name:"number-soup",map:["#.#.##..#.#.#","##..#.#..##..",".#.#..##.#.#.","##..##..#..##","#..#.#.##..#.",".##..#..##..#","#.#..##.#..##","##..#..##.#..",".#.#.##..#.#."]},{name:"graffiti-wall",map:["########.....","#######....#.","######...##..","#####...###..","####...####..","###...#####..","##...######..","#...#######..","...########.."]},{name:"infinity-raceway",map:["...####.####.","..#....#....#",".#.....#.....",".#....#.#....",".#.....#.....","..#....#....#","...####.####.",".............","............."]},{name:"probability-cloud",map:[".....###.....","....#####....","...#######...","..#########..",".###########.","..#########..","...#######...","....#####....",".....###....."]},{name:"mathanomical-void",map:["#....#....#..","...#.....#...",".....#.......","..#.......#..","....#..#.....","#.......#....","....#........","..#....#.....",".....#....#.."]}]};let mt=null;function on(t){if(!t||!t.length)return null;const n=t.length,i=t[0].length,l=Math.max(1,Math.floor(Math.min((k-2)/i,(A-2)/n))),c=Math.max(0,Math.floor((k-i*l)/2)),h=Math.max(0,Math.floor((A-n*l)/2)),f=Array.from({length:A},()=>Array(k).fill(!1));for(let v=0;v<n;v++)for(let N=0;N<i;N++)if(t[v][N]==="#")for(let G=0;G<l;G++)for(let w=0;w<l;w++){const X=h+v*l+G,Ge=c+N*l+w;X>=0&&X<A&&Ge>=0&&Ge<k&&(f[X][Ge]=!0)}return f}function Nt(){const t=jt(),n=Tt[t]||Tt.easy20,i=n[L(0,n.length-1)];i.name,mt=on(i.map)}function ln(){const t=L(20,99),n=L(0,99),i=L(0,2);if(i===0)return zt(t,n);const l=i===1?"word-digit":"digit-word",c=i===1?"word-and-digit":"word-digit",h=Qt(t,l),f=Na(n,c);return`${h}&${f}`}function cn(){const t=L(20,99),n=L(0,999),i=L(0,2);if(i===0){const v=_t(t),N=String(n).padStart(3,"0");return`${v}.${N}`}const l=i===1?"word-digit":"digit-word",c=i===1?"word-and-digit":"word-digit-word",h=Qt(t,l),f=ka(n,c);return`${h}&${f}`}function kt(){let t=L(2,30),i=`${(t/10).toFixed(1)}*10`;const l=L(0,2);for(let c=0;c<l;c++)if(Math.random()<.6){const h=L(2,5);t*=h,i+=`*${h}`}else{const h=[];for(let f=2;f<=9;f++)t%f===0&&h.push(f);if(h.length===0){const f=L(2,5);t*=f,i+=`*${f}`}else{const f=h[L(0,h.length-1)];t=t/f,i+=`/${f}`}}return{expr:i,value:t}}function dn(t){const n=t.includes("+")||t.includes("-"),i=t.includes("*")||t.includes("/");if(!n&&i)return kt().expr;if(n&&!i){const h=L(2,4);let f=`${L(1,9)}.${L(0,9)}`;for(let v=1;v<h;v++){const N=Math.random()<.5?"+":"-",G=`${L(1,9)}.${L(0,9)}`;f+=`${N}${G}`}return f}const l=L(2,4);let c=kt().expr;for(let h=1;h<l;h++){const f=Math.random()<.5?"+":"-",v=kt().expr;c+=`${f}${v}`}return c}function un(t,n,i){if(t.length>=i)return t.slice(0,i);let l=t;const c=n.includes("+")||n.includes("-"),h=n.includes("*")||n.includes("/");for(;l.length<i;){const f=i-l.length;if(c&&f>=2){const v=Math.random()<.5?"+":"-",N=String(L(1,9));l+=v+N;continue}if(h&&f>=2){const v=Math.random()<.5?"*":"/";l+=v+"1";continue}l+=String(L(1,9))}return l.slice(0,i)}function mn(t,n=k){for(let l=0;l<400;l++){let c=dn(t);if(c.length>n&&(c=hn(c,n)),c=un(c,t,n),c.length!==n)continue;const h=it(c,t);if(h!==null&&!(Math.abs(h-Math.round(h))>Me))return c}return"0".repeat(n)}function hn(t,n){const i=t.match(/(\d+\.\d+|\d+|[+\-*/])/g)||[];let l="";for(let c=0;c<i.length;c++){let h=i[c];if(/\d+\.\d+/.test(h)&&l.length+h.length>n){const[f,v]=h.split(".");let N=v;for(;N.length>0&&l.length+(f+"."+N).length>n;)N=N.slice(0,-1);N.length===0?h=f:h=f+"."+N}if(l.length+h.length>n)break;l+=h}return l}function pn(t=k){const i=s&&s.value||"easy20",l=i==="easy25",c=i==="easy30";for(let h=0;h<200;h++){let v=(c?cn():l?ln():zt()).replace(/[^a-z0-9\-\.&]/g,"").toLowerCase();if(v.length>t&&(v=v.replace(/-+/g,"-"),v.length>t))continue;const N=t-v.length,G=Math.floor(N/2),w=N-G,X="-".repeat(G)+v+"-".repeat(w),Ge=X.replace(/^-+|-+$/g,"");if(gt(Ge)!==null)return X}return"one".repeat(Math.ceil(t/3)).slice(0,t)}function it(t,n){if(!/^[0-9\.\+\-\*\/\s]+$/.test(t))return null;for(const N of t)if((N==="+"||N==="-"||N==="*"||N==="/")&&!n.includes(N))return null;const i=[];let l=0;for(;l<t.length;){const N=t[l];if(N===" "){l++;continue}if(N>="0"&&N<="9"||N==="."){let G=l;for(;G<t.length&&(t[G]>="0"&&t[G]<="9"||t[G]===".");)G++;const w=t.slice(l,G),X=Number(w);if(!isFinite(X))return null;i.push({type:"num",value:X}),l=G;continue}if("+-*/".includes(N)){i.push({type:"op",value:N}),l++;continue}return null}function c(N){return N==="+"||N==="-"?1:N==="*"||N==="/"?2:0}const h=[],f=[];for(const N of i)if(N.type==="num")h.push(N);else{for(;f.length&&c(f[f.length-1].value)>=c(N.value);)h.push(f.pop());f.push(N)}for(;f.length;)h.push(f.pop());const v=[];for(const N of h)if(N.type==="num")v.push(N.value);else{if(v.length<2)return null;const G=v.pop(),w=v.pop();let X;switch(N.value){case"+":X=w+G;break;case"-":X=w-G;break;case"*":X=w*G;break;case"/":if(G===0)return null;X=w/G;break;default:return null}v.push(X)}return v.length!==1?null:v[0]}function ht(t=k,n=A){k=t,A=n,J=[];for(let i=0;i<A;i++){const l=[];for(let c=0;c<k;c++)l.push(null);J.push(l)}}function fn(t,n){for(let i=0;i<k;i++)J[t][i]={ch:n[i]||"0"}}function yn(){for(let t=0;t<A;t++)for(let n=0;n<k;n++)if(J[t][n])return!0;return!1}function pt(){let t=document.getElementById("decimalGameCanvas");if(!t){t=document.createElement("canvas"),t.id="decimalGameCanvas",t.style.display="block",t.style.marginTop="8px";const n=document.getElementById("canvasAnchor");n?n.appendChild(t):m.insertAdjacentElement("afterend",t)}ae=t,W=ae.getContext("2d"),$t(),ae.removeEventListener("click",Mt),ae.addEventListener("click",Mt)}function $t(){if(!ae)return;const t=we*ge,n=je*ge;j=Math.min(t/k,n/A);const l=k*j,c=A*j;q=Math.floor((t-l)/2),F=Math.floor((n-c)/2),ae.width=Math.round(t),ae.height=Math.round(n)}function It(t,n){const i=(V==null?void 0:V.primary)||"#1f77b4",l=(V==null?void 0:V.secondary)||i,c=W.createLinearGradient(t,n,t+j,n+j);return c.addColorStop(0,i),c.addColorStop(1,l),c}function ye(){if(W){$t(),W.clearRect(0,0,ae.width,ae.height);for(let t=0;t<A;t++)for(let n=0;n<k;n++){const i=q+n*j,l=F+t*j,c=mt&&mt[t]&&mt[t][n];W.fillStyle=c?"#0b3a4a":"#041218",W.fillRect(i,l,j,j),W.strokeStyle=c?"#1b5566":"#07202a",W.strokeRect(i+.5,l+.5,j-1,j-1);const h=J[t][n];h?(W.fillStyle=It(i,l),St(W,i+2,l+2,j-4,j-4,4),c&&(W.fillStyle="rgba(255, 255, 255, 0.18)",St(W,i+2,l+2,j-4,j-4,4)),W.fillStyle="#fff",W.font=`700 ${Math.max(14,Math.floor(j*.7))}px monospace`,W.textAlign="center",W.textBaseline="middle",W.fillText(h.ch,i+j/2,l+j/2+1)):c&&(W.fillStyle="rgba(255, 255, 255, 0.16)",W.beginPath(),W.arc(i+j/2,l+j/2,Math.max(1,j*.12),0,Math.PI*2),W.fill())}if(R){const{blocks:t,row:n,col:i}=R;for(let l=0;l<t.length;l++){const c=t[l],h=c.ch,f=q+(i+c.c)*j,v=F+(n+c.r)*j;W.fillStyle=It(f,v),St(W,f+2,v+2,j-4,j-4,4),W.strokeStyle="#0ea5a4",W.strokeRect(f+2,v+2,j-4,j-4),W.fillStyle="#fff",W.font=`700 ${Math.max(14,Math.floor(j*.7))}px monospace`,W.textAlign="center",W.textBaseline="middle",W.fillText(h,f+j/2,v+j/2+1)}}te!==null&&(W.fillStyle="rgba(255,255,255,0.06)",W.fillRect(q,F+te*j,k*j,j))}}function St(t,n,i,l,c,h,f,v){t.beginPath(),t.moveTo(n+h,i),t.arcTo(n+l,i,n+l,i+c,h),t.arcTo(n+l,i+c,n,i+c,h),t.arcTo(n,i+c,n,i,h),t.arcTo(n,i,n+l,i,h),t.closePath(),t.fill()}function ft(t,n,i){const l=t.blocks;for(let c=0;c<l.length;c++){const h=n+l[c].r,f=i+l[c].c;if(f<0||f>=k||h>=A||h>=0&&J[h][f])return!1}return!0}function gn(){if(!R)return;const{blocks:t,row:n,col:i}=R;for(let c=0;c<t.length;c++){const h=n+t[c].r,f=i+t[c].c;if(h>=0&&h<A&&f>=0&&f<k)J[h][f]={ch:t[c].ch};else{Dn();return}}R=null;const l=[];for(let c=0;c<A;c++)J[c].every(h=>h!==null)&&l.push(c);if(l.length>0)Bt(l[0]),b.textContent="Row filled — solve when ready.";else{const c=[];for(let h=0;h<k;h++)J.every(f=>f[h]!==null)&&c.push(h);c.length>0?(Pn(c[0]),b.textContent="Column filled — solve when ready."):(te=null,ne=null)}ye()}const At=[{name:"I",blocks:[[0,0],[1,0],[2,0],[3,0]]},{name:"L",blocks:[[0,0],[1,0],[2,0],[2,1]]},{name:"T",blocks:[[0,0],[0,1],[0,2],[1,1]]},{name:"O",blocks:[[0,0],[0,1],[1,0],[1,1]]},{name:"I3",blocks:[[0,0],[1,0],[2,0]]},{name:"L3",blocks:[[0,0],[1,0],[1,1]]}];function xn(){return At[L(0,At.length-1)]}function bn(t){const n=L(1,25),i=L(1,2),l=L(0,Math.pow(10,i)-1),c=+`${n}.${String(l).padStart(i,"0")}`;let h=_t(c).replace(/[^a-z\-]/g,"").toLowerCase();if(h.length<t&&(h=h.padEnd(t,"-")),h.length>t){const f=L(0,Math.max(0,h.length-t));h=h.slice(f,f+t)}return h.split("")}function vn(t,n){let i=t>=3?`${L(1,9)}.${L(0,9)}`:`${L(0,9)}`;for(;i.length<t;){const l=i[i.length-1];n.length&&!"+-*/".includes(l)&&i.length<t-1&&Math.random()<.45?i+=n[L(0,n.length-1)]:i+=String(L(0,9))}return i.slice(0,t).split("")}function wn(t,n,i){return n==="easy"?bn(t):vn(t,i)}function jn(){if(R)return!1;const t=xe(),n=t==="easy"?["+","-"]:t==="medium"?["*","/"]:["+","-","*","/"],l=xn().blocks.map(([v,N])=>({r:v,c:N,ch:""})),c=wn(l.length,t,n);for(let v=0;v<l.length;v++)l[v].ch=c[v];const h=Math.max(...l.map(v=>v.c))+1,f=L(0,Math.max(0,k-h));return R={blocks:l,row:0,col:f},ye(),!0}function Nn(){if(!R)return;const t=R.row+1;ft(R,t,R.col)?(R.row=t,ye()):(gn(),jn())}function kn(){if(!R)return;const t=R.col-1;ft(R,R.row,t)&&(R.col=t,ye())}function Sn(){if(!R)return;const t=R.col+1;ft(R,R.row,t)&&(R.col=t,ye())}function Mn(){if(!R)return;const t=R.blocks.map(f=>({r:f.r,c:f.c,ch:f.ch})),n=Math.max(...t.map(f=>f.r));Math.max(...t.map(f=>f.c));const i=t.map(f=>({r:f.c,c:n-f.r,ch:f.ch})),l=Math.max(...i.map(f=>f.c))+1;let c=R.col;c+l>k&&(c=Math.max(0,k-l));const h={blocks:i,row:R.row,col:c};ft(h,h.row,h.col)&&(R.blocks=i,R.col=c,ye())}function Cn(){Ve();const t=xe();me=Z[t]||125e4,se=performance.now(),O=setTimeout(()=>{K=!1,b.textContent="Round time expired",Ve(),y&&(y.style.display="none")},me),ie&&clearInterval(ie),ie=setInterval(()=>{if(!O)return;const n=performance.now()-se,i=Math.max(0,me-n);p.textContent=(i/1e3).toFixed(1)},100)}function Ve(){O&&(clearTimeout(O),O=null),ie&&(clearInterval(ie),ie=null)}function Bt(t){te=t,ne=null;const n=J[t].map(c=>c?c.ch:"").join("").trim();pe=n,ue=null,m.textContent=`Solve row ${t+1}: ${n}`;const i=xe(),l=qt(n,i);Dt(n,i)||a&&(a.textContent=l),ye()}function Pn(t){ne=t,te=null;const n=J.map(c=>c[t]?c[t].ch:"").join("").trim();ue=n,pe=null,m.textContent=`Solve column ${t+1}: ${n}`;const i=xe(),l=qt(n,i);Dt(n,i)||a&&(a.textContent=l),ye()}function Lt(){if(!m)return null;const t=m.textContent||"",n=t.indexOf(":");return n===-1?null:t.slice(n+1).trim()||null}function En(t){if(te===null)return;let n=Lt()||pe||J[te].map(f=>f?f.ch:"").join("");n=n.replace(/^[+\-*/]+/,"").replace(/[+\-*/]+$/,"");const i=xe();if(i==="easy"){const f=n.replace(/^-+|-+$/g,""),v=gt(f);if(v===null)return b.textContent="Row word invalid",!1;const N=Number(t);return isFinite(N)?Math.abs(v-N)<=.001?(Rt(te),oe+=8,ee++,rt(),b.textContent="Correct — row cleared",te=null,pe=null,T(!0,8),!0):(ee=0,b.textContent=`Incorrect — expected ${qe(v)}`,T(!1,0),!1):(b.textContent="Invalid number",!1)}const c=it(n,i==="medium"?["+","-"]:["+","-","*","/"]);if(c===null)return b.textContent="Row expression invalid",!1;const h=Number(t);return isFinite(h)?Math.abs(h-c)<=.001?(Rt(te),oe+=10,ee++,rt(),b.textContent="Correct — row cleared",te=null,pe=null,T(!0,10),!0):(ee=0,b.textContent=`Incorrect — expected ${qe(c)}`,T(!1,0),!1):(b.textContent="Invalid number",!1)}function _n(t){if(ne===null)return;let n=Lt()||ue||J.map(f=>f[ne]?f[ne].ch:"").join("");n=n.replace(/^[+\-*/]+/,"").replace(/[+\-*/]+$/,"");const i=xe();if(i==="easy"){const f=n.replace(/^-+|-+$/g,""),v=gt(f);if(v===null)return b.textContent="Column word invalid",!1;const N=Number(t);return isFinite(N)?Math.abs(v-N)<=.001?(Wt(ne),oe+=8,ee++,rt(),b.textContent="Correct — column cleared",ne=null,ue=null,T(!0,8),!0):(ee=0,b.textContent=`Incorrect — expected ${qe(v)}`,T(!1,0),!1):(b.textContent="Invalid number",!1)}const c=it(n,i==="medium"?["+","-"]:["+","-","*","/"]);if(c===null)return b.textContent="Column expression invalid",!1;const h=Number(t);return isFinite(h)?Math.abs(h-c)<=.001?(Wt(ne),oe+=10,ee++,rt(),b.textContent="Correct — column cleared",ne=null,ue=null,T(!0,10),!0):(ee=0,b.textContent=`Incorrect — expected ${qe(c)}`,T(!1,0),!1):(b.textContent="Invalid number",!1)}function Rt(t){for(let n=0;n<k;n++)J[t][n]=null;if(le>0&&(le--,le===0&&(b.textContent="No more drops — clear the remaining rows to win!")),le===0&&!yn()){qn();return}ye()}function Wt(t){for(let n=A-1;n>=0;n--)J[n][t]=null;ye()}function Ft(t,n){let i=t.trim();return n==="easy"?i=i.replace(/^-+|-+$/g,""):i=i.replace(/^[+\-*/]+/,"").replace(/[+\-*/]+$/,""),i}function Dt(t,n){if(x<=0||Math.random()>.18)return!1;const i=Ft(t,n);let l=null;return n==="easy"?l=gt(i):l=it(i,n==="medium"?["+","-"]:["+","-","*","/"]),l===null?!1:(x-=1,a&&(a.textContent=`Answer reveal (${3-x}/3): ${qe(l)}`),!0)}function qt(t,n){const i=Ft(t,n);if(!i)return"Hint: click a full row to solve it.";if(n==="easy"){if(i.includes("&")){const[v,N]=i.split("&"),G=/thousandth/.test(N)?"thousandths":"hundredths";return`Hint: "${v}" is the whole number and "${N}" are ${G}.`}const c=i.split("."),h=c[0]?c[0].replace(/-/g," "):"",f=c[1]||"";if(h&&f){const v=f.length===3?"thousandths":"hundredths";return`Hint: word part "${h}" and decimal digits ".${f}" (${v}).`}return"Hint: convert the word to a number, then append the decimal digits shown."}if(n==="medium"){const c=i.match(/(\d+\.\d+|\d+|[+\-])/g)||[];if(c.length>=3){const h=Number(c[0]),f=c[1],v=Number(c[2]);if(isFinite(h)&&isFinite(v)){const N=f==="+"?h+v:h-v;return`Hint: first do ${c[0]}${f}${c[2]} = ${qe(N)}, then continue left to right.`}}return"Hint: add and subtract left to right, keep one decimal place."}const l=i.match(/(\d+\.\d+|\d+|[+\-*/])/g)||[];for(let c=0;c<l.length;c++)if(l[c]==="*"||l[c]==="/"){const h=Number(l[c-1]),f=Number(l[c+1]);if(isFinite(h)&&isFinite(f)&&(l[c]!=="/"||f!==0)){const v=l[c]==="*"?h*f:h/f;return`Hint: resolve ${l[c-1]}${l[c]}${l[c+1]} = ${qe(v)} first.`}}if(l.length>=3){const c=Number(l[0]),h=l[1],f=Number(l[2]);if(isFinite(c)&&isFinite(f)){const v=h==="+"?c+f:c-f;return`Hint: start with ${l[0]}${h}${l[2]} = ${qe(v)}.`}}return"Hint: do multiplication/division before addition/subtraction."}y&&(y.style.display="",$e||($e=t=>{if(t.key==="Enter"){const n=y.value.trim();if(y.value="",!n)return;if(te===null&&ne===null){b.textContent="Click a full row to select it then answer.";return}te!==null?En(n):_n(n)}}),y.removeEventListener("keydown",$e),y.addEventListener("keydown",$e));function Mt(t){if(!ae)return;const n=ae.getBoundingClientRect(),i=ae.width/n.width,l=ae.height/n.height;(t.clientX-n.left)*i-q;const c=(t.clientY-n.top)*l-F,h=Math.floor(c/j);if(h>=0&&h<A&&J[h].every(f=>f!==null)){Bt(h),b.textContent="Row selected — solve when ready.";return}te=null,ne=null,he||(m.textContent="Select a full row to solve"),ye()}const Gt=t=>{if(be){t.key==="ArrowLeft"&&(re.left=!0,t.preventDefault()),t.key==="ArrowRight"&&(re.right=!0,t.preventDefault()),t.key==="ArrowUp"&&(re.up=!0,t.preventDefault()),t.key==="ArrowDown"&&(re.down=!0,t.preventDefault());return}!K||he||(t.key==="ArrowLeft"&&(kn(),t.preventDefault()),t.key==="ArrowRight"&&(Sn(),t.preventDefault()),t.key==="ArrowDown"&&(Nn(),t.preventDefault()),(t.key==="ArrowUp"||t.key.toLowerCase()==="r"||t.key===" ")&&(Mn(),t.preventDefault()))},Ht=t=>{be&&(t.key==="ArrowLeft"&&(re.left=!1),t.key==="ArrowRight"&&(re.right=!1),t.key==="ArrowUp"&&(re.up=!1),t.key==="ArrowDown"&&(re.down=!1))};window.addEventListener("keydown",Gt),window.addEventListener("keyup",Ht);function rt(){d&&(d.textContent=String(oe)),g&&(g.textContent=String(ee))}function Kt(){I&&(I.innerHTML="",De.forEach(t=>{const n=document.createElement("div");n.className="swatch",n.style.background=`linear-gradient(135deg, ${t.primary} 0%, ${t.secondary} 100%)`,n.dataset.color=t.primary,n.addEventListener("click",()=>{I.querySelectorAll(".swatch").forEach(i=>i.classList.remove("selected")),n.classList.add("selected"),V=t,H&&(H.style.background=`linear-gradient(135deg, ${t.primary} 0%, ${t.secondary} 100%)`),ye()}),I.appendChild(n),(t.primary===(V==null?void 0:V.primary)||!V&&I.children.length===1)&&(n.classList.add("selected"),V=t,H&&(H.style.background=`linear-gradient(135deg, ${t.primary} 0%, ${t.secondary} 100%)`))}))}function ot(){const t=Number(M==null?void 0:M.value)||k,n=Number($==null?void 0:$.value)||A,i=Number(_==null?void 0:_.value)||ge;D&&(D.textContent=`${t}×${n} @${i}px`)}function Tn(){ze(),Nt(),ot(),Kt(),Le||(Le=()=>{const t=Pe(Number(M.value)||k,8,30),n=15,i=Pe(Number(_.value)||j,20,48),l=K;l&&Ct(),k=t,A=n,j=i,ge=i,ht(k,A),pt(),ye(),ot(),l&&yt()}),ve||(ve=()=>ot()),Re||(Re=()=>{ze(),Nt(),ot(),ht(k,A),pt(),ye()}),We||(We=()=>{if(K){b.textContent="Game already running";return}yt()}),Fe||(Fe=()=>Ut()),C==null||C.removeEventListener("click",Le),C==null||C.addEventListener("click",Le),_==null||_.removeEventListener("input",ve),M==null||M.removeEventListener("input",ve),$==null||$.removeEventListener("input",ve),_==null||_.addEventListener("input",ve),M==null||M.addEventListener("input",ve),$==null||$.addEventListener("input",ve),s==null||s.removeEventListener("change",Re),s==null||s.addEventListener("change",Re),o==null||o.removeEventListener("click",We),o==null||o.addEventListener("click",We),u==null||u.removeEventListener("click",Fe),u==null||u.addEventListener("click",Fe)}function $n(t=1,n=100){return(L(t*10,n*10)/10).toFixed(1)}function In(){const t=$n(1,100),n=L(1,10)*10,i=n.toFixed(1),l=Number(t)*n;return{expr:`${t}*${i}`,value:l}}function An(){const t=L(10,200)/10,n=Math.floor(100/t);if(n<1)return null;const i=L(1,Math.min(12,n)),l=t*i;return l>100?null:{expr:`${l.toFixed(1)}/${t.toFixed(1)}`,value:i}}function Bn(){const n=L(2,200)*5/10,i=`${n.toFixed(1)}*10.0/5.0`,l=n*2;return{expr:i,value:l}}function Ln(t,n){let i=t;for(;i.length<n;)i.length+4<=n?i+="+0.0":i+="0";return i.slice(0,n)}function Rn(t=k){const n=[In,An,Bn],i=400;for(let l=0;l<i;l++){const c=L(3,5);let h="",f=0;for(let G=0;G<c;G++){const w=n[L(0,n.length-1)],X=w();if(!X){G--;continue}if(G===0)h=X.expr,f=X.value;else{const Ge=Math.random()<.5?"+":"-";h+=Ge+X.expr,f=Ge==="+"?f+X.value:f-X.value}}if(!h.includes(".")||h.length>t)continue;const v=Ln(h,t),N=it(v,["+","-","*","/"]);if(N!==null&&!(Math.abs(N-Math.round(N))>Me))return v}return"0".repeat(t)}function Wn(t,n=k){return t==="easy"?pn(n):t==="medium"?mn(["+","-"],n):Rn(n)}function Fn(){const t=xe();for(let n=0;n<A;n++){const i=Wn(t,k);fn(n,i)}}function yt(){K=!0,he=!1,oe=0,ee=0,te=null,ne=null,ze(),Nt(),ht(k,A),le=10,x=3,Fn(),pt(),ye(),Cn(),rt(),b.textContent="Game started — clear rows before the timer ends",m.textContent="Click a full row to solve it.",u.disabled=!1,u.textContent="Pause",y&&(y.style.display="");const t=Oe(),n=Je(t,"decimal");n.gamesPlayed+=1,r(t)}function Ct(){K=!1,he=!1,Ve(),Pt(),R=null,te=null,ne=null,b.textContent="Stopped",u.disabled=!0,y&&(y.style.display="none")}function Dn(){K=!1,Ve(),Pt(),m.textContent="Game Over",b.textContent=`Game over — score ${oe}`,y&&(y.style.display="none");const t=Oe(),n=Je(t,"decimal");n.bestScore=Math.max(n.bestScore,oe),r(t)}function qn(){K=!1,Ve(),m.textContent="You win!",b.textContent=`All rows cleared — score ${oe}`,y&&(y.style.display="none");const t=Oe(),n=Je(t,"decimal");n.bestScore=Math.max(n.bestScore,oe),r(t),Ue=Un((s==null?void 0:s.value)||"easy20"),Hn()}function Pt(){be=!1,ce&&cancelAnimationFrame(ce),ce=null,B.forEach(t=>t.el.remove()),B=[],Q.forEach(t=>t.el.remove()),Q=[],z&&(z.style.display="none")}function Ut(){if(K)if(he=!he,he){if(u.textContent="Resume",O&&se){const t=performance.now()-se;me=Math.max(0,me-t),Ve()}b.textContent="Paused",y&&(y.style.display="")}else u.textContent="Pause",se=performance.now(),O=setTimeout(()=>{K=!1,b.textContent="Round time expired",Ve(),y&&(y.style.display="none")},me),b.textContent="Resumed",y&&(y.style.display="")}De.length&&(V=De[0],H&&(H.style.background=`linear-gradient(135deg, ${De[0].primary} 0%, ${De[0].secondary} 100%)`)),M&&(M.value=k),$&&($.value=A),_&&(_.value=ge),ot(),ht(k,A),pt(),ye(),Kt(),Tn(),window.DecimalTetris={startGame:()=>yt(),stopGame:()=>Ct(),togglePause:()=>Ut(),getState:()=>({running:K,paused:he,score:oe,streak:ee,COLS:k,ROWS:A,CELL_SIZE:j,BLOCK_COLOR:(V==null?void 0:V.primary)||V,targetRows:st})};function Gn(){if(z)return;const t=document.querySelector(".decimal-page");if(!t)return;z=document.createElement("div"),z.className="decimal-mini-game",z.innerHTML=`
      <div class="decimal-mini-card">
        <div class="decimal-mini-header">
          <span>Desk Stampede Bonus</span>
          <span id="decimalMiniTimerText">18s</span>
        </div>
        <div class="decimal-mini-bar"><div class="decimal-mini-bar-fill" id="decimalMiniDeskFill"></div></div>
        <div class="decimal-mini-arena"></div>
        <div class="decimal-mini-controls" aria-hidden="true">
          <div class="decimal-mini-joystick" id="decimalMiniJoystick">
            <div class="decimal-mini-stick" id="decimalMiniStick"></div>
          </div>
          <div class="decimal-mini-help">Collect desks, avoid broken desks. 6 desks = 1 Benny Dash tank.</div>
        </div>
      </div>
    `,t.appendChild(z),P=z.querySelector(".decimal-mini-arena"),Se=z.querySelector("#decimalMiniDeskFill"),fe=z.querySelector("#decimalMiniTimerText"),S=document.createElement("div"),S.className="decimal-mini-benny",S.innerHTML=`
      <div class="benny-body"></div>
      <div class="benny-head"></div>
      <div class="benny-leg left"></div>
      <div class="benny-leg right"></div>
    `,P.appendChild(S);const n=z.querySelector(".decimal-mini-controls");Ce=z.querySelector("#decimalMiniJoystick"),Ae=z.querySelector("#decimalMiniStick");const i=()=>{Be=!1,Ke={x:0,y:0},Ae&&(Ae.style.transform="translate(-50%, -50%)")},l=(c,h)=>{const f=c-Ze.x,v=h-Ze.y,N=Math.hypot(f,v),G=N>0?Math.min(1,Ye/N):0,w=f*G,X=v*G;Ke={x:w/Ye,y:X/Ye},Ae&&(Ae.style.transform=`translate(calc(-50% + ${w}px), calc(-50% + ${X}px))`)};Ce&&(Ce.addEventListener("touchstart",c=>{const h=c.touches[0],f=Ce.getBoundingClientRect();Ze={x:f.left+f.width/2,y:f.top+f.height/2},Be=!0,l(h.clientX,h.clientY),c.preventDefault()},{passive:!1}),Ce.addEventListener("touchmove",c=>{if(!Be)return;const h=c.touches[0];l(h.clientX,h.clientY),c.preventDefault()},{passive:!1}),Ce.addEventListener("touchend",i),Ce.addEventListener("touchcancel",i)),!("ontouchstart"in window)&&n&&(n.style.display="none")}function Hn(){if(Gn(),!z||!P||!S)return;be=!0,z.style.display="flex",B=[],Q=[],re={left:!1,right:!1,up:!1,down:!1},Ne=0,Te=performance.now()+et,Ie=performance.now()+200,Se&&(Se.style.width="0%"),fe&&(fe.textContent=`${Math.ceil(et/1e3)}s`);const t=P.getBoundingClientRect();S.dataset.x=String(t.width*.2),S.dataset.y=String(t.height*.6),S.style.transform=`translate(${S.dataset.x}px, ${S.dataset.y}px)`,ce&&cancelAnimationFrame(ce),ce=requestAnimationFrame(Jt)}function Kn(){be=!1,ce&&cancelAnimationFrame(ce),ce=null,B.forEach(n=>n.el.remove()),B=[],Q.forEach(n=>n.el.remove()),Q=[],z&&(z.style.display="none");const t=ut(Ne);b.textContent=`Bonus complete! ${Ne} desks collected. +${t.tanksEarned} tank(s). Benny Dash fuel: ${t.fuelBank}. Desk charge: ${t.chargeRemainder}/6`,m.textContent="Press Start to play again.",On()}function Un(t){const n=["easy20","easy25","easy30","medium","mathamatical"],i=n.indexOf(t);return i===-1||i===n.length-1?t:n[i+1]}function On(){Ue&&(s&&(s.value=Ue),Ue=null,yt())}function Ot(){if(!Se)return;const t=Ne%6,n=t===0&&Ne>0?100:t/6*100;Se.style.width=`${n}%`}function Jn(t){if(!P)return;const n=document.createElement("div");n.className="decimal-mini-desk",n.innerHTML='<span class="back"></span><span class="seat"></span><span class="leg-left"></span><span class="leg-right"></span><span class="desk"></span><span class="smoke smoke-1"></span><span class="smoke smoke-2"></span>';const i=L(20,Math.max(22,Math.floor(t.width-38))),l=L(20,Math.max(22,Math.floor(t.height-34))),c=(Math.random()<.5?-1:1)*(1.2+Math.random()*1.2),h=(Math.random()<.5?-1:1)*(1.2+Math.random()*1.1);n.dataset.x=String(i),n.dataset.y=String(l),n.dataset.vx=String(c),n.dataset.vy=String(h),n.style.transform=`translate(${i}px, ${l}px)`,P.appendChild(n),B.push({el:n,x:i,y:l,vx:c,vy:h,w:32,h:28})}function Vn(t){if(!P)return;const n=document.createElement("div");n.className="decimal-mini-broken-desk";const i=L(20,Math.max(22,Math.floor(t.width-32))),l=L(20,Math.max(22,Math.floor(t.height-32))),c=(Math.random()<.5?-1:1)*(1.8+Math.random()*1.4),h=(Math.random()<.5?-1:1)*(1.4+Math.random()*1.3);n.dataset.x=String(i),n.dataset.y=String(l),n.dataset.vx=String(c),n.dataset.vy=String(h),n.style.transform=`translate(${i}px, ${l}px)`,P.appendChild(n),Q.push({el:n,x:i,y:l,vx:c,vy:h,w:24,h:24})}function Jt(){if(!be||!P||!S)return;const t=P.getBoundingClientRect(),n=performance.now(),i=Math.max(0,Te-n);if(fe&&(fe.textContent=`${Math.ceil(i/1e3)}s`),i<=0){Kn();return}n>=Ie&&(Ie=n+900,B.length<10&&Jn(t),Q.length<4&&Vn(t));const l=40,c=2;let h=parseFloat(S.dataset.x||"0"),f=parseFloat(S.dataset.y||"0");const v=Be?Ke.x:(re.right?1:0)-(re.left?1:0),N=Be?Ke.y:(re.down?1:0)-(re.up?1:0),G=3.2;h=Pe(h+v*G,0,Math.max(0,t.width-l)),f=Pe(f+N*G,0,Math.max(0,t.height-l)),S.dataset.x=String(h),S.dataset.y=String(f),S.style.transform=`translate(${h}px, ${f}px)`,B.forEach(w=>{w.x+=w.vx,w.y+=w.vy,(w.x<=2||w.x>=t.width-w.w-2)&&(w.vx*=-1),(w.y<=2||w.y>=t.height-w.h-2)&&(w.vy*=-1),w.x=Pe(w.x,2,Math.max(2,t.width-w.w-2)),w.y=Pe(w.y,2,Math.max(2,t.height-w.h-2)),w.el.style.transform=`translate(${w.x}px, ${w.y}px)`}),Q.forEach(w=>{w.x+=w.vx,w.y+=w.vy,(w.x<=2||w.x>=t.width-w.w-2)&&(w.vx*=-1),(w.y<=2||w.y>=t.height-w.h-2)&&(w.vy*=-1),w.x=Pe(w.x,2,Math.max(2,t.width-w.w-2)),w.y=Pe(w.y,2,Math.max(2,t.height-w.h-2)),w.el.style.transform=`translate(${w.x}px, ${w.y}px)`}),B=B.filter(w=>h+l-c>w.x&&h+c<w.x+w.w&&f+l-c>w.y&&f+c<w.y+w.h?(w.el.remove(),Ne+=1,Ot(),!1):!0),Q=Q.filter(w=>h+l-c>w.x&&h+c<w.x+w.w&&f+l-c>w.y&&f+c<w.y+w.h?(w.el.remove(),Ne=Math.max(0,Ne-2),Ot(),S.classList.add("hit"),setTimeout(()=>S.classList.remove("hit"),160),!1):!0),ce=requestAnimationFrame(Jt)}window.__DecimalCleanup=()=>{window.removeEventListener("keydown",Gt),window.removeEventListener("keyup",Ht),Pt(),ae&&ae.removeEventListener("click",Mt),y&&$e&&y.removeEventListener("keydown",$e),C==null||C.removeEventListener("click",Le),s==null||s.removeEventListener("change",Re),o==null||o.removeEventListener("click",We),u==null||u.removeEventListener("click",Fe),_==null||_.removeEventListener("input",ve),M==null||M.removeEventListener("input",ve),$==null||$.removeEventListener("input",ve);try{Ct()}catch{}}}function Ta(){return wt({toggleId:"decimalMusicToggle",popupId:"decimalNowPlaying",statusId:"prompt",playOnIds:["start"],togglePauseIds:["pause"]}),E.useEffect(()=>{const s=localStorage.getItem("highContrast")==="true";document.body.classList.toggle("high-contrast",s)},[]),E.useEffect(()=>(_a(),()=>{window.__DecimalCleanup&&window.__DecimalCleanup()}),[]),e.jsxs("main",{className:"app-page decimal-page",children:[e.jsxs("header",{className:"app-header",children:[e.jsx(U,{to:"/list",className:"back-link",id:"backBtn",children:"Back"}),e.jsx("h1",{children:"Deci-What?"}),e.jsxs("div",{className:"game-controls",children:[e.jsx("label",{htmlFor:"level",children:"Level"}),e.jsxs("select",{id:"level",className:"select",defaultValue:"easy20",children:[e.jsx("option",{value:"easy20",children:"Easy .20 — words to number"}),e.jsx("option",{value:"easy25",children:"Easy .25 — words to number"}),e.jsx("option",{value:"easy30",children:"Easy .30 — words to number"}),e.jsx("option",{value:"medium",children:"Medium — add/subtract decimals"}),e.jsx("option",{value:"mathamatical",children:"Mathanomical — all ops"})]}),e.jsx("button",{id:"start",className:"btn btn--primary",onClick:()=>{var s,o;return(o=(s=window.DecimalTetris)==null?void 0:s.startGame)==null?void 0:o.call(s)},children:"Start"}),e.jsx("button",{id:"pause",className:"btn btn--secondary",disabled:!0,onClick:()=>{var s,o;return(o=(s=window.DecimalTetris)==null?void 0:s.togglePause)==null?void 0:o.call(s)},children:"Pause"}),e.jsxs("label",{htmlFor:"decimalMusicToggle",className:"game-music-toggle",children:[e.jsx("input",{id:"decimalMusicToggle",type:"checkbox"}),"Music"]})]})]}),e.jsxs("section",{className:"game-stats",children:[e.jsxs("div",{className:"stat-badge stat-badge--score",children:["Score: ",e.jsx("span",{id:"score",children:"0"})]}),e.jsxs("div",{className:"stat-badge stat-badge--timer",children:["Time: ",e.jsx("span",{id:"timer",children:"0.0"}),"s"]}),e.jsxs("div",{className:"stat-badge",children:["Streak: x",e.jsx("span",{id:"streak",children:"0"})]})]}),e.jsxs("section",{className:"game-body",children:[e.jsxs("section",{className:"game-panel",children:[e.jsxs("div",{className:"prompt-row",children:[e.jsx("div",{className:"prompt",id:"prompt",children:"Press Start to begin."}),e.jsx("div",{className:"typed",children:e.jsx("input",{id:"answerInput",placeholder:"Type answer",className:"input"})})]}),e.jsx("div",{className:"hint",id:"hint"}),e.jsx("div",{className:"feedback",id:"feedback",style:{marginTop:"12px"}}),e.jsx("div",{className:"legend",style:{marginTop:"12px"},children:"Click a full row to solve. Type the numeric value of the word + decimal shown."})]}),e.jsx("div",{className:"game-board",children:e.jsx("div",{id:"canvasAnchor",className:"canvas-anchor"})})]}),e.jsxs("section",{className:"settings-row",style:{marginTop:"16px"},children:[e.jsxs("div",{className:"grid-controls",children:[e.jsxs("label",{children:["Columns",e.jsx("input",{id:"colsInput",type:"number",min:"8",max:"24",step:"1",defaultValue:"15",className:"input",style:{width:"64px",marginLeft:"8px"}})]}),e.jsxs("label",{children:["Rows",e.jsx("input",{id:"rowsInput",type:"number",min:"10",max:"30",step:"1",defaultValue:"15",className:"input",style:{width:"64px",marginLeft:"8px"}})]}),e.jsxs("label",{children:["Cell size",e.jsx("input",{id:"cellSizeInput",type:"range",min:"20",max:"48",step:"1",defaultValue:"28",style:{marginLeft:"8px",verticalAlign:"middle"}})]}),e.jsx("button",{id:"applyGridBtn",className:"btn btn--secondary",children:"Apply Grid"}),e.jsxs("div",{className:"grid-info",style:{marginLeft:"8px"},children:["Grid: ",e.jsx("span",{id:"gridPreview",children:"15×18 @28px"})]})]}),e.jsxs("div",{className:"palette-controls",children:[e.jsx("div",{className:"palette-title",children:"Block color (choose one of 50 acrylics)"}),e.jsx("div",{id:"palette",className:"palette",role:"list"}),e.jsxs("div",{className:"selected-color",children:["Selected:",e.jsx("span",{id:"selectedColorPreview",className:"color-swatch"})]})]})]}),e.jsx("footer",{style:{marginTop:"16px"},children:e.jsx("small",{children:"Designed for learning decimal reading and operations. Block color is selectable."})}),e.jsx("div",{id:"decimalNowPlaying",className:"game-music-popup","aria-live":"polite"})]})}function $a(){const[s,o]=E.useState(null),[u,m]=E.useState(!1);return E.useEffect(()=>{let a=!0;return(async()=>{try{window.__HowToPlayInit||await new Promise(p=>setTimeout(p,200))}catch(p){a&&o(`Failed to load HowToPlay: ${p.message}`);return}a&&(m(!0),console.log("[HowToPlay] Page initialized"))})(),()=>{a=!1}},[]),E.useEffect(()=>{let a=null,d=!1;const p=()=>{const g=document.querySelector(".exit-door"),y=document.querySelector(".howto-benny .head");if(!g||!y)return;const b=g.getBoundingClientRect(),M=y.getBoundingClientRect();if(!d&&M.right>=b.left-4&&M.left<b.right&&(g.classList.add("is-open"),d=!0),d&&M.left>b.right+4){g.classList.add("is-close");return}a=requestAnimationFrame(p)};return a=requestAnimationFrame(p),()=>{a&&cancelAnimationFrame(a),window.__HowToPlayCleanup&&(console.log("[HowToPlay] Running cleanup"),window.__HowToPlayCleanup())}},[]),s?e.jsx("div",{className:"background error-page",children:e.jsx("header",{className:"howto-header",children:e.jsxs("div",{className:"error-message",children:[e.jsx("p",{children:s}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Reload"})]})})}):e.jsxs("div",{className:"background howto-page",children:[e.jsx("header",{className:"howto-header",children:e.jsxs("div",{className:"hero-card small",children:[e.jsx("h1",{children:"Few Rules from the dev"}),e.jsx("p",{className:"tagline",children:"Play fair, avoid calculators, and have fun learning. This world is about steady progress, not rushing the answer."})]})}),e.jsxs("main",{className:"campfire-scene","aria-label":"Campfire scene",children:[e.jsxs("section",{className:"campfire-stage","aria-label":"Campfire characters",children:[e.jsxs("div",{className:"exit-door","aria-hidden":"true",children:[e.jsx("div",{className:"door-frame"}),e.jsx("div",{className:"door-panel"}),e.jsx("div",{className:"door-knob"}),e.jsxs("div",{className:"door-blackhole","aria-hidden":"true",children:[e.jsx("div",{className:"blackhole-core"}),e.jsx("div",{className:"blackhole-ring"}),e.jsx("div",{className:"blackhole-ring"}),e.jsx("div",{className:"blackhole-ring"}),e.jsx("div",{className:"blackhole-particles"})]})]}),e.jsxs("div",{className:"booiiii-duo","aria-label":"Mr. Boooiiii walking Benny",children:[e.jsx("div",{className:"leash","aria-hidden":"true"}),e.jsxs("div",{className:"booiiii","aria-label":"Mr. Boooiiii",children:[e.jsxs("div",{className:"hat",children:[e.jsx("div",{className:"hat-brim"}),e.jsx("span",{className:"dot"}),e.jsx("div",{className:"hat-top"})]}),e.jsxs("div",{className:"head",children:[e.jsx("span",{className:"eye"}),e.jsx("span",{className:"eye"}),e.jsx("span",{className:"mouth"})]}),e.jsxs("div",{className:"collar",children:[e.jsx("span",{className:"collar-left"}),e.jsx("span",{className:"collar-right"})]}),e.jsxs("div",{className:"torso",children:[e.jsx("span",{className:"torso-left"}),e.jsx("span",{className:"torso-right"})]}),e.jsxs("div",{className:"arms",children:[e.jsx("span",{className:"arm left"}),e.jsx("span",{className:"arm right"}),e.jsx("span",{className:"hand left"}),e.jsx("span",{className:"hand right"})]}),e.jsxs("div",{className:"lap-top",children:[e.jsx("span",{className:"laptop-back"}),e.jsx("span",{className:"laptop-seat"})]}),e.jsxs("div",{className:"legs",children:[e.jsx("span",{className:"leg left"}),e.jsx("span",{className:"leg right"}),e.jsx("span",{className:"foot left"}),e.jsx("span",{className:"foot right"})]})]}),e.jsx("div",{className:"howto-benny","aria-label":"Benny",children:e.jsx("div",{className:"benny-base",children:e.jsxs("div",{className:"benny-shape",children:[e.jsx("div",{className:"back"}),e.jsx("div",{className:"leg-left"}),e.jsx("div",{className:"leg-right"}),e.jsx("div",{className:"head"})]})})})]})]}),e.jsxs("section",{className:"instructions","aria-label":"Quick tips",children:[e.jsx("h2",{children:"Quick Tips"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Math Pup: Answer math Problems to unlock fun mini game and other unlockable features"}),e.jsx("li",{children:"Capture: solve the fraction prompt and pop the right bubble. Pop enough bubbles and unlock a fun mini game."}),e.jsx("li",{children:"Deci-What?: Identify spelled out numbers with decimals. type in numeric value. Complete puzzle to unlock fun mini game "}),e.jsx("li",{children:"Ma+h 5yn+h3: Solve algebra problems to unlock mini game."}),e.jsx("li",{children:"Benny Dash: Make progress in games listed above to unlock fun platformer game. "})]}),e.jsx(U,{id:"backLink",to:"/",className:"back-link",children:"Back Home"})]})]}),e.jsx("div",{id:"nightOverlay"})]})}function Ia(){return e.jsxs("main",{className:"about-page",children:[e.jsx(U,{to:"/",className:"back-link",children:"Back"}),e.jsxs("header",{className:"about-hero",children:[e.jsx("h1",{children:"About"}),e.jsxs("p",{className:"about-subtitle",children:["Bark Bark",e.jsx("br",{})," Welcome to a platform for anyone. ",e.jsx("br",{}),"No matter where your from you can practice math and maybe have some fun ",e.jsx("br",{}),"Play with numbers and words that confuse the soul, ",e.jsx("br",{}),"fractions and decimals even santa doesn't know ",e.jsx("br",{}),"can you take your self serious and reach the goal? become a math wiz and maybe just maybe Mathanomical!"]})]}),e.jsxs("section",{className:"about-section",children:[e.jsx("h2",{children:"Mission"}),e.jsxs("p",{children:["Get better at basic and somewhat complex math. ",e.jsx("br",{}),"We want to make math fun and accessible for everyone, especially those who may have struggled with it in traditional settings. ",e.jsx("br",{}),"Our games are designed to be engaging and rewarding, helping you build confidence and skills in a playful way."]})]})]})}const Aa="/Math-isn-t-Lame/";function Ba(){const{loadScript:s}=bt(`${Aa}js/mathsynth.js`,"mathsynth"),[o,u]=E.useState(null),[m,a]=E.useState(!1);return wt({toggleId:"mathSynthMusicToggle",popupId:"mathSynthNowPlaying",statusId:"mathSynthFeedback",playOnIds:["startMathSynth"],pauseOnIds:["resetMathSynth"]}),E.useEffect(()=>{let d=!0;return(async()=>{if(!window.MathSynth)try{await s(),await new Promise(g=>setTimeout(g,100))}catch(g){d&&u(`Failed to load MathSynth: ${g.message}`);return}d&&(a(!0),console.log("[MathSynth] Game initialized"))})(),()=>{d=!1}},[s]),E.useEffect(()=>()=>{window.__MathSynthCleanup&&(console.log("[MathSynth] Running cleanup"),window.__MathSynthCleanup())},[]),o?e.jsxs("main",{className:"game-shell app mathsynth game-page--mathsynth error-page",children:[e.jsxs("header",{className:"game-shell__header",children:[e.jsx(U,{to:"/list",className:"back-link",id:"backBtn",children:"Back"}),e.jsx("h1",{children:"Ma+h 5Yn+h3"})]}),e.jsxs("div",{className:"error-message",children:[e.jsx("p",{children:o}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Reload"})]})]}):e.jsxs("main",{className:"game-shell app mathsynth game-page--mathsynth",children:[e.jsxs("header",{className:"game-shell__header",children:[e.jsx(U,{to:"/list",className:"back-link",id:"backBtn",children:"Back"}),e.jsx("h1",{children:"Ma+h 5Yn+h3"}),e.jsxs("div",{className:"game-shell__controls controls",children:[e.jsx("label",{htmlFor:"mathSynthLevel",className:"sr-only",children:"Level"}),e.jsxs("select",{id:"mathSynthLevel",defaultValue:"easy",children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"mathanomical",children:"Mathanomical"})]}),e.jsx("button",{id:"startMathSynth",onClick:()=>{var d,p;return(p=(d=window.MathSynth)==null?void 0:d.start)==null?void 0:p.call(d)},children:"Start"}),e.jsx("button",{id:"resetMathSynth",type:"button",onClick:()=>{var d,p;return(p=(d=window.MathSynth)==null?void 0:d.reset)==null?void 0:p.call(d)},children:"Reset"}),e.jsxs("label",{htmlFor:"mathSynthMusicToggle",className:"game-music-toggle",children:[e.jsx("input",{id:"mathSynthMusicToggle",type:"checkbox"}),"Music"]}),e.jsxs("div",{className:"mathsynth-grid-note",children:["Grid: ",e.jsx("span",{id:"mathSynthPreview"}),"   Easy: 7x6, Medium: 8x6, Mathanomical: 10x6"]})]})]}),e.jsx("div",{className:"mathsynth-board-name",children:"MathSynth (algebra stuff)"}),e.jsxs("section",{className:"status-row",children:[e.jsxs("div",{className:"score",children:["Score: ",e.jsx("span",{id:"mathSynthScore",children:"0"})]}),e.jsxs("div",{className:"timer",children:["Time left: ",e.jsx("span",{id:"mathSynthTimer",children:"0"}),"s"]}),e.jsxs("div",{className:"streak",children:["Best: ",e.jsx("span",{id:"mathSynthBest",children:"--"})]}),e.jsx("div",{className:"press-start",children:"Press Start"}),e.jsxs("div",{className:"palette-controls",children:[e.jsx("div",{className:"palette-title",children:"Board colors"}),e.jsx("div",{id:"mathSynthPalette",className:"palette",role:"list"}),e.jsxs("div",{className:"selected-color",children:["Selected:",e.jsx("span",{id:"mathSynthColorPreview",className:"color-swatch"})]}),e.jsxs("div",{className:"grid-info",children:["Colors unlocked: ",e.jsx("span",{id:"mathSynthColorInfo",children:"0"}),"/50"]}),e.jsx("div",{className:"palette-instructions",children:"Solve for x. Correct locks the cell (-1). Best = lowest score + time left. Watch the Others."})]})]}),e.jsxs("section",{className:"problem-area game-shell__body",children:[e.jsxs("div",{className:"side-panel game-shell__panel",children:[e.jsx("div",{className:"prompt",id:"mathSynthPrompt"}),e.jsx("div",{className:"hint",id:"mathSynthFeedback"}),e.jsxs("div",{className:"answer-section",id:"mathSynthAnswerSection",style:{display:"none"},children:[e.jsxs("div",{className:"selected-problem",id:"mathSynthSelectedProblem",children:[e.jsx("span",{className:"problem-label",children:"Problem:"}),e.jsx("span",{className:"problem-value",id:"mathSynthProblemValue"})]}),e.jsxs("div",{className:"answer-input-group",children:[e.jsx("input",{type:"text",id:"mathSynthAnswer",className:"answer-input",placeholder:"x = ?",enterKeyHint:"enter",autoComplete:"off"}),e.jsx("button",{type:"button",id:"mathSynthSubmit",className:"answer-submit",children:"Answer"})]})]})]}),e.jsxs("div",{className:"board-panel game-shell__board",children:[e.jsx("div",{id:"mathSynthOthers",className:"mathsynth-others","aria-live":"polite"}),e.jsx("div",{id:"mathSynthBoard",className:"mathsynth-board"})]})]}),e.jsx("div",{id:"mathSynthNowPlaying",className:"game-music-popup","aria-live":"polite"})]})}const He=[{id:"solid-01",name:"Sky",type:"solid",primary:"#7dd3fc"},{id:"tone-01",name:"Mint/Lime",type:"tone",primary:"#6ee7b7",secondary:"#a3e635"},{id:"solid-02",name:"Lavender",type:"solid",primary:"#c4b5fd"},{id:"tone-02",name:"Ocean/Blue",type:"tone",primary:"#38bdf8",secondary:"#2563eb"},{id:"solid-03",name:"Sunshine",type:"solid",primary:"#fde047"},{id:"tone-03",name:"Blush/Coral",type:"tone",primary:"#f9a8d4",secondary:"#fb7185"},{id:"solid-04",name:"Mint",type:"solid",primary:"#5eead4"},{id:"tone-04",name:"Berry/Plum",type:"tone",primary:"#f472b6",secondary:"#a855f7"},{id:"solid-05",name:"Lime",type:"solid",primary:"#a3e635"},{id:"tone-05",name:"Teal/Blue",type:"tone",primary:"#22d3ee",secondary:"#0ea5e9"},{id:"solid-06",name:"Rose",type:"solid",primary:"#fb7185"},{id:"tone-06",name:"Berry/Sun",type:"tone",primary:"#f472b6",secondary:"#facc15"},{id:"solid-07",name:"Blue",type:"solid",primary:"#60a5fa"},{id:"tone-07",name:"Grape/Indigo",type:"tone",primary:"#818cf8",secondary:"#4f46e5"},{id:"solid-08",name:"Spring",type:"solid",primary:"#86efac"},{id:"tone-08",name:"Ice/Lavender",type:"tone",primary:"#a5b4fc",secondary:"#e0f2fe"},{id:"solid-09",name:"Bubblegum",type:"solid",primary:"#f9a8d4"},{id:"tone-09",name:"Lemon/Lime",type:"tone",primary:"#fde047",secondary:"#bef264"},{id:"solid-10",name:"Soft Gray",type:"solid",primary:"#cbd5f5"},{id:"tone-10",name:"Cloud/Blue",type:"tone",primary:"#e2e8f0",secondary:"#93c5fd"},{id:"solid-11",name:"Minty Blue",type:"solid",primary:"#7dd3fc"},{id:"tone-11",name:"Aqua/Mint",type:"tone",primary:"#2dd4bf",secondary:"#99f6e4"},{id:"solid-12",name:"Grape",type:"solid",primary:"#c084fc"},{id:"tone-12",name:"Lilac/Rose",type:"tone",primary:"#d8b4fe",secondary:"#fda4af"},{id:"solid-13",name:"Coral",type:"solid",primary:"#fb7185"},{id:"tone-13",name:"Kiwi/Green",type:"tone",primary:"#bef264",secondary:"#4ade80"},{id:"solid-14",name:"Ice Blue",type:"solid",primary:"#bae6fd"},{id:"tone-14",name:"Sky/Indigo",type:"tone",primary:"#60a5fa",secondary:"#6366f1"},{id:"solid-15",name:"Periwinkle",type:"solid",primary:"#a5b4fc"},{id:"tone-15",name:"Mint/Teal",type:"tone",primary:"#5eead4",secondary:"#14b8a6"},{id:"solid-16",name:"Sunbeam",type:"solid",primary:"#fde68a"},{id:"tone-16",name:"Pink/Coral",type:"tone",primary:"#fda4af",secondary:"#fb7185"},{id:"solid-17",name:"Cool Blue",type:"solid",primary:"#93c5fd"},{id:"tone-17",name:"Lime/Teal",type:"tone",primary:"#a3e635",secondary:"#2dd4bf"},{id:"solid-18",name:"Soft Plum",type:"solid",primary:"#d8b4fe"},{id:"tone-18",name:"Sky/Mint",type:"tone",primary:"#7dd3fc",secondary:"#6ee7b7"},{id:"solid-19",name:"Seafoam",type:"solid",primary:"#99f6e4"},{id:"tone-19",name:"Berry/Sky",type:"tone",primary:"#f472b6",secondary:"#60a5fa"},{id:"solid-20",name:"Sunny",type:"solid",primary:"#facc15"},{id:"tone-20",name:"Cool Mint",type:"tone",primary:"#5eead4",secondary:"#38bdf8"},{id:"solid-21",name:"Twilight",type:"solid",primary:"#a78bfa"},{id:"tone-21",name:"Blue/Teal",type:"tone",primary:"#3b82f6",secondary:"#14b8a6"},{id:"solid-22",name:"Spring Leaf",type:"solid",primary:"#4ade80"},{id:"tone-22",name:"Lilac/Ice",type:"tone",primary:"#c4b5fd",secondary:"#bae6fd"},{id:"solid-23",name:"Blush",type:"solid",primary:"#fda4af"},{id:"tone-23",name:"Mint/Sky",type:"tone",primary:"#5eead4",secondary:"#38bdf8"},{id:"solid-24",name:"Cool Mint",type:"solid",primary:"#2dd4bf"},{id:"tone-24",name:"Sun/Lav",type:"tone",primary:"#fde047",secondary:"#c4b5fd"},{id:"solid-25",name:"Powder",type:"solid",primary:"#e2e8f0"},{id:"tone-25",name:"Rose/Mint",type:"tone",primary:"#fb7185",secondary:"#6ee7b7"}],La=["Medium","Medium26","Medium60","Medium100"],xt=[{id:1,name:"Starter Pup",power:"Subtraction eyes",points:0,streak:0},{id:2,name:"Greater Signs",power:"Greater-than blast",points:3e3,streak:0,requires:["Easy25"]},{id:3,name:"Arrow Blaster",power:"Arrow keys + space",points:6e3,streak:5,requires:La},{id:4,name:"Playful Benny",power:"Benny jumps on target",points:12e3,streak:6},{id:5,name:"Your a Wizard, Benny",power:"Pi wand blast",points:24e3,streak:8},{id:6,name:"Nuclear Gauge",power:"Gamma / neutron beam",points:36e3,streak:10},{id:7,name:"Nurse Benny",power:"Crash cart charge",points:48e3,streak:12},{id:8,name:"Dogko RKO",power:"Dogko finisher",points:6e4,streak:14},{id:9,name:"Mythic Pup",power:"Mythic finisher",points:8e4,streak:16},{id:10,name:"Mathtality",power:"All zombies cleared",points:1e5,streak:18}];function Ra(){return lt.reduce((s,o)=>(s[o.id]=!1,s),{})}function Wa(s){const o=Ra();if(!s)return o;const u=localStorage.getItem(`mathpop_jukebox_${s}`);if(!u)return o;try{const m=JSON.parse(u);return lt.reduce((a,d)=>(a[d.id]=!!(m!=null&&m[d.id]),a),{})}catch{return o}}function en(s){if(!s)return null;const o=localStorage.getItem(`mathpop_profile_stats_${s}`);if(!o)return{totalPoints:0,totalCorrect:0,totalAttempted:0,pupStreakRecord:0,levelsCompleted:[],tierUnlocks:[],activeTier:1,games:{}};try{const u=JSON.parse(o);return{totalPoints:Number(u.totalPoints)||0,totalCorrect:Number(u.totalCorrect)||0,totalAttempted:Number(u.totalAttempted)||0,pupStreakRecord:Number(u.pupStreakRecord)||0,levelsCompleted:Array.isArray(u.levelsCompleted)?u.levelsCompleted:[],tierUnlocks:Array.isArray(u.tierUnlocks)?u.tierUnlocks:[],activeTier:Number(u.activeTier)||1,games:u.games&&typeof u.games=="object"?u.games:{}}}catch{return{totalPoints:0,totalCorrect:0,totalAttempted:0,pupStreakRecord:0,levelsCompleted:[],tierUnlocks:[],activeTier:1,games:{}}}}function Fa(s){if(!s)return 0;const o=`mathpop_highscore_${s}_`;let u=0;return Object.keys(localStorage).forEach(m=>{if(!m.startsWith(o))return;const a=parseInt(localStorage.getItem(m)||"0",10);a>u&&(u=a)}),u}function Et(s){return s.type==="tone"?`linear-gradient(135deg, ${s.primary} 0%, ${s.primary} 50%, ${s.secondary} 50%, ${s.secondary} 100%)`:s.primary}function Da(){var pe,ue,Me,be,z,P,S,B,Q,Se,fe,ce,re,Te,Ne,Ie,et,Ce,Ae,Be,Ke,Ze,Ye,$e,Le,Re,We,ve,Fe,Ue,Xe,tt,nt,at,ct,dt,ut,Oe,Je;const[s,o]=E.useState(0),[u,m]=E.useState("easy"),a=E.useMemo(()=>localStorage.getItem("mathpop_current_user"),[]),[d,p]=E.useState(()=>Wa(a)),g=E.useMemo(()=>{if(!a)return null;const r=localStorage.getItem(`mathpop_profile_${a}`);return r?JSON.parse(r):null},[a,s]),y=E.useMemo(()=>en(a),[a,s]);if(!a||!g||!y)return e.jsxs("main",{className:"profile-page",children:[e.jsxs("header",{className:"profile-header",children:[e.jsx("h1",{children:"Profile"}),e.jsx("p",{className:"profile-subtitle",children:"Sign in to view your progress."})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("p",{children:"No profile found. Head back to the home page to sign in."}),e.jsx(U,{to:"/",className:"profile-link",children:"Back to Home"})]})]});const b=y.totalAttempted||0,M=y.totalCorrect||0,$=b?Math.round(M/b*100):0,_=y.totalPoints||0,C=Math.max(0,_),D=y.levelsCompleted||[],I=y.pupStreakRecord||0,H=Array.isArray(y.tierUnlocks)?y.tierUnlocks:[],k=Number(y.activeTier)||1,A=Fa(a),j=(()=>{const r=localStorage.getItem("mathsynth-best");if(!r)return null;try{return JSON.parse(r)}catch{return null}})(),we=((ue=(pe=y.games)==null?void 0:pe.mathpup)==null?void 0:ue.points)||0,je=Math.min(Math.floor(we/2500),He.length),ge=localStorage.getItem(`mathpup_benny_color_${a}`)||He[0].id,q=He.find(r=>r.id===ge)||He[0],F=r=>!r.requires||r.requires.length===0?!0:r.requires.every(T=>D.includes(T)),V=r=>r.id===1?!0:H.includes(r.id),ae=[...xt].reverse().find(V)||xt[0],W=r=>r.id===3?e.jsxs("p",{className:"tier-power tier-power-arrow",children:[e.jsx("span",{className:"tier-power-label",children:r.power}),e.jsx("span",{className:"arrow-glyph","aria-label":"Arrow blaster",children:"=:~>"})]}):e.jsx("p",{className:"tier-power",children:r.power}),J=r=>!(V(r)||!F(r)||C<r.points),K=r=>V(r),he=r=>{var De;if(!a||!y||!J(r))return;const T=(De=window.math)==null?void 0:De.evaluate,Y=T?Number(T(`${_}-${r.points}`)):_-r.points,xe={...y,totalPoints:Math.max(0,Y),tierUnlocks:[...H,r.id]},ze="Congragulations Mr or Ms. Big Spendah";typeof window<"u"&&typeof window.showUnifyMessage=="function"?window.showUnifyMessage({text:ze,topic:"tiers"}):window.alert(ze),typeof window<"u"&&typeof window.showUnifyConfirm=="function"?window.showUnifyConfirm({text:`Use ${r.name} power now?`,topic:"tiers",yesLabel:"Use it",noLabel:"Later",onYes:()=>{const L={...en(a),activeTier:r.id};localStorage.setItem(`mathpop_profile_stats_${a}`,JSON.stringify(L)),o(Pe=>Pe+1)}}):window.confirm(`Use ${r.name} power now?`)&&(xe.activeTier=r.id),localStorage.setItem(`mathpop_profile_stats_${a}`,JSON.stringify(xe)),o(st=>st+1)},oe=r=>{if(!a||!y||!K(r))return;const T={...y,activeTier:r.id};localStorage.setItem(`mathpop_profile_stats_${a}`,JSON.stringify(T)),o(Y=>Y+1)},ee=[{id:"mathpup",title:"Math Pup",stats:{points:((be=(Me=y.games)==null?void 0:Me.mathpup)==null?void 0:be.points)||0,correct:((P=(z=y.games)==null?void 0:z.mathpup)==null?void 0:P.correct)||0,attempted:((B=(S=y.games)==null?void 0:S.mathpup)==null?void 0:B.attempted)||0,bestScore:A,streakRecord:((Se=(Q=y.games)==null?void 0:Q.mathpup)==null?void 0:Se.streakRecord)||0,levels:((re=(ce=(fe=y.games)==null?void 0:fe.mathpup)==null?void 0:ce.levelsCompleted)==null?void 0:re.length)||0}},{id:"capture",title:"Capture The Fraction",stats:{points:((Ne=(Te=y.games)==null?void 0:Te.capture)==null?void 0:Ne.points)||0,correct:((et=(Ie=y.games)==null?void 0:Ie.capture)==null?void 0:et.correct)||0,attempted:((Ae=(Ce=y.games)==null?void 0:Ce.capture)==null?void 0:Ae.attempted)||0,bestScore:((Ke=(Be=y.games)==null?void 0:Be.capture)==null?void 0:Ke.bestScore)||0,streakRecord:((Ye=(Ze=y.games)==null?void 0:Ze.capture)==null?void 0:Ye.streakRecord)||0}},{id:"decimal",title:"Deci-What?",stats:{points:((Le=($e=y.games)==null?void 0:$e.decimal)==null?void 0:Le.points)||0,correct:((We=(Re=y.games)==null?void 0:Re.decimal)==null?void 0:We.correct)||0,attempted:((Fe=(ve=y.games)==null?void 0:ve.decimal)==null?void 0:Fe.attempted)||0,bestScore:((Xe=(Ue=y.games)==null?void 0:Ue.decimal)==null?void 0:Xe.bestScore)||0,streakRecord:((nt=(tt=y.games)==null?void 0:tt.decimal)==null?void 0:nt.streakRecord)||0}},{id:"mathsynth",title:"Ma+h5Yn+h3",stats:{points:((ct=(at=y.games)==null?void 0:at.mathsynth)==null?void 0:ct.points)||0,correct:((ut=(dt=y.games)==null?void 0:dt.mathsynth)==null?void 0:ut.correct)||0,attempted:((Je=(Oe=y.games)==null?void 0:Oe.mathsynth)==null?void 0:Je.attempted)||0,bestScore:j?j.score:"--",timeLeft:j?j.timeLeft:"--"}}],R=E.useMemo(()=>{const r={};return ee.forEach(T=>{r[T.id]=T}),r},[ee]),le=ee.map(r=>({id:r.id,title:r.title})),[x,Z]=E.useState({points:"mathpup",correct:"mathpup",attempted:"mathpup",accuracy:"mathpup",levels:"mathpup",streak:"mathpup",colors:"mathpup",tiers:"mathpup"}),O=(r,T)=>{Z(Y=>({...Y,[r]:T}))},se=r=>{var T;return((T=R[r])==null?void 0:T.stats)||{}},me=r=>{const T=r.attempted||0,Y=r.correct||0;return T?Math.round(Y/T*100):0},ie=r=>{a&&p(T=>{const Y={...T,[r]:!T[r]};return localStorage.setItem(`mathpop_jukebox_${a}`,JSON.stringify(Y)),Y})},te=()=>{if(!a)return;const r=["easy","medium","mathanomical"].includes(u)?u:"easy",T=`mathpop_benny_dash_progress_${a}_${r}`;localStorage.removeItem(T),r==="easy"&&localStorage.removeItem(`mathpop_benny_dash_progress_${a}`),typeof window<"u"&&typeof window.showUnifyMessage=="function"?window.showUnifyMessage({text:`Deleted Benny Dash ${r} progress.`,topic:"profile"}):window.alert(`Deleted Benny Dash ${r} progress.`),o(Y=>Y+1)},ne=()=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"profile-subtitle",children:"Tap a song to switch it On or Off."}),e.jsx("div",{className:"jukebox-list",children:lt.map(r=>{const T=!!d[r.id];return e.jsxs("button",{type:"button",className:`jukebox-song${T?" on":""}`,onClick:()=>ie(r.id),"aria-pressed":T,title:`${r.label} (${r.originalFilename})`,children:[e.jsx("span",{children:r.label}),e.jsx("span",{className:"jukebox-status",children:T?"On":"Off"})]},r.id)})}),e.jsxs("p",{className:"jukebox-filename",children:["Files: ",e.jsx("code",{children:"/public/audio/jukebox/*.mp3"})]})]});return e.jsxs("main",{className:"profile-page",children:[e.jsxs("header",{className:"profile-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:g.username}),e.jsx("p",{className:"profile-subtitle",children:"Profile dashboard"})]}),e.jsxs("div",{className:"profile-actions",children:[e.jsx(U,{to:"/",className:"profile-link",children:"Home"}),e.jsx(U,{to:"/list",className:"profile-link",children:"Games"})]})]}),e.jsxs("section",{className:"profile-mobile-grid","aria-label":"Mobile game stats",children:[e.jsxs("div",{className:"profile-box benny-colors-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Total Points"}),e.jsx("select",{value:x.points,onChange:r=>O("points",r.target.value),children:le.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))})]}),e.jsx("p",{className:"metric",children:se(x.points).points||0})]}),e.jsxs("div",{className:"profile-box benny-powers-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Total Correct"}),e.jsx("select",{value:x.correct,onChange:r=>O("correct",r.target.value),children:le.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))})]}),e.jsx("p",{className:"metric",children:se(x.correct).correct||0})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Total Attempted"}),e.jsx("select",{value:x.attempted,onChange:r=>O("attempted",r.target.value),children:le.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))})]}),e.jsx("p",{className:"metric",children:se(x.attempted).attempted||0})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Accuracy"}),e.jsx("select",{value:x.accuracy,onChange:r=>O("accuracy",r.target.value),children:le.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))})]}),e.jsxs("p",{className:"metric",children:[me(se(x.accuracy)),"%"]})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Levels Completed"}),e.jsx("select",{value:x.levels,onChange:r=>O("levels",r.target.value),children:le.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))})]}),e.jsx("p",{className:"metric",children:se(x.levels).levels||0})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Pup Streak Record"}),e.jsx("select",{value:x.streak,onChange:r=>O("streak",r.target.value),children:le.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))})]}),e.jsx("p",{className:"metric",children:se(x.streak).streakRecord||0})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Benny Colors"}),e.jsx("select",{value:x.colors,onChange:r=>O("colors",r.target.value),children:le.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))})]}),x.colors==="mathpup"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"profile-subtitle",children:["Unlocked colors: ",je,"/",He.length]}),e.jsx("div",{className:"benny-colors",children:He.map((r,T)=>{const Y=T<je;return e.jsx("span",{className:`benny-color ${Y?"unlocked":"locked"}`,title:r.name,style:{background:Et(r)}},r.id)})})]}):e.jsx("p",{className:"profile-subtitle",children:"Only Math Pup"})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Benny Powers"}),e.jsx("select",{value:x.tiers,onChange:r=>O("tiers",r.target.value),children:le.map(r=>e.jsx("option",{value:r.id,children:r.title},r.id))})]}),x.tiers==="mathpup"?e.jsx("div",{className:"tier-track",children:xt.map(r=>{const T=V(r),Y=J(r);return e.jsxs("div",{className:`tier-card ${T?"unlocked":"locked"}${k===r.id?" active":""}`,children:[e.jsxs("h3",{children:["Tier ",r.id]}),e.jsx("p",{className:"tier-name",children:r.name}),W(r),!T&&!Y&&e.jsx("p",{className:"tier-locked-badge",children:"Locked"}),!T&&Y&&e.jsx("button",{type:"button",className:"tier-buy",onClick:()=>he(r),children:"Buy"})]},r.id)})}):e.jsx("p",{className:"profile-subtitle",children:"Only Math Pup"})]}),e.jsxs("div",{className:"profile-box jukebox-box",children:[e.jsx("div",{className:"box-header",children:e.jsx("h2",{children:"Benny Jukebox"})}),ne()]}),e.jsxs("div",{className:"profile-box",children:[e.jsx("div",{className:"box-header",children:e.jsx("h2",{children:"Delete Dash Save"})}),e.jsx("p",{className:"profile-subtitle",children:"Choose a difficulty save to delete."}),e.jsxs("select",{value:u,onChange:r=>m(r.target.value),children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"mathanomical",children:"Mathanomical"})]}),e.jsx("button",{type:"button",className:"tier-buy",onClick:te,children:"Delete Benny Saved Progress"})]})]}),e.jsxs("section",{className:"profile-metrics",children:[e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Total Points"}),e.jsx("p",{className:"metric",children:_})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Total Correct"}),e.jsx("p",{className:"metric",children:M})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Total Attempted"}),e.jsx("p",{className:"metric",children:b})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Accuracy"}),e.jsxs("p",{className:"metric",children:[$,"%"]})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Levels Completed"}),e.jsx("p",{className:"metric",children:D.length})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Pup Streak Record"}),e.jsx("p",{className:"metric",children:I})]})]}),e.jsxs("section",{className:"profile-lower",children:[e.jsxs("div",{className:"profile-benny",children:[e.jsxs("div",{className:"profile-card benny-card",children:[e.jsxs("div",{className:"benny-card-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Benny Sum"}),e.jsxs("p",{className:"profile-subtitle",children:["Current tier: ",ae.name]})]}),e.jsx("div",{className:"benny-color-preview",style:{background:Et(q)},"aria-label":"Benny color"})]}),e.jsxs("p",{className:"benny-meta",children:["Unlocked colors: ",je,"/",He.length," (2500 pts each)"]}),e.jsx("div",{className:"benny-colors",children:He.map((r,T)=>{const Y=T<je;return e.jsx("span",{className:`benny-color ${Y?"unlocked":"locked"}`,title:r.name,style:{background:Et(r)}},r.id)})})]}),e.jsxs("div",{className:"profile-card benny-tiers",children:[e.jsx("h2",{children:"Benny Tiers"}),e.jsx("div",{className:"tier-track",children:xt.map(r=>{const T=V(r),Y=F(r);return J(r),e.jsxs("div",{className:`tier-card ${T?"unlocked":"locked"}${k===r.id?" active":""}`,role:"button",tabIndex:T?0:-1,onClick:()=>oe(r),onKeyDown:xe=>{(xe.key==="Enter"||xe.key===" ")&&oe(r)},children:[e.jsxs("h3",{children:["Tier ",r.id]}),e.jsx("p",{className:"tier-name",children:r.name}),W(r),e.jsxs("p",{className:"tier-req",children:["Points: ",r.points]}),r.streak>0&&e.jsxs("p",{className:"tier-req",children:["Pup streak: ",r.streak]}),r.requires&&r.requires.length>0&&e.jsxs("p",{className:"tier-req tier-requires","aria-label":"Level requirements",children:["Requires: ",r.requires.join(", ")]}),!T&&!Y&&r.requires&&e.jsx("p",{className:"tier-locked-reason",children:"Complete required levels first"}),!T&&Y&&e.jsxs("span",{className:"tier-ticket",children:["Ticket price: ",r.points," pts"]}),r.id===8&&T&&e.jsxs("div",{className:"tier-freeze-frame","aria-label":"Benny Dog KO freeze frame",children:[e.jsx("span",{className:"ff-benny"}),e.jsx("span",{className:"ff-zombie"}),e.jsx("span",{className:"ff-impact"})]}),!T&&J(r)&&e.jsxs("button",{type:"button",className:"tier-buy",onClick:()=>he(r),children:["Unlock ",r.name]})]},r.id)})})]}),e.jsxs("div",{className:"profile-card jukebox-card",children:[e.jsx("h2",{children:"Benny Jukebox"}),ne()]}),e.jsxs("div",{className:"profile-card benny-progress-card",children:[e.jsx("h2",{children:"Delete Benny Dash Save"}),e.jsx("p",{className:"profile-subtitle",children:"Choose difficulty progress to remove."}),e.jsxs("select",{value:u,onChange:r=>m(r.target.value),children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"mathanomical",children:"Mathanomical"})]}),e.jsx("button",{type:"button",className:"tier-buy",onClick:te,children:"Delete Benny Saved Progress"})]})]}),e.jsxs("section",{className:"profile-card profile-games",children:[e.jsx("h2",{children:"Game Stats"}),e.jsx("div",{className:"game-card-track",children:ee.map(r=>{const T=r.stats.attempted||0,Y=r.stats.correct||0,xe=T?Math.round(Y/T*100):0;return e.jsxs("div",{className:"profile-card game-card",children:[e.jsx("h3",{children:r.title}),e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Points"}),e.jsx("span",{children:r.stats.points})]}),e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Correct"}),e.jsx("span",{children:Y})]}),e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Attempted"}),e.jsx("span",{children:T})]}),e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Accuracy"}),e.jsxs("span",{children:[xe,"%"]})]}),"levels"in r.stats&&e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Levels Completed"}),e.jsx("span",{children:r.stats.levels})]}),"streakRecord"in r.stats&&e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Streak Record"}),e.jsx("span",{children:r.stats.streakRecord})]}),e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Best"}),e.jsx("span",{children:r.stats.bestScore})]}),"timeLeft"in r.stats&&e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Best Time"}),e.jsxs("span",{children:[r.stats.timeLeft,"s"]})]})]},r.id)})})]})]})]})}const qa="/Math-isn-t-Lame/";function Ga(){return wt({toggleId:"bwMusicToggle",popupId:"bwNowPlaying",statusId:"bwStatus",interactionSelectors:["#bennyWorldArea","#bwJump","#bwGlide","#bwPlane","#bwFire"],startChecked:!0,enableHeadsetControls:!1}),bt("https://cdn.babylonjs.com/babylon.js","babylon"),bt(`${qa}js/bennyworld.js`,"bennyworld"),E.useEffect(()=>()=>{window.__BennyWorldCleanup&&window.__BennyWorldCleanup(),window.__BennyWorldBabylonCleanup&&window.__BennyWorldBabylonCleanup()},[]),e.jsxs("main",{className:"benny-world",id:"bennyWorldRoot",children:[e.jsxs("header",{className:"bw-header",children:[e.jsx(U,{className:"back-link",to:"/list",children:"Back"}),e.jsx("h1",{children:"Benny Dash"}),e.jsx("div",{className:"bw-level",id:"bwLevelLabel",children:"Level 1"})]}),e.jsxs("section",{className:"bw-hud",children:[e.jsx("div",{className:"bw-stat",id:"bwPoints",children:"Points: 0"}),e.jsx("div",{className:"bw-stat",id:"bwDash",children:"Dash: 0m"}),e.jsx("div",{className:"bw-stat",id:"bwStatus",children:"Run to the star!"}),e.jsxs("label",{className:"bw-difficulty",htmlFor:"bwDifficulty",children:["Difficulty",e.jsxs("select",{id:"bwDifficulty",defaultValue:"easy",children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"mathanomical",children:"Mathanomical"})]})]}),e.jsx("button",{id:"bwProgressBtn",type:"button",className:"bw-progress-btn",children:"Save Progress"}),e.jsxs("label",{className:"bw-music-toggle",htmlFor:"bwMusicToggle",children:[e.jsx("input",{id:"bwMusicToggle",type:"checkbox",defaultChecked:!0}),"Music"]})]}),e.jsxs("section",{className:"bw-stage",children:[e.jsx("div",{id:"bennyWorldArea",className:"bw-area","aria-label":"Benny Dash playfield",children:e.jsx("canvas",{id:"bwBabylon",className:"bw-babylon","aria-hidden":"true"})}),e.jsx("div",{id:"bwGameOver",className:"bw-gameover","aria-live":"polite"}),e.jsx("div",{id:"bwMessage",className:"bw-message","aria-live":"polite"})]}),e.jsxs("div",{className:"bw-controls",id:"bwControls",children:[e.jsx("div",{className:"bw-joystick-container",id:"bwJoystickContainer",children:e.jsx("div",{className:"bw-joystick",id:"bwJoystick",children:e.jsx("div",{className:"bw-joystick-knob",id:"bwJoystickKnob"})})}),e.jsxs("div",{className:"bw-actions",children:[e.jsx("button",{className:"bw-move bw-action-btn",id:"bwFire",type:"button","aria-label":"Go Play",children:"Go Play"}),e.jsx("button",{className:"bw-move bw-action-btn",id:"bwJump",type:"button","aria-label":"Jump",children:"Jump"}),e.jsx("button",{className:"bw-move bw-action-btn",id:"bwGlide",type:"button","aria-label":"Glide",children:"Glide"}),e.jsx("button",{className:"bw-move bw-action-btn",id:"bwPlane",type:"button","aria-label":"Desk Plane",children:"Desk Plane"})]})]}),e.jsx("div",{id:"bwNowPlaying",className:"bw-music-popup","aria-live":"polite"})]})}function Ha(){const s=Xn(),o=s.pathname!=="/"&&s.pathname!=="/mathsynth"&&s.pathname!=="/about",u=["/game","/capture","/decimal","/bennyworld"].includes(s.pathname),m=s.pathname==="/list",a=s.pathname==="/howto",d=s.pathname==="/profile",p=m||u||a||d,[g,y]=E.useState({open:!1,text:"",topic:""}),[b,M]=E.useState({open:!1,text:"",topic:"",yesLabel:"Yes",noLabel:"No"}),$=E.useRef(null),_=E.useRef(null),C=E.useRef(null);return E.useEffect(()=>(window.showUnifyMessage=D=>{const I=typeof D=="string"?{text:D}:D||{},H=I.text||"Congragulations Mr or Ms. Big Spendah",k=I.topic||"";y({open:!0,text:H,topic:k}),$.current&&clearTimeout($.current),$.current=setTimeout(()=>{y(A=>({...A,open:!1}))},3600)},window.hideUnifyMessage=()=>{$.current&&clearTimeout($.current),y(D=>({...D,open:!1}))},window.showUnifyConfirm=D=>{const I=D||{},H=I.text||"Use this power now?",k=I.topic||"",A=I.yesLabel||"Yes",j=I.noLabel||"No";_.current=typeof I.onYes=="function"?I.onYes:null,C.current=typeof I.onNo=="function"?I.onNo:null,M({open:!0,text:H,topic:k,yesLabel:A,noLabel:j})},window.hideUnifyConfirm=()=>{M(D=>({...D,open:!1}))},()=>{$.current&&clearTimeout($.current),delete window.showUnifyMessage,delete window.hideUnifyMessage,delete window.showUnifyConfirm,delete window.hideUnifyConfirm}),[]),e.jsxs(e.Fragment,{children:[o&&e.jsxs("nav",{className:"app-nav",children:[!u&&e.jsx(U,{to:"/",className:"app-logo","aria-label":"Home",children:e.jsxs("span",{className:"desk-logo",children:[e.jsx("span",{className:"back"}),e.jsx("span",{className:"seat"}),e.jsx("span",{className:"leg-left"}),e.jsx("span",{className:"leg-right"}),e.jsx("span",{className:"desk"})]})}),!p&&e.jsx(U,{to:"/howto",children:"How to Play"}),!p&&e.jsx("button",{className:"nav-back",onClick:()=>history.length>1?history.back():window.location.href="/",children:"Back"}),!p&&e.jsx(U,{to:"/game",children:"Math Pup"}),!p&&e.jsx(U,{to:"/capture",children:"Capture"}),!p&&e.jsx(U,{to:"/decimal",children:"Deci-What?"}),!p&&e.jsx(U,{to:"/mathsynth",children:"Ma+h5Yn+h3"}),!p&&e.jsx(U,{to:"/about",children:"About"}),!p&&e.jsx(U,{to:"/list",children:"Games"}),!p&&e.jsx(U,{to:"/",children:"Home"})]}),e.jsx("main",{children:e.jsxs(zn,{children:[e.jsx(Ee,{path:"/",element:e.jsx(pa,{})}),e.jsx(Ee,{path:"/game",element:e.jsx(xa,{})}),e.jsx(Ee,{path:"/capture",element:e.jsx(wa,{})}),e.jsx(Ee,{path:"/decimal",element:e.jsx(Ta,{})}),e.jsx(Ee,{path:"/mathsynth",element:e.jsx(Ba,{})}),e.jsx(Ee,{path:"/bennyworld",element:e.jsx(Ga,{})}),e.jsx(Ee,{path:"/list",element:e.jsx(ba,{})}),e.jsx(Ee,{path:"/profile",element:e.jsx(Da,{})}),e.jsx(Ee,{path:"/howto",element:e.jsx($a,{})}),e.jsx(Ee,{path:"/about",element:e.jsx(Ia,{})})]})}),e.jsxs("div",{className:`unify-toast ${g.open?"show":""}${g.topic?` topic-${g.topic}`:""}`,role:"status","aria-live":"polite","aria-hidden":!g.open,children:[e.jsxs("div",{className:"unify-booiii","aria-hidden":"true",children:[e.jsxs("div",{className:"unify-booiii__hat",children:[e.jsx("span",{className:"unify-booiii__dot"}),e.jsx("span",{className:"unify-booiii__hat-top"}),e.jsx("span",{className:"unify-booiii__hat-brim"})]}),e.jsxs("div",{className:"unify-booiii__head",children:[e.jsx("span",{className:"unify-booiii__eye"}),e.jsx("span",{className:"unify-booiii__eye"}),e.jsx("span",{className:"unify-booiii__mouth"})]}),e.jsx("div",{className:"unify-booiii__torso"}),e.jsxs("div",{className:"unify-booiii__arms",children:[e.jsx("span",{className:"unify-booiii__arm left"}),e.jsx("span",{className:"unify-booiii__arm right"})]}),e.jsxs("div",{className:"unify-booiii__legs",children:[e.jsx("span",{className:"unify-booiii__leg left"}),e.jsx("span",{className:"unify-booiii__leg right"})]})]}),e.jsx("div",{className:"unify-bubble",children:g.text})]}),e.jsxs("div",{className:`unify-confirm ${b.open?"show":""}${b.topic?` topic-${b.topic}`:""}`,role:"dialog","aria-modal":"true","aria-hidden":!b.open,children:[e.jsx("div",{className:"unify-confirm__backdrop",onClick:()=>{C.current&&C.current(),M(D=>({...D,open:!1}))}}),e.jsxs("div",{className:"unify-confirm__panel",children:[e.jsx("div",{className:"unify-confirm__booiii","aria-hidden":"true",children:e.jsxs("div",{className:"unify-booiii",children:[e.jsxs("div",{className:"unify-booiii__hat",children:[e.jsx("span",{className:"unify-booiii__dot"}),e.jsx("span",{className:"unify-booiii__hat-top"}),e.jsx("span",{className:"unify-booiii__hat-brim"})]}),e.jsxs("div",{className:"unify-booiii__head",children:[e.jsx("span",{className:"unify-booiii__eye"}),e.jsx("span",{className:"unify-booiii__eye"}),e.jsx("span",{className:"unify-booiii__mouth"})]}),e.jsx("div",{className:"unify-booiii__torso"}),e.jsxs("div",{className:"unify-booiii__arms",children:[e.jsx("span",{className:"unify-booiii__arm left"}),e.jsx("span",{className:"unify-booiii__arm right"})]}),e.jsxs("div",{className:"unify-booiii__legs",children:[e.jsx("span",{className:"unify-booiii__leg left"}),e.jsx("span",{className:"unify-booiii__leg right"})]})]})}),e.jsx("div",{className:"unify-confirm__bubble",children:b.text}),e.jsxs("div",{className:"unify-confirm__actions",children:[e.jsx("button",{type:"button",className:"unify-confirm__btn yes",onClick:()=>{_.current&&_.current(),M(D=>({...D,open:!1}))},children:b.yesLabel}),e.jsx("button",{type:"button",className:"unify-confirm__btn no",onClick:()=>{C.current&&C.current(),M(D=>({...D,open:!1}))},children:b.noLabel})]})]})]})]})}an(document.getElementById("root")).render(e.jsx(Qn.StrictMode,{children:e.jsx(ea,{basename:"/Math-isn-t-Lame/",future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(Ha,{})})}));
