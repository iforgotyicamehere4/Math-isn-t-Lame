import{r as D,a as Un,u as Jn,L as T,b as Vn,R as Yn,c as Ne,d as zn,B as Kn}from"./vendor-CV00cFDn.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const f of i)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&h(g)}).observe(document,{childList:!0,subtree:!0});function d(i){const f={};return i.integrity&&(f.integrity=i.integrity),i.referrerPolicy&&(f.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?f.credentials="include":i.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function h(i){if(i.ep)return;i.ep=!0;const f=d(i);fetch(i.href,f)}})();var Qt={exports:{}},vt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn=D,Qn=Symbol.for("react.element"),Zn=Symbol.for("react.fragment"),ea=Object.prototype.hasOwnProperty,ta=Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,na={key:!0,ref:!0,__self:!0,__source:!0};function Zt(o,u,d){var h,i={},f=null,g=null;d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),u.ref!==void 0&&(g=u.ref);for(h in u)ea.call(u,h)&&!na.hasOwnProperty(h)&&(i[h]=u[h]);if(o&&o.defaultProps)for(h in u=o.defaultProps,u)i[h]===void 0&&(i[h]=u[h]);return{$$typeof:Qn,type:o,key:f,ref:g,props:i,_owner:ta.current}}vt.Fragment=Zn;vt.jsx=Zt;vt.jsxs=Zt;Qt.exports=vt;var e=Qt.exports,en,zt=Un;en=zt.createRoot,zt.hydrateRoot;function aa(){var V;const o=D.useRef(null),u=((V=Jn)==null?void 0:V())||(()=>{window.location.href="/game"}),[d,h]=D.useState(()=>localStorage.getItem("highContrast")==="true"),[i,f]=D.useState(!1),[g,S]=D.useState(""),[w,E]=D.useState(""),[P,W]=D.useState(""),[A,Q]=D.useState(!1),[ne,re]=D.useState(()=>localStorage.getItem("mathpop_current_user")||null),[pe,j]=D.useState(0);D.useEffect(()=>{document.body.classList.toggle("high-contrast",!!d),localStorage.setItem("highContrast",d?"true":"false")},[d]),D.useEffect(()=>{const p=o.current;if(!p)return;const _=requestAnimationFrame(()=>p.classList.add("animate"));return()=>cancelAnimationFrame(_)},[]),D.useEffect(()=>{if(ne){const p=parseInt(localStorage.getItem("mathpop_highscore_"+ne)||"0",10);j(Number.isNaN(p)?0:p)}else j(0)},[ne]);function L(p){!p||!p.username||(localStorage.setItem("mathpop_profile_"+p.username,JSON.stringify(p)),Ee(p.username))}function N(p){if(!p)return null;const _=localStorage.getItem("mathpop_profile_"+p);return _?JSON.parse(_):null}function Ee(p){p?(localStorage.setItem("mathpop_current_user",p),re(p)):(localStorage.removeItem("mathpop_current_user"),re(null))}function Se(p){if(p)try{const _="mathpop_emails",I=JSON.parse(localStorage.getItem(_)||"[]");I.includes(p)||I.push(p),localStorage.setItem(_,JSON.stringify(I)),localStorage.setItem("mathpop_email_compilation",I.join(","))}catch{}}function fe(){try{if(typeof u=="function"){u("/game");return}}catch{}window.location.href="/game"}function oe(){if(!g.trim()||!w.trim()||!P){alert("Please fill all fields");return}if(!A){alert("You must accept the disclaimer");return}const p={username:g.trim(),email:w.trim(),created:Performance.now()};L(p),localStorage.setItem("mathpop_highscore_"+p.username,localStorage.getItem("mathpop_highscore_"+p.username)||"0"),Se(p.email),f(!1),alert("Profile created — starting game"),setTimeout(fe,200)}function Ce(){if(!g.trim()||!w.trim()){alert("Please fill both fields");return}const p=N(g.trim());if(!p||p.email!==w.trim()){alert("No matching profile found");return}Ee(g.trim()),f(!1),alert("Signed in — starting game"),setTimeout(fe,200)}function J(){Ee(null),window.location.reload()}return e.jsxs("div",{className:"background",children:[e.jsxs("nav",{children:[e.jsx("div",{className:"logo",children:e.jsxs("span",{className:"desk-logo",children:[e.jsx("span",{className:"back"}),e.jsx("span",{className:"seat"}),e.jsx("span",{className:"leg-left"}),e.jsx("span",{className:"leg-right"}),e.jsx("span",{className:"desk"})]})}),e.jsxs("div",{id:"userArea",className:"user-area",style:{marginLeft:12},children:[e.jsx("span",{id:"usernameDisplay",style:{display:ne?"inline":"none"},children:ne}),e.jsx("button",{id:"logoutBtn",style:{display:ne?"inline-block":"none"},onClick:J,children:"Logout"})]}),e.jsxs("ul",{className:"nav",style:{listStyle:"none",display:"flex",gap:8,padding:0},children:[e.jsx("li",{children:e.jsx(T,{to:"/howto",children:"How to Play"})}),e.jsx("li",{children:e.jsx(T,{to:"/list",children:"Games"})}),e.jsx("li",{children:e.jsx(T,{to:"/about",children:"About"})}),ne&&e.jsx("li",{children:e.jsx(T,{to:"/profile",children:"Profile"})})]})]}),e.jsx("button",{className:"home-benny",type:"button","aria-pressed":d?"true":"false",title:"Toggle high contrast",onClick:()=>h(p=>!p),children:e.jsx("span",{className:"benny-base",children:e.jsxs("span",{className:"benny-shape",children:[e.jsx("span",{className:"back"}),e.jsx("span",{className:"leg-left"}),e.jsx("span",{className:"leg-right"}),e.jsx("span",{className:"head"})]})})}),e.jsx("header",{children:e.jsxs("div",{className:"hero-card",children:[e.jsx("p",{className:"tagline",children:"Math isn't lame — it's an adventure!"}),e.jsx("p",{className:"description",children:`"Bark Bark" "My homework is gone...... I didn't eat it...... Can you help me?"`}),e.jsxs("div",{className:"hero-actions",id:"heroActions",children:[e.jsx("button",{className:"start-btn",id:"createProfile",onClick:()=>f(!0),children:"Sign Up / Sign In"}),ne&&e.jsx(T,{className:"start-btn",style:{marginLeft:8,textDecoration:"none"},to:"/profile",children:"View Profile"}),e.jsx("div",{id:"homeHighScore",style:{marginTop:10,color:"#e9e2e2",fontWeight:700},children:ne?`${ne} — High Score: ${pe}`:"Not signed in"})]})]})}),e.jsx("section",{ref:o,className:"classroom classroom-word","aria-label":"Classroom seating",children:(()=>{const p={M:["101","111","101","101","101"],A:["010","101","111","101","101"],T:["111","010","010","010","010"],H:["101","101","111","101","101"],I:["1","1","1","1","1"],S:["111","100","111","001","111"],L:["100","100","100","100","111"]},_=5,I="0",B="00",K=Y=>{const R=Array.from({length:_},()=>"");return Y.forEach((O,ce)=>{const xe=p[O];for(let ae=0;ae<_;ae++)R[ae]+=xe[ae];if(ce<Y.length-1)for(let ae=0;ae<_;ae++)R[ae]+=I}),R},q=K(["M","A","T","H"]),C=K(["I","S"]),Me=K(["L","I","T"]),de=q.map((Y,R)=>`${Y}${B}${C[R]}${B}${Me[R]}`),Je=[];de.forEach((Y,R)=>{Y.split("").forEach((O,ce)=>{O==="1"&&Je.push({r:R,c:ce})})});const X=26,ye=de[0].length*X,me=_*X;return e.jsx("div",{className:"chair-field",style:{"--cell":`${X}px`,width:`${de[0].length*X}px`,height:`${_*X}px`},children:Je.map(Y=>{const R=Math.floor(Math.random()*ye),O=Math.floor(Math.random()*me);return e.jsxs("div",{className:"chair",style:{"--start-x":`${R}px`,"--start-y":`${O}px`,"--end-x":`${Y.c*X}px`,"--end-y":`${Y.r*X}px`},children:[e.jsx("div",{className:"back"}),e.jsx("div",{className:"seat"}),e.jsx("div",{className:"leg-left"}),e.jsx("div",{className:"leg-right"}),e.jsx("div",{className:"desk"})]},`${Y.r}-${Y.c}`)})})})()}),e.jsx("div",{id:"authModal",className:"modal","aria-hidden":i?"false":"true",style:{display:i?"flex":"none"},children:e.jsxs("div",{className:"modal-content",role:"dialog","aria-modal":"true",children:[e.jsx("button",{className:"modal-close",id:"authClose",onClick:()=>f(!1),children:"✕"}),e.jsx("h2",{id:"modalTitle",children:"Sign Up / Sign In"}),e.jsxs("div",{className:"auth-tabs",children:[e.jsx("button",{className:i?"active":"",style:{marginRight:8},onClick:()=>{},children:"Sign Up"}),e.jsx("button",{onClick:()=>{},children:"Sign In"})]}),e.jsxs("form",{className:"auth-form",onSubmit:p=>{p.preventDefault(),oe()},children:[e.jsxs("label",{children:["Username",e.jsx("input",{id:"suUsername",required:!0,value:g,onChange:p=>S(p.target.value)})]}),e.jsxs("label",{children:["Email",e.jsx("input",{id:"suEmail",type:"email",required:!0,value:w,onChange:p=>E(p.target.value)})]}),e.jsxs("label",{children:["Password",e.jsx("input",{id:"suPassword",type:"password",required:!0,value:P,onChange:p=>W(p.target.value)})]}),e.jsxs("label",{className:"disclaimer",children:[e.jsx("input",{id:"dataAccept",type:"checkbox",checked:A,onChange:p=>Q(p.target.checked)})," I accept the ",e.jsx("strong",{children:"disclaimer"})," below"]}),e.jsx("div",{className:"disclaimer-box",children:"By signing up you agree that we may sell emails and data to fund the website and game development. An ad-free experience is available for $15/year."}),e.jsxs("div",{className:"auth-actions",children:[e.jsx("button",{type:"button",id:"doSignUp",onClick:oe,children:"Create Profile/Sign in"}),e.jsx("button",{type:"button",id:"doSignIn",onClick:Ce,style:{marginLeft:8},children:"Sign In"})]})]})]})})]})}function sa(){if(typeof window<"u"&&window.performance){const o=window.Performance||window.performance.constructor;o&&typeof o.now!="function"&&(o.now=()=>window.performance.now()),window.Performance||(window.Performance=o)}return D.useEffect(()=>{let o=!1;if(window.screen&&window.screen.orientation)try{window.screen.orientation.lock("landscape").catch(()=>{})}catch{}const u=(d,h,i={})=>new Promise(f=>{const g=document.querySelector(`script[data-script-key="${h}"]`);g&&g.parentNode&&g.parentNode.removeChild(g);const S=document.createElement("script");S.src=d,S.async=i.async??!0,i.type&&(S.type=i.type),S.dataset.scriptKey=h,S.onload=()=>f(S),document.body.appendChild(S)});return u("/js/math.js","mathjs",{async:!1}).then(()=>o?null:u("/js/game.js","mathpup",{type:"module"})),()=>{if(o=!0,window.screen&&window.screen.orientation)try{window.screen.orientation.unlock()}catch{}const d=document.querySelector('script[data-script-key="mathjs"]');d&&d.parentNode&&d.parentNode.removeChild(d);const h=document.querySelector('script[data-script-key="mathpup"]');h&&h.parentNode&&h.parentNode.removeChild(h),window.__MathPupCleanup&&window.__MathPupCleanup()}},[]),e.jsxs("main",{className:"game-shell game-page--mathpup",children:[e.jsxs("header",{className:"game-shell__header",children:[e.jsx(T,{to:"/list",className:"back-link",id:"backBtn",children:"Back"}),e.jsx("h1",{children:"Math Pup"}),e.jsxs("div",{className:"game-shell__controls controls",children:[e.jsx("label",{htmlFor:"levelSelect",children:"Level:"}),e.jsxs("select",{id:"levelSelect",defaultValue:"Easy",children:[e.jsx("option",{value:"Easy",children:"Easy (subtraction + addition)"}),e.jsx("option",{value:"Easy25",children:"Easy25 (addition & subtraction)"}),e.jsx("option",{value:"Easy50",children:"Easy50 (two-digit addition & subtraction)"}),e.jsx("option",{value:"Easy75",children:"Easy75 (two-digit addition & subtraction)"}),e.jsx("option",{value:"Medium",children:"Medium (multiplication & division)"}),e.jsx("option",{value:"Medium26",children:"Medium26 (mul & div)"}),e.jsx("option",{value:"Medium60",children:"Medium60 (mul & div)"}),e.jsx("option",{value:"Medium100",children:"Medium100 (mul & div)"}),e.jsx("option",{value:"Mathanomical",children:"Mathanomical (all ops)"})]}),e.jsx("button",{id:"startBtn",children:"Start"}),e.jsx("button",{id:"pauseBtn",disabled:!0,children:"Pause"})]})]}),e.jsxs("section",{className:"game-shell__body",children:[e.jsxs("section",{className:"game-info game-shell__panel","aria-live":"polite",children:[e.jsxs("div",{className:"stats-card","aria-label":"Score and timing",children:[e.jsx("div",{id:"score",children:"Score: 0"}),e.jsx("div",{id:"highscore",children:"High Score: 0"}),e.jsx("div",{id:"math-problem",children:"Problem: —"}),e.jsx("div",{id:"timer",children:"Time: —"})]}),e.jsxs("div",{className:"status-row",children:[e.jsx("p",{id:"status",children:"Press Start to begin."}),e.jsx("div",{id:"bennyDock",className:"benny-dock","aria-hidden":"true"})]}),e.jsx("p",{id:"mathHint",className:"math-hint","aria-live":"polite"}),e.jsxs("div",{className:"mobile-answer","aria-label":"Answer input",children:[e.jsx("input",{id:"mobileAnswer",type:"text",inputMode:"numeric",placeholder:"Type answer",autoComplete:"off"}),e.jsx("button",{id:"mobileAnswerBtn",type:"button",children:"Answer"})]}),e.jsx("p",{id:"bennyStory",className:"benny-story",children:"Benny Sum A.K.A the Dog Knight is at home in the backyard while Mr. Boooiiii is teaching. Can you help keep Benny from zombies and keep him company by completing math problems? Benny is 54 in human years, but in this game he is always 8 years old. If Benny gets lost inside a zombie, type his dog age (8) to unlock an ancient Mathanomical power and bring him back."}),e.jsx("div",{id:"bennyUnlockInfo",style:{marginTop:8}}),e.jsx("div",{id:"bennyPalette",className:"benny-palette"})]}),e.jsx("div",{className:"game-shell__board",children:e.jsxs("div",{className:"canvas-anchor",children:[e.jsx("canvas",{id:"gameCanvas",width:"800",height:"600","aria-label":"Game canvas"}),e.jsx("div",{id:"game-area",className:"game-area","aria-hidden":"false"})]})})]}),e.jsxs("div",{className:"mobile-controls",id:"mobileControls","aria-hidden":"true",children:[e.jsx("div",{className:"joystick",id:"mobileJoystick",children:e.jsx("div",{className:"stick",id:"mobileStick"})}),e.jsx("button",{className:"shoot-btn",id:"mobileShoot",type:"button",children:"Benny, Go Potty!"})]}),e.jsxs("div",{className:"number-keyboard",id:"numberKeyboard","aria-label":"Number keyboard for answers",children:[e.jsx("div",{className:"keyboard-display",children:e.jsx("input",{id:"keyboardDisplay",type:"text",readOnly:!0,placeholder:"0",className:"keyboard-input"})}),e.jsxs("div",{className:"keyboard-grid",children:[e.jsx("button",{className:"key-num","data-key":"7",type:"button",children:"7"}),e.jsx("button",{className:"key-num","data-key":"8",type:"button",children:"8"}),e.jsx("button",{className:"key-num","data-key":"9",type:"button",children:"9"}),e.jsx("button",{className:"key-op","data-key":"/",type:"button",children:"÷"}),e.jsx("button",{className:"key-num","data-key":"4",type:"button",children:"4"}),e.jsx("button",{className:"key-num","data-key":"5",type:"button",children:"5"}),e.jsx("button",{className:"key-num","data-key":"6",type:"button",children:"6"}),e.jsx("button",{className:"key-op","data-key":"*",type:"button",children:"×"}),e.jsx("button",{className:"key-num","data-key":"1",type:"button",children:"1"}),e.jsx("button",{className:"key-num","data-key":"2",type:"button",children:"2"}),e.jsx("button",{className:"key-num","data-key":"3",type:"button",children:"3"}),e.jsx("button",{className:"key-op","data-key":"-",type:"button",children:"−"}),e.jsx("button",{className:"key-num zero","data-key":"0",type:"button",children:"0"}),e.jsx("button",{className:"key-op","data-key":"+",type:"button",children:"+"}),e.jsx("button",{className:"key-delete",id:"keyDelete",type:"button",children:"DEL"}),e.jsx("button",{className:"key-submit",id:"keySubmit",type:"button",children:"Enter"})]})]})]})}function ra(){return e.jsxs("div",{className:"list-page",children:[e.jsxs("div",{className:"list-bar",children:[e.jsx(T,{className:"back-link",to:"/",children:"← Home"}),e.jsx("h1",{children:"Available Games"})]}),e.jsxs("main",{className:"main-content",children:[e.jsx("p",{children:"Select a game to play:"}),e.jsxs("ul",{className:"game-list",children:[e.jsx("li",{children:e.jsx(T,{to:"/game",children:"Math Pup"})}),e.jsx("li",{children:e.jsx(T,{to:"/capture",children:"Capture The Fraction"})}),e.jsx("li",{children:e.jsx(T,{to:"/decimal",children:"Deci-What?"})}),e.jsx("li",{children:e.jsx(T,{to:"/mathsynth",children:"Ma+h5Yn+h3 (MathSynth)"})}),e.jsx("li",{children:e.jsx(T,{to:"/bennyworld",children:"Benny World (Zone 1)"})})]})]})]})}function Qe(o,u){D.useEffect(()=>{if(!o||!u)return;const d=document.querySelector(`script[data-script-key="${u}"]`);d&&d.parentNode&&d.parentNode.removeChild(d);const h=document.createElement("script");h.src=o,h.async=!0,h.dataset.scriptKey=u,document.body.appendChild(h)},[o,u])}function ia(){return Qe("/js/capture.js","capture"),D.useEffect(()=>()=>{window.__CaptureCleanup&&window.__CaptureCleanup()},[]),e.jsxs("main",{className:"game-shell game-page--capture",children:[e.jsxs("header",{className:"game-shell__header",children:[e.jsx(T,{to:"/list",className:"back-link",id:"backBtn",children:"Back"}),e.jsx("h1",{children:"Capture"}),e.jsxs("div",{className:"game-shell__controls controls",children:[e.jsx("label",{htmlFor:"levelSelect",children:"Difficulty:"}),e.jsxs("select",{id:"levelSelect",defaultValue:"easy",children:[e.jsx("option",{value:"easy",children:"Easy (halves, thirds, quarters)"}),e.jsx("option",{value:"medium",children:"Medium (denominators up to 9)"}),e.jsx("option",{value:"mathanomical",children:"Mathanomical (mixed numbers)"})]}),e.jsx("button",{id:"startBtn",children:"Start"}),e.jsx("button",{id:"pauseBtn",disabled:!0,children:"Pause"})]})]}),e.jsxs("section",{className:"game-shell__body",children:[e.jsxs("section",{className:"game-info game-shell__panel","aria-live":"polite",children:[e.jsx("div",{id:"scoreDisplay",children:"Score: 0"}),e.jsx("div",{id:"streakDisplay",children:"Streak: x0"}),e.jsx("div",{id:"targetFraction",children:"Find: —"}),e.jsx("div",{id:"hint",style:{marginTop:6}}),e.jsxs("div",{className:"inputWrap",children:[e.jsx("label",{htmlFor:"fractionInput",children:"Type Answer:"}),e.jsx("input",{type:"text",id:"fractionInput",placeholder:"example: 3/6",autoComplete:"off"})]}),e.jsx("p",{id:"status",children:"Press Start to begin."})]}),e.jsx("div",{className:"game-shell__board",children:e.jsx("div",{className:"canvas-anchor",children:e.jsx("canvas",{id:"gameCanvas",width:"800",height:"600","aria-label":"Game canvas"})})})]})]})}const G=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],gt=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];function Ue(o){if(o=Math.abs(Math.trunc(o)),o<20)return G[o];if(o<100){const h=Math.floor(o/10),i=o%10;return i?`${gt[h]}-${G[i]}`:gt[h]}const u=Math.floor(o/100),d=o%100;return d?`${G[u]} hundred ${Ue(d)}`:`${G[u]} hundred`}function la(o){if(!o||Number(o)===0)return"";let u=o;u.endsWith("00")?u=u.slice(0,1):u.endsWith("0")&&(u=u.slice(0,2));const i=({1:"tenth",2:"hundredth",3:"thousandth"}[u.length]||`${Math.pow(10,u.length)}th`)+"s",f=parseInt(u,10);return`${Ue(f).replace(/\s+/g,"-")}-${i}`}function ke(o){if(!o)return null;const u=o.trim().toLowerCase();for(let h=0;h<G.length;h++)if(G[h]===u)return h;if(u.includes("-")){const h=u.split("-");if(h.length===2){const i=gt.indexOf(h[0]),f=G.indexOf(h[1]);if(i>=2&&f>=0)return i*10+f}}else{const h=gt.indexOf(u);if(h>=2)return h*10}const d=u.split(/\s+/);if(d.length===2){const h=ke(d[0]),i=ke(d[1]);if(h!==null&&i!==null)return h+i}return null}function Et(o){const u=Math.trunc(o),d=Math.round((o-u)*1e3),h=Ue(u);if(d===0)return h.toLowerCase().replace(/\s+/g,"-");let i=String(d).padStart(3,"0");i.endsWith("00")?i=i.slice(0,1):i.endsWith("0")&&(i=i.slice(0,2));const f=la(i);return`${h.toLowerCase().replace(/\s+/g,"-")}-and-${f}`}function Kt(o,u){const d=typeof o=="number"?o:Math.floor(Math.random()*80)+20,h=typeof u=="number"?u:Math.floor(Math.random()*100),i=Et(d),f=String(h).padStart(2,"0");return`${i}.${f}`}function Xt(o,u="word-digit"){const d=Ue(o).toLowerCase().replace(/[\s-]+/g,""),h=Math.floor(o/10),i=o%10;return u==="digits"?String(o):u==="word"?d:u==="digit-word"?i===0?String(o):`${h}${G[i]}`:i>0?`${Ue(h*10).toLowerCase().replace(/[\s-]+/g,"")}${i}`:d}function oa(o,u="word-and-digit"){const d=Math.max(0,Math.min(99,o)),h=Math.floor(d/10),i=d%10;return u==="digits"?`${d}hundredths`:u==="word"?`${Ue(d).toLowerCase().replace(/[\s-]+/g,"")}hundredths`:u==="word-digit"?i===0?`${G[h]}hundredths`:`${G[h]}${i}hundredths`:d>=10?i===0?`${G[h]}hundredths`:`${G[h]}and${i}hundredths`:`${Ue(d).toLowerCase().replace(/[\s-]+/g,"")}hundredths`}function ca(o,u="word-and-digit"){const d=Math.max(0,Math.min(999,o));if(u==="digits")return`${d}thousandths`;const h=Ue(d).toLowerCase().replace(/[\s-]+/g,"");if(u==="word")return`${h}thousandths`;const i=Math.floor(d/100),f=Math.floor(d%100/10),g=d%10;if(u==="word-digit-word"&&i>0){const S=G[i],w=g>0?G[g]:"";return`${w?`${S}${f}${w}`:`${S}${f}`}thousandths`}return u==="word-digit"&&d>=10?g===0?`${G[f]}thousandths`:`${G[f]}${g}thousandths`:u==="digit-word"&&d>=10?g===0?`${f}${G[f]}thousandths`:`${f}${G[g]}thousandths`:d>=10?g===0?`${G[f]}thousandths`:`${G[f]}and${g}thousandths`:`${h}thousandths`}function da(o){if(!o)return null;const u=o.toLowerCase().replace(/thousandths?$/,"");if(!u)return null;const d=u.replace(/[^0-9]/g,""),h=u.replace(/[^a-z\-]/g,"").replace(/and/g,"");if(d&&h){const i=parseInt(d,10),f=ke(h);if(f!==null)return d.length===2&&f<10?f*100+i:d.length===1&&f<10?f*10+i:parseInt(`${i}${f}`,10)}return d?parseInt(d,10):ke(h)}function ma(o){if(!o)return null;let u=null,d=null;for(const S of G.slice(1))if(o.startsWith(S)){u=S;break}for(const S of G.slice(1))if(o.endsWith(S)){d=S;break}if(!u||!d)return null;const h=o.slice(u.length,o.length-d.length);if(!/^\d+$/.test(h))return null;const i=G.indexOf(u),f=G.indexOf(d),g=parseInt(h,10);return i<0||f<0||g<0||g>9?null:i*100+g*10+f}function ua(o){if(!o)return null;const u=o.toLowerCase(),d=u.replace(/[^0-9]/g,""),h=u.replace(/[^a-z\-]/g,"").replace(/and/g,""),i=h?ke(h):null;if(d){const f=parseInt(d,10);return i!==null?d.length===1&&i<10?i*10+f:i>=20&&i%10===0&&d.length===1?i+f:parseInt(`${i}${d}`,10):f}return i}function ha(o){if(!o)return null;const u=o.toLowerCase().replace(/hundredths?$/,""),d=u.replace(/[^0-9]/g,""),h=u.replace(/[^a-z\-]/g,"").replace(/and/g,""),i=h?ke(h):null;if(d){const f=parseInt(d,10);return i!==null?d.length===1&&i<10?i*10+f:i>=20&&i%10===0&&d.length===1?i+f:parseInt(`${i}${d}`,10):f}return i}function xt(o){if(!o)return null;if(o.includes("-and-"))return fa(o);if(o.includes("&")){const[u,d]=o.split("&"),h=ua(u);if(h===null)return null;const i=d||"";if(i.includes("thousandth")){const g=i.toLowerCase().replace(/thousandths?$/,""),S=da(i)??ma(g);return S===null||S<0||S>999?null:Number((h+S/1e3).toFixed(6))}const f=ha(i);return f===null||f<0||f>99?null:Number((h+f/100).toFixed(6))}return pa(o)}function pa(o){if(!o)return null;const d=o.toLowerCase().replace(/[^a-z0-9\.\-]/g,"").split(".");if(d.length!==2)return null;const h=d[0].replace(/[^a-z\-]/g,""),i=d[1].replace(/[^0-9]/g,"");if(!h||!i)return null;const f=ke(h);if(f===null)return null;const g=Math.pow(10,i.length);return Number((f+Number(i)/g).toFixed(6))}function fa(o){if(!o)return null;const u=o.trim().toLowerCase().replace(/^-+/,"").replace(/-+$/,"");if(u.includes("-and-")){const[h,i]=u.split("-and-"),f=ke(h);if(f===null)return null;let g=null,S=null;if(i.endsWith("thousandths"))g=1e3,S=i.slice(0,-11);else if(i.endsWith("hundredths"))g=100,S=i.slice(0,-10);else if(i.endsWith("tenths"))g=10,S=i.slice(0,-6);else if(i.endsWith("thousandth"))g=1e3,S=i.slice(0,-10);else if(i.endsWith("hundredth"))g=100,S=i.slice(0,-9);else if(i.endsWith("tenth"))g=10,S=i.slice(0,-5);else return null;S=S.replace(/-+$/,"").replace(/^-+/,"").trim();const w=ke(S);return w===null?null:Number((f+w/g).toFixed(6))}const d=ke(u);return d===null?null:Number(d.toFixed(6))}function ya(){window.__DecimalCleanup&&window.__DecimalCleanup(),window.__DecimalCleanup=null;const o=document.getElementById("level"),u=document.getElementById("start"),d=document.getElementById("pause");document.getElementById("backBtn");const h=document.getElementById("prompt"),i=document.getElementById("hint"),f=document.getElementById("score"),g=document.getElementById("timer"),S=document.getElementById("streak"),w=document.getElementById("answerInput"),E=document.getElementById("feedback"),P=document.getElementById("colsInput"),W=document.getElementById("rowsInput"),A=document.getElementById("cellSizeInput"),Q=document.getElementById("applyGridBtn"),ne=document.getElementById("gridPreview"),re=document.getElementById("palette"),pe=document.getElementById("selectedColorPreview");let j=Number(P==null?void 0:P.value)||15,L=Number(W==null?void 0:W.value)||15,N=Number(A==null?void 0:A.value)||28;const Ee=20,Se=15;let fe=Number(A==null?void 0:A.value)||28,oe=0,Ce=0,J={primary:"#1f77b4",secondary:"#0b2740"},V,p,_=[],I=!1,B=!1,K=0,q=0,C=null,Me=10,de=3;const Je={easy:125e4,medium:125e4,medium5:125e4,mathamatical:125e4};let X=null,ye=0,me=0,Y=null,R=null,O=null,ce=null,xe=null;const ae=.001;let ie=!1,F=null,le=null,H=null,be=[],Pe=null,_e=null,Le=null,Z=null,ue=[],he=[],Ze=0,ee={left:!1,right:!1,up:!1,down:!1},Ve={x:1,y:0},ge=150,Re=20;const st=20;let ve=null,Te=null,Be=null,Ae=!1,Ye={x:0,y:0},et={x:0,y:0};const tt=28;let $e=null,Ie=null,Fe=null,De=null,l=null,k=null,U=null;function We(){return localStorage.getItem("mathpop_current_user")||"guest"}function rt(){return`mathpop_profile_stats_${We()}`}function nt(){const t=localStorage.getItem(rt());if(!t)return{totalPoints:0,totalCorrect:0,totalAttempted:0,pupStreakRecord:0,levelsCompleted:[],games:{}};try{const n=JSON.parse(t);return{totalPoints:Number(n.totalPoints)||0,totalCorrect:Number(n.totalCorrect)||0,totalAttempted:Number(n.totalAttempted)||0,pupStreakRecord:Number(n.pupStreakRecord)||0,levelsCompleted:Array.isArray(n.levelsCompleted)?n.levelsCompleted:[],games:n.games&&typeof n.games=="object"?n.games:{}}}catch{return{totalPoints:0,totalCorrect:0,totalAttempted:0,pupStreakRecord:0,levelsCompleted:[],games:{}}}}function dt(t,n){return t.games[n]||(t.games[n]={points:0,correct:0,attempted:0,bestScore:0,streakRecord:0,gamesPlayed:0}),t.games[n]}function mt(t){localStorage.setItem(rt(),JSON.stringify(t))}function He(t,n){const a=nt(),r=dt(a,"decimal");a.totalAttempted+=1,r.attempted+=1,t&&(a.totalCorrect+=1,r.correct+=1,a.totalPoints+=n,r.points+=n),r.streakRecord=Math.max(r.streakRecord,q),r.bestScore=Math.max(r.bestScore,K),mt(a)}function tn(){const t=wt();return t.startsWith("easy")?{level:"easy",cols:parseInt(t.replace("easy",""),10)||20}:t==="medium"?{level:"medium",cols:Number(P==null?void 0:P.value)||25}:{level:"mathamatical",cols:Number(P==null?void 0:P.value)||25}}function Ge(){const t=wt();return t.startsWith("easy")?"easy":t==="medium"?"medium":"mathamatical"}function jt(){const t=tn();j=t.cols,L=15,W&&(W.value=String(L),W.disabled=!0),P&&(P.value=String(j),P.disabled=t.level==="easy"),Q&&(Q.disabled=t.level==="easy")}const it=[{id:"dp-01",primary:"#0c0b18",secondary:"#3b0f58"},{id:"dp-02",primary:"#0b1026",secondary:"#0f6b6d"},{id:"dp-03",primary:"#160a2a",secondary:"#5b1e57"},{id:"dp-04",primary:"#071a24",secondary:"#164c70"},{id:"dp-05",primary:"#140b1f",secondary:"#6b2a3f"},{id:"dp-06",primary:"#09131c",secondary:"#246b4f"},{id:"dp-07",primary:"#0e0f1e",secondary:"#4a2f8a"},{id:"dp-08",primary:"#0a1a1f",secondary:"#1e5a7a"},{id:"dp-09",primary:"#131126",secondary:"#3f2d78"},{id:"dp-10",primary:"#0d1a2d",secondary:"#1b5ea5"},{id:"dp-11",primary:"#150b24",secondary:"#6d1f5f"},{id:"dp-12",primary:"#111629",secondary:"#3c5bdc"},{id:"dp-13",primary:"#0f0e1d",secondary:"#7a2bff"},{id:"dp-14",primary:"#0b1426",secondary:"#2f8bff"},{id:"dp-15",primary:"#120d1a",secondary:"#ff2f92"},{id:"dp-16",primary:"#0f1216",secondary:"#27f2ff"},{id:"dp-17",primary:"#170f25",secondary:"#8a4bff"},{id:"dp-18",primary:"#0f1a24",secondary:"#22d3ee"},{id:"dp-19",primary:"#120a1c",secondary:"#ff5e5e"},{id:"dp-20",primary:"#10121d",secondary:"#c97bff"},{id:"dp-21",primary:"#0b0f18",secondary:"#19b5a5"},{id:"dp-22",primary:"#0f1422",secondary:"#ff8a3d"},{id:"dp-23",primary:"#0c1520",secondary:"#3dd6ff"},{id:"dp-24",primary:"#140c1c",secondary:"#ff42c7"},{id:"dp-25",primary:"#0d1420",secondary:"#40ff8a"},{id:"dp-26",primary:"#0b1222",secondary:"#7c7cff"},{id:"dp-27",primary:"#0f0b18",secondary:"#ff6a00"},{id:"dp-28",primary:"#0d1a2b",secondary:"#00d1ff"},{id:"dp-29",primary:"#0f0f1b",secondary:"#ff4f7b"},{id:"dp-30",primary:"#101821",secondary:"#23c3ff"},{id:"dp-31",primary:"#120b1e",secondary:"#a855f7"},{id:"dp-32",primary:"#0a1622",secondary:"#00f5a0"},{id:"dp-33",primary:"#0c101f",secondary:"#4ade80"},{id:"dp-34",primary:"#0f1428",secondary:"#60a5fa"},{id:"dp-35",primary:"#150c20",secondary:"#f472b6"},{id:"dp-36",primary:"#0d1821",secondary:"#14b8a6"},{id:"dp-37",primary:"#140c24",secondary:"#e879f9"},{id:"dp-38",primary:"#0b151f",secondary:"#22d3ee"},{id:"dp-39",primary:"#0f0c1f",secondary:"#a3e635"},{id:"dp-40",primary:"#0e1420",secondary:"#38bdf8"},{id:"dp-41",primary:"#130d22",secondary:"#f97316"},{id:"dp-42",primary:"#0c1723",secondary:"#06b6d4"},{id:"dp-43",primary:"#120c1a",secondary:"#fb7185"},{id:"dp-44",primary:"#0d1524",secondary:"#3b82f6"},{id:"dp-45",primary:"#130c1f",secondary:"#d946ef"},{id:"dp-46",primary:"#0b1620",secondary:"#10b981"},{id:"dp-47",primary:"#0f0d18",secondary:"#facc15"},{id:"dp-48",primary:"#0c1326",secondary:"#6366f1"},{id:"dp-49",primary:"#100b1d",secondary:"#f43f5e"},{id:"dp-50",primary:"#0c1726",secondary:"#0ea5e9"}];let nn=[];function M(t,n){return Math.floor(Math.random()*(n-t+1))+t}function at(t,n,a){return Math.max(n,Math.min(a,t))}function qe(t){return Number(t).toFixed(3).replace(/\.?0+$/,"")}function wt(){return o&&o.value||"easy20"}const Pt={easy20:[{name:"euler-vortex",map:["...#####.....","..#...#..###.",".#....#.#...#","#.....###...#","#....##.....#",".#..###..#...","..#...#..#...","...###..#....","....#..###..."]},{name:"quadratic-wave",map:[".....#.......","....#.#......","...#...#.....","..#.....#....",".#.......#...","#.........#..",".#.......#...","..#.....#....","...#...#....."]},{name:"sine-cosine",map:["..#.....#....",".#.#...#.#...","#...#.#...#..",".#...#...#...","..#...#...#..",".#...#...#...","#..#...#..#..",".#.#...#.#...","..#.....#...."]},{name:"log-tunnel",map:["#############","##.........##","#..#######..#","#..#.....#..#","#..#..#..#..#","#..#.....#..#","#..#######..#","##.........##","#############"]},{name:"exponential-bloom",map:[".....#.......","...#.#.#.....","..#..#..#....","..#..#..#....",".##.###.##...","..#..#..#....","..#..#..#....","...#.#.#.....",".....#......."]}],easy25:[{name:"mandelbrot",map:["....#####....","..#########..",".###########.",".###########.",".###########.","..#########..","...#######...","....#####....",".....###....."]},{name:"julia-dream",map:["....###..###.","...####..####","..#####..####","..####....###","..####....###","..#####..####","...####..####","....###..###.",".....#....#.."]},{name:"chaos-glitch",map:["#..#...#..#..",".#....##.....","...##...#.#..","#...#..#....#","..#..#...##..",".##....#..#..","..#.#...##...","#..##.....#..",".#..#..#..#.."]},{name:"spiral-stair",map:["#............","##...........",".##..........","..##.........","...##........","....##.......",".....##......","......##.....",".......##...."]},{name:"butterfly",map:["..##.....##..",".###.....###.","#####...#####",".###..#..###.","..##.###.##..",".###..#..###.","#####...#####",".###.....###.","..##.....##.."]}],easy30:[{name:"fourier-spectrum",map:["....#...#....","...##..###...","..###.####...",".####.#####..","#####.#####..","#####.######.","######.######","######.######","#############"]},{name:"wave-interference",map:["#.#.#.#.#.#.#",".#.#.#.#.#.#.","#.#.#.#.#.#.#",".#.#.#.#.#.#.","#.#.#.#.#.#.#",".#.#.#.#.#.#.","#.#.#.#.#.#.#",".#.#.#.#.#.#.","#.#.#.#.#.#.#"]},{name:"beat-grid",map:["##..##..##..#","..##..##..##.","##..##..##..#","..##..##..##.","##..##..##..#","..##..##..##.","##..##..##..#","..##..##..##.","##..##..##..#"]},{name:"harmonic-rings",map:["...#####.....","..#.....#....",".#..###..#...",".#..#.#..#...",".#..###..#...","..#.....#....","...#####.....",".............","............."]},{name:"rhythm-matrix",map:["###...###...#","#..#..#..#..#","###...###...#","..#.....#....","###...###...#","#..#..#..#..#","###...###...#","....#....#...","###...###...#"]}],medium:[{name:"impossible-triangle",map:["......#......",".....#.#.....","....#...#....","...#.....#...","..#.......#..",".#.........#.","#############","............#","###########.."]},{name:"tessellation",map:["..#...#...#..",".#.#.#.#.#.#.","#...#...#...#",".#.#.#.#.#.#.","..#...#...#..",".#.#.#.#.#.#.","#...#...#...#",".#.#.#.#.#.#.","..#...#...#.."]},{name:"mobius-loop",map:["..####...####",".#....#.#....","#......#.....","#.....#......",".#....#.#....","..####...####","....#.#....#.",".....#......#","....#........"]},{name:"golden-garden",map:["....#####....","...#.....#...","..#..###..#..",".#..#...#..#.",".#..#...#..#.","..#..###..#..","...#.....#...","....#####....","......#......"]},{name:"polyhedron",map:["....#####....","...#.....#...","..#.......#..",".#.........#.",".#.........#.","..#.......#..","...#.....#...","....#####....","............."]}],mathamatical:[{name:"number-soup",map:["#.#.##..#.#.#","##..#.#..##..",".#.#..##.#.#.","##..##..#..##","#..#.#.##..#.",".##..#..##..#","#.#..##.#..##","##..#..##.#..",".#.#.##..#.#."]},{name:"graffiti-wall",map:["########.....","#######....#.","######...##..","#####...###..","####...####..","###...#####..","##...######..","#...#######..","...########.."]},{name:"infinity-raceway",map:["...####.####.","..#....#....#",".#.....#.....",".#....#.#....",".#.....#.....","..#....#....#","...####.####.",".............","............."]},{name:"probability-cloud",map:[".....###.....","....#####....","...#######...","..#########..",".###########.","..#########..","...#######...","....#####....",".....###....."]},{name:"mathanomical-void",map:["#....#....#..","...#.....#...",".....#.......","..#.......#..","....#..#.....","#.......#....","....#........","..#....#.....",".....#....#.."]}]};let ut=null;function an(t){if(!t||!t.length)return null;const n=t.length,a=t[0].length,r=Math.max(1,Math.floor(Math.min((j-2)/a,(L-2)/n))),s=Math.max(0,Math.floor((j-a*r)/2)),c=Math.max(0,Math.floor((L-n*r)/2)),m=Array.from({length:L},()=>Array(j).fill(!1));for(let y=0;y<n;y++)for(let x=0;x<a;x++)if(t[y][x]==="#")for(let b=0;b<r;b++)for(let $=0;$<r;$++){const v=c+y*r+b,z=s+x*r+$;v>=0&&v<L&&z>=0&&z<j&&(m[v][z]=!0)}return m}function Nt(){const t=wt(),n=Pt[t]||Pt.easy20,a=n[M(0,n.length-1)];a.name,ut=an(a.map)}function sn(){const t=M(20,99),n=M(0,99),a=M(0,2);if(a===0)return Kt(t,n);const r=a===1?"word-digit":"digit-word",s=a===1?"word-and-digit":"word-digit",c=Xt(t,r),m=oa(n,s);return`${c}&${m}`}function rn(){const t=M(20,99),n=M(0,999),a=M(0,2);if(a===0){const y=Et(t),x=String(n).padStart(3,"0");return`${y}.${x}`}const r=a===1?"word-digit":"digit-word",s=a===1?"word-and-digit":"word-digit-word",c=Xt(t,r),m=ca(n,s);return`${c}&${m}`}function kt(){let t=M(2,30),a=`${(t/10).toFixed(1)}*10`;const r=M(0,2);for(let s=0;s<r;s++)if(Math.random()<.6){const c=M(2,5);t*=c,a+=`*${c}`}else{const c=[];for(let m=2;m<=9;m++)t%m===0&&c.push(m);if(c.length===0){const m=M(2,5);t*=m,a+=`*${m}`}else{const m=c[M(0,c.length-1)];t=t/m,a+=`/${m}`}}return{expr:a,value:t}}function ln(t){const n=t.includes("+")||t.includes("-"),a=t.includes("*")||t.includes("/");if(!n&&a)return kt().expr;if(n&&!a){const c=M(2,4);let m=`${M(1,9)}.${M(0,9)}`;for(let y=1;y<c;y++){const x=Math.random()<.5?"+":"-",b=`${M(1,9)}.${M(0,9)}`;m+=`${x}${b}`}return m}const r=M(2,4);let s=kt().expr;for(let c=1;c<r;c++){const m=Math.random()<.5?"+":"-",y=kt().expr;s+=`${m}${y}`}return s}function on(t,n,a){if(t.length>=a)return t.slice(0,a);let r=t;const s=n.includes("+")||n.includes("-"),c=n.includes("*")||n.includes("/");for(;r.length<a;)s&&r.length+2<=a?r+="+0":c&&r.length+2<=a?r+="*1":r+="0";return r.slice(0,a)}function cn(t,n=j){for(let r=0;r<400;r++){let s=ln(t);if(s.length>n&&(s=dn(s,n)),s=on(s,t,n),s.length!==n)continue;const c=lt(s,t);if(c!==null&&!(Math.abs(c-Math.round(c))>ae))return s}return"0".repeat(n)}function dn(t,n){const a=t.match(/(\d+\.\d+|\d+|[+\-*/])/g)||[];let r="";for(let s=0;s<a.length;s++){let c=a[s];if(/\d+\.\d+/.test(c)&&r.length+c.length>n){const[m,y]=c.split(".");let x=y;for(;x.length>0&&r.length+(m+"."+x).length>n;)x=x.slice(0,-1);x.length===0?c=m:c=m+"."+x}if(r.length+c.length>n)break;r+=c}return r}function mn(t=j){const a=o&&o.value||"easy20",r=a==="easy25",s=a==="easy30";for(let c=0;c<200;c++){let y=(s?rn():r?sn():Kt()).replace(/[^a-z0-9\-\.&]/g,"").toLowerCase();if(y.length>t&&(y=y.replace(/-+/g,"-"),y.length>t))continue;const x=t-y.length,b=Math.floor(x/2),$=x-b,v="-".repeat(b)+y+"-".repeat($),z=v.replace(/^-+|-+$/g,"");if(xt(z)!==null)return v}return"one".repeat(Math.ceil(t/3)).slice(0,t)}function lt(t,n){if(!/^[0-9\.\+\-\*\/\s]+$/.test(t))return null;for(const x of t)if((x==="+"||x==="-"||x==="*"||x==="/")&&!n.includes(x))return null;const a=[];let r=0;for(;r<t.length;){const x=t[r];if(x===" "){r++;continue}if(x>="0"&&x<="9"||x==="."){let b=r;for(;b<t.length&&(t[b]>="0"&&t[b]<="9"||t[b]===".");)b++;const $=t.slice(r,b),v=Number($);if(!isFinite(v))return null;a.push({type:"num",value:v}),r=b;continue}if("+-*/".includes(x)){a.push({type:"op",value:x}),r++;continue}return null}function s(x){return x==="+"||x==="-"?1:x==="*"||x==="/"?2:0}const c=[],m=[];for(const x of a)if(x.type==="num")c.push(x);else{for(;m.length&&s(m[m.length-1].value)>=s(x.value);)c.push(m.pop());m.push(x)}for(;m.length;)c.push(m.pop());const y=[];for(const x of c)if(x.type==="num")y.push(x.value);else{if(y.length<2)return null;const b=y.pop(),$=y.pop();let v;switch(x.value){case"+":v=$+b;break;case"-":v=$-b;break;case"*":v=$*b;break;case"/":if(b===0)return null;v=$/b;break;default:return null}y.push(v)}return y.length!==1?null:y[0]}function ht(t=j,n=L){j=t,L=n,_=[];for(let a=0;a<L;a++){const r=[];for(let s=0;s<j;s++)r.push(null);_.push(r)}}function un(t,n){for(let a=0;a<j;a++)_[t][a]={ch:n[a]||"0"}}function hn(){for(let t=0;t<L;t++)for(let n=0;n<j;n++)if(_[t][n])return!0;return!1}function pt(){let t=document.getElementById("decimalGameCanvas");if(!t){t=document.createElement("canvas"),t.id="decimalGameCanvas",t.style.display="block",t.style.marginTop="8px";const n=document.getElementById("canvasAnchor");n?n.appendChild(t):h.insertAdjacentElement("afterend",t)}V=t,p=V.getContext("2d"),_t(),V.removeEventListener("click",Ct),V.addEventListener("click",Ct)}function _t(){if(!V)return;const t=Ee*fe,n=Se*fe;N=Math.min(t/j,n/L);const r=j*N,s=L*N;oe=Math.floor((t-r)/2),Ce=Math.floor((n-s)/2),V.width=Math.round(t),V.height=Math.round(n)}function Lt(t,n){const a=(J==null?void 0:J.primary)||"#1f77b4",r=(J==null?void 0:J.secondary)||a,s=p.createLinearGradient(t,n,t+N,n+N);return s.addColorStop(0,a),s.addColorStop(1,r),s}function te(){if(p){_t(),p.clearRect(0,0,V.width,V.height);for(let t=0;t<L;t++)for(let n=0;n<j;n++){const a=oe+n*N,r=Ce+t*N,s=ut&&ut[t]&&ut[t][n];p.fillStyle=s?"#0b3a4a":"#041218",p.fillRect(a,r,N,N),p.strokeStyle=s?"#1b5566":"#07202a",p.strokeRect(a+.5,r+.5,N-1,N-1);const c=_[t][n];c?(p.fillStyle=Lt(a,r),St(p,a+2,r+2,N-4,N-4,4),s&&(p.fillStyle="rgba(255, 255, 255, 0.18)",St(p,a+2,r+2,N-4,N-4,4)),p.fillStyle="#fff",p.font=`700 ${Math.max(14,Math.floor(N*.7))}px monospace`,p.textAlign="center",p.textBaseline="middle",p.fillText(c.ch,a+N/2,r+N/2+1)):s&&(p.fillStyle="rgba(255, 255, 255, 0.16)",p.beginPath(),p.arc(a+N/2,r+N/2,Math.max(1,N*.12),0,Math.PI*2),p.fill())}if(C){const{blocks:t,row:n,col:a}=C;for(let r=0;r<t.length;r++){const s=t[r],c=s.ch,m=oe+(a+s.c)*N,y=Ce+(n+s.r)*N;p.fillStyle=Lt(m,y),St(p,m+2,y+2,N-4,N-4,4),p.strokeStyle="#0ea5a4",p.strokeRect(m+2,y+2,N-4,N-4),p.fillStyle="#fff",p.font=`700 ${Math.max(14,Math.floor(N*.7))}px monospace`,p.textAlign="center",p.textBaseline="middle",p.fillText(c,m+N/2,y+N/2+1)}}R!==null&&(p.fillStyle="rgba(255,255,255,0.06)",p.fillRect(oe,Ce+R*N,j*N,N))}}function St(t,n,a,r,s,c,m,y){t.beginPath(),t.moveTo(n+c,a),t.arcTo(n+r,a,n+r,a+s,c),t.arcTo(n+r,a+s,n,a+s,c),t.arcTo(n,a+s,n,a,c),t.arcTo(n,a,n+r,a,c),t.closePath(),t.fill()}function ft(t,n,a){const r=t.blocks;for(let s=0;s<r.length;s++){const c=n+r[s].r,m=a+r[s].c;if(m<0||m>=j||c>=L||c>=0&&_[c][m])return!1}return!0}function pn(){if(!C)return;const{blocks:t,row:n,col:a}=C;for(let s=0;s<t.length;s++){const c=n+t[s].r,m=a+t[s].c;if(c>=0&&c<L&&m>=0&&m<j)_[c][m]={ch:t[s].ch};else{In();return}}C=null;const r=[];for(let s=0;s<L;s++)_[s].every(c=>c!==null)&&r.push(s);if(r.length>0)Tt(r[0]),E.textContent="Row filled — solve when ready.";else{const s=[];for(let c=0;c<j;c++)_.every(m=>m[c]!==null)&&s.push(c);s.length>0?(Sn(s[0]),E.textContent="Column filled — solve when ready."):(R=null,O=null)}te()}const Rt=[{name:"I",blocks:[[0,0],[1,0],[2,0],[3,0]]},{name:"L",blocks:[[0,0],[1,0],[2,0],[2,1]]},{name:"T",blocks:[[0,0],[0,1],[0,2],[1,1]]},{name:"O",blocks:[[0,0],[0,1],[1,0],[1,1]]},{name:"I3",blocks:[[0,0],[1,0],[2,0]]},{name:"L3",blocks:[[0,0],[1,0],[1,1]]}];function fn(){return Rt[M(0,Rt.length-1)]}function yn(t){const n=M(1,25),a=M(1,2),r=M(0,Math.pow(10,a)-1),s=+`${n}.${String(r).padStart(a,"0")}`;let c=Et(s).replace(/[^a-z\-]/g,"").toLowerCase();if(c.length<t&&(c=c.padEnd(t,"-")),c.length>t){const m=M(0,Math.max(0,c.length-t));c=c.slice(m,m+t)}return c.split("")}function xn(t,n){let a=t>=3?`${M(1,9)}.${M(0,9)}`:`${M(0,9)}`;for(;a.length<t;){const r=a[a.length-1];n.length&&!"+-*/".includes(r)&&a.length<t-1&&Math.random()<.45?a+=n[M(0,n.length-1)]:a+=String(M(0,9))}return a.slice(0,t).split("")}function bn(t,n,a){return n==="easy"?yn(t):xn(t,a)}function gn(){if(C)return!1;const t=Ge(),n=t==="easy"?["+","-"]:t==="medium"?["*","/"]:["+","-","*","/"],r=fn().blocks.map(([y,x])=>({r:y,c:x,ch:""})),s=bn(r.length,t,n);for(let y=0;y<r.length;y++)r[y].ch=s[y];const c=Math.max(...r.map(y=>y.c))+1,m=M(0,Math.max(0,j-c));return C={blocks:r,row:0,col:m},te(),!0}function vn(){if(!C)return;const t=C.row+1;ft(C,t,C.col)?(C.row=t,te()):(pn(),gn())}function jn(){if(!C)return;const t=C.col-1;ft(C,C.row,t)&&(C.col=t,te())}function wn(){if(!C)return;const t=C.col+1;ft(C,C.row,t)&&(C.col=t,te())}function Nn(){if(!C)return;const t=C.blocks.map(m=>({r:m.r,c:m.c,ch:m.ch})),n=Math.max(...t.map(m=>m.r));Math.max(...t.map(m=>m.c));const a=t.map(m=>({r:m.c,c:n-m.r,ch:m.ch})),r=Math.max(...a.map(m=>m.c))+1;let s=C.col;s+r>j&&(s=Math.max(0,j-r));const c={blocks:a,row:C.row,col:s};ft(c,c.row,c.col)&&(C.blocks=a,C.col=s,te())}function kn(){ze();const t=Ge();me=Je[t]||125e4,ye=performance.now(),X=setTimeout(()=>{I=!1,E.textContent="Round time expired",ze(),w&&(w.style.display="none")},me),Y&&clearInterval(Y),Y=setInterval(()=>{if(!X)return;const n=performance.now()-ye,a=Math.max(0,me-n);g.textContent=(a/1e3).toFixed(1)},100)}function ze(){X&&(clearTimeout(X),X=null),Y&&(clearInterval(Y),Y=null)}function Tt(t){R=t,O=null;const n=_[t].map(s=>s?s.ch:"").join("").trim();ce=n,xe=null,h.textContent=`Solve row ${t+1}: ${n}`;const a=Ge(),r=Wt(n,a);Dt(n,a)||i&&(i.textContent=r),te()}function Sn(t){O=t,R=null;const n=_.map(s=>s[t]?s[t].ch:"").join("").trim();xe=n,ce=null,h.textContent=`Solve column ${t+1}: ${n}`;const a=Ge(),r=Wt(n,a);Dt(n,a)||i&&(i.textContent=r),te()}function Bt(){if(!h)return null;const t=h.textContent||"",n=t.indexOf(":");return n===-1?null:t.slice(n+1).trim()||null}function Cn(t){if(R===null)return;let n=Bt()||ce||_[R].map(m=>m?m.ch:"").join("");n=n.replace(/^[+\-*/]+/,"").replace(/[+\-*/]+$/,"");const a=Ge();if(a==="easy"){const m=n.replace(/^-+|-+$/g,""),y=xt(m);if(y===null)return E.textContent="Row word invalid",!1;const x=Number(t);return isFinite(x)?Math.abs(y-x)<=.001?(At(R),K+=8,q++,ot(),E.textContent="Correct — row cleared",R=null,ce=null,He(!0,8),!0):(q=0,E.textContent=`Incorrect — expected ${qe(y)}`,He(!1,0),!1):(E.textContent="Invalid number",!1)}const s=lt(n,a==="medium"?["+","-"]:["+","-","*","/"]);if(s===null)return E.textContent="Row expression invalid",!1;const c=Number(t);return isFinite(c)?Math.abs(c-s)<=.001?(At(R),K+=10,q++,ot(),E.textContent="Correct — row cleared",R=null,ce=null,He(!0,10),!0):(q=0,E.textContent=`Incorrect — expected ${qe(s)}`,He(!1,0),!1):(E.textContent="Invalid number",!1)}function Mn(t){if(O===null)return;let n=Bt()||xe||_.map(m=>m[O]?m[O].ch:"").join("");n=n.replace(/^[+\-*/]+/,"").replace(/[+\-*/]+$/,"");const a=Ge();if(a==="easy"){const m=n.replace(/^-+|-+$/g,""),y=xt(m);if(y===null)return E.textContent="Column word invalid",!1;const x=Number(t);return isFinite(x)?Math.abs(y-x)<=.001?(It(O),K+=8,q++,ot(),E.textContent="Correct — column cleared",O=null,xe=null,He(!0,8),!0):(q=0,E.textContent=`Incorrect — expected ${qe(y)}`,He(!1,0),!1):(E.textContent="Invalid number",!1)}const s=lt(n,a==="medium"?["+","-"]:["+","-","*","/"]);if(s===null)return E.textContent="Column expression invalid",!1;const c=Number(t);return isFinite(c)?Math.abs(c-s)<=.001?(It(O),K+=10,q++,ot(),E.textContent="Correct — column cleared",O=null,xe=null,He(!0,10),!0):(q=0,E.textContent=`Incorrect — expected ${qe(s)}`,He(!1,0),!1):(E.textContent="Invalid number",!1)}function At(t){for(let n=0;n<j;n++)_[t][n]=null;if(Me>0&&(Me--,Me===0&&(E.textContent="No more drops — clear the remaining rows to win!")),Me===0&&!hn()){Fn();return}te()}function It(t){for(let n=L-1;n>=0;n--)_[n][t]=null;te()}function Ft(t,n){let a=t.trim();return n==="easy"?a=a.replace(/^-+|-+$/g,""):a=a.replace(/^[+\-*/]+/,"").replace(/[+\-*/]+$/,""),a}function Dt(t,n){if(de<=0||Math.random()>.18)return!1;const a=Ft(t,n);let r=null;return n==="easy"?r=xt(a):r=lt(a,n==="medium"?["+","-"]:["+","-","*","/"]),r===null?!1:(de-=1,i&&(i.textContent=`Answer reveal (${3-de}/3): ${qe(r)}`),!0)}function Wt(t,n){const a=Ft(t,n);if(!a)return"Hint: click a full row to solve it.";if(n==="easy"){if(a.includes("&")){const[y,x]=a.split("&");return`Hint: "${y}" is the whole number and "${x}" are hundredths.`}const s=a.split("."),c=s[0]?s[0].replace(/-/g," "):"",m=s[1]||"";return c&&m?`Hint: word part "${c}" and decimal digits ".${m}".`:"Hint: convert the word to a number, then append the decimal digits shown."}if(n==="medium"){const s=a.match(/(\d+\.\d+|\d+|[+\-])/g)||[];if(s.length>=3){const c=Number(s[0]),m=s[1],y=Number(s[2]);if(isFinite(c)&&isFinite(y)){const x=m==="+"?c+y:c-y;return`Hint: first do ${s[0]}${m}${s[2]} = ${qe(x)}, then continue left to right.`}}return"Hint: add and subtract left to right, keep one decimal place."}const r=a.match(/(\d+\.\d+|\d+|[+\-*/])/g)||[];for(let s=0;s<r.length;s++)if(r[s]==="*"||r[s]==="/"){const c=Number(r[s-1]),m=Number(r[s+1]);if(isFinite(c)&&isFinite(m)&&(r[s]!=="/"||m!==0)){const y=r[s]==="*"?c*m:c/m;return`Hint: resolve ${r[s-1]}${r[s]}${r[s+1]} = ${qe(y)} first.`}}if(r.length>=3){const s=Number(r[0]),c=r[1],m=Number(r[2]);if(isFinite(s)&&isFinite(m)){const y=c==="+"?s+m:s-m;return`Hint: start with ${r[0]}${c}${r[2]} = ${qe(y)}.`}}return"Hint: do multiplication/division before addition/subtraction."}w&&(w.style.display="",$e||($e=t=>{if(t.key==="Enter"){const n=w.value.trim();if(w.value="",!n)return;if(R===null&&O===null){E.textContent="Click a full row to select it then answer.";return}R!==null?Cn(n):Mn(n)}}),w.removeEventListener("keydown",$e),w.addEventListener("keydown",$e));function Ct(t){if(!V)return;const n=V.getBoundingClientRect(),a=V.width/n.width,r=V.height/n.height;(t.clientX-n.left)*a-oe;const s=(t.clientY-n.top)*r-Ce,c=Math.floor(s/N);if(c>=0&&c<L&&_[c].every(m=>m!==null)){Tt(c),E.textContent="Row selected — solve when ready.";return}R=null,O=null,B||(h.textContent="Select a full row to solve"),te()}const Ht=t=>{if(ie){t.key==="ArrowLeft"&&(ee.left=!0,t.preventDefault()),t.key==="ArrowRight"&&(ee.right=!0,t.preventDefault()),t.key==="ArrowUp"&&(ee.up=!0,t.preventDefault()),t.key==="ArrowDown"&&(ee.down=!0,t.preventDefault()),t.key===" "&&(Jt(),t.preventDefault());return}!I||B||(t.key==="ArrowLeft"&&(jn(),t.preventDefault()),t.key==="ArrowRight"&&(wn(),t.preventDefault()),t.key==="ArrowDown"&&(vn(),t.preventDefault()),(t.key==="ArrowUp"||t.key.toLowerCase()==="r"||t.key===" ")&&(Nn(),t.preventDefault()))},Gt=t=>{ie&&(t.key==="ArrowLeft"&&(ee.left=!1),t.key==="ArrowRight"&&(ee.right=!1),t.key==="ArrowUp"&&(ee.up=!1),t.key==="ArrowDown"&&(ee.down=!1))};window.addEventListener("keydown",Ht),window.addEventListener("keyup",Gt);function ot(){f&&(f.textContent=String(K)),S&&(S.textContent=String(q))}function qt(){re&&(re.innerHTML="",it.forEach(t=>{const n=document.createElement("div");n.className="swatch",n.style.background=`linear-gradient(135deg, ${t.primary} 0%, ${t.secondary} 100%)`,n.dataset.color=t.primary,n.addEventListener("click",()=>{re.querySelectorAll(".swatch").forEach(a=>a.classList.remove("selected")),n.classList.add("selected"),J=t,pe&&(pe.style.background=`linear-gradient(135deg, ${t.primary} 0%, ${t.secondary} 100%)`),te()}),re.appendChild(n),(t.primary===(J==null?void 0:J.primary)||!J&&re.children.length===1)&&(n.classList.add("selected"),J=t,pe&&(pe.style.background=`linear-gradient(135deg, ${t.primary} 0%, ${t.secondary} 100%)`))}))}function ct(){const t=Number(P==null?void 0:P.value)||j,n=Number(W==null?void 0:W.value)||L,a=Number(A==null?void 0:A.value)||fe;ne&&(ne.textContent=`${t}×${n} @${a}px`)}function $n(){jt(),Nt(),ct(),qt(),Ie||(Ie=()=>{const t=at(Number(P.value)||j,8,30),n=15,a=at(Number(A.value)||N,20,48),r=I;r&&Mt(),j=t,L=n,N=a,fe=a,ht(j,L),pt(),te(),ct(),r&&yt()}),l||(l=()=>ct()),Fe||(Fe=()=>{jt(),Nt(),ct(),ht(j,L),pt(),te()}),De||(De=()=>{if(I){E.textContent="Game already running";return}yt()}),k||(k=()=>Ot()),Q==null||Q.removeEventListener("click",Ie),Q==null||Q.addEventListener("click",Ie),A==null||A.removeEventListener("input",l),P==null||P.removeEventListener("input",l),W==null||W.removeEventListener("input",l),A==null||A.addEventListener("input",l),P==null||P.addEventListener("input",l),W==null||W.addEventListener("input",l),o==null||o.removeEventListener("change",Fe),o==null||o.addEventListener("change",Fe),u==null||u.removeEventListener("click",De),u==null||u.addEventListener("click",De),d==null||d.removeEventListener("click",k),d==null||d.addEventListener("click",k)}function En(t=1,n=100){return(M(t*10,n*10)/10).toFixed(1)}function Pn(){const t=En(1,100),n=M(1,10)*10,a=n.toFixed(1),r=Number(t)*n;return{expr:`${t}*${a}`,value:r}}function _n(){const t=M(10,200)/10,n=Math.floor(100/t);if(n<1)return null;const a=M(1,Math.min(12,n)),r=t*a;return r>100?null:{expr:`${r.toFixed(1)}/${t.toFixed(1)}`,value:a}}function Ln(){const n=M(2,200)*5/10,a=`${n.toFixed(1)}*10.0/5.0`,r=n*2;return{expr:a,value:r}}function Rn(t,n){let a=t;for(;a.length<n;)a.length+4<=n?a+="+0.0":a+="0";return a.slice(0,n)}function Tn(t=j){const n=[Pn,_n,Ln],a=400;for(let r=0;r<a;r++){const s=M(3,5);let c="",m=0;for(let b=0;b<s;b++){const $=n[M(0,n.length-1)],v=$();if(!v){b--;continue}if(b===0)c=v.expr,m=v.value;else{const z=Math.random()<.5?"+":"-";c+=z+v.expr,m=z==="+"?m+v.value:m-v.value}}if(!c.includes(".")||c.length>t)continue;const y=Rn(c,t),x=lt(y,["+","-","*","/"]);if(x!==null&&!(Math.abs(x-Math.round(x))>ae))return y}return"0".repeat(t)}function Bn(t,n=j){return t==="easy"?mn(n):t==="medium"?cn(["+","-"],n):Tn(n)}function An(){const t=Ge();for(let n=0;n<L;n++){const a=Bn(t,j);un(n,a)}}function yt(){I=!0,B=!1,K=0,q=0,R=null,O=null,jt(),Nt(),ht(j,L),Me=10,de=3,An(),pt(),te(),kn(),ot(),E.textContent="Game started — clear rows before the timer ends",h.textContent="Click a full row to solve it.",d.disabled=!1,d.textContent="Pause",w&&(w.style.display="");const t=nt(),n=dt(t,"decimal");n.gamesPlayed+=1,mt(t)}function Mt(){I=!1,B=!1,ze(),F&&(F.style.display="none"),ie=!1,C=null,R=null,O=null,E.textContent="Stopped",d.disabled=!0,w&&(w.style.display="none")}function In(){I=!1,ze(),F&&(F.style.display="none"),ie=!1,h.textContent="Game Over",E.textContent=`Game over — score ${K}`,w&&(w.style.display="none");const t=nt(),n=dt(t,"decimal");n.bestScore=Math.max(n.bestScore,K),mt(t)}function Fn(){I=!1,ze(),h.textContent="You win!",E.textContent=`All rows cleared — score ${K}`,w&&(w.style.display="none");const t=nt(),n=dt(t,"decimal");n.bestScore=Math.max(n.bestScore,K),mt(t),U=qn((o==null?void 0:o.value)||"easy20"),Wn()}function Ot(){if(I)if(B=!B,B){if(d.textContent="Resume",X&&ye){const t=performance.now()-ye;me=Math.max(0,me-t),ze()}E.textContent="Paused",w&&(w.style.display="")}else d.textContent="Pause",ye=performance.now(),X=setTimeout(()=>{I=!1,E.textContent="Round time expired",ze(),w&&(w.style.display="none")},me),E.textContent="Resumed",w&&(w.style.display="")}it.length&&(J=it[0],pe&&(pe.style.background=`linear-gradient(135deg, ${it[0].primary} 0%, ${it[0].secondary} 100%)`)),P&&(P.value=j),W&&(W.value=L),A&&(A.value=fe),ct(),ht(j,L),pt(),te(),qt(),$n(),window.DecimalTetris={startGame:()=>yt(),stopGame:()=>Mt(),togglePause:()=>Ot(),getState:()=>({running:I,paused:B,score:K,streak:q,COLS:j,ROWS:L,CELL_SIZE:N,BLOCK_COLOR:(J==null?void 0:J.primary)||J,targetRows:nn})};function Dn(){if(F)return;const t=document.querySelector(".decimal-page");if(!t)return;F=document.createElement("div"),F.className="decimal-mini-game",F.innerHTML=`
      <div class="decimal-mini-card">
        <div class="decimal-mini-header">
          <span>Synthe Battle</span>
          <span id="decimalMiniHealthText">150 hits</span>
        </div>
        <div class="decimal-mini-bar"><div class="decimal-mini-bar-fill"></div></div>
        <div class="decimal-mini-benny-bar"><div class="decimal-mini-benny-bar-fill"></div></div>
        <div class="decimal-mini-arena"></div>
        <div class="decimal-mini-controls" aria-hidden="true">
          <div class="decimal-mini-joystick" id="decimalMiniJoystick">
            <div class="decimal-mini-stick" id="decimalMiniStick"></div>
          </div>
          <button type="button" class="decimal-mini-shoot" id="decimalMiniShoot">Dis arm synthe</button>
        </div>
      </div>
    `,t.appendChild(F),le=F.querySelector(".decimal-mini-arena"),Pe=F.querySelector(".decimal-mini-bar-fill"),_e=F.querySelector("#decimalMiniHealthText"),Le=F.querySelector(".decimal-mini-benny-bar-fill"),H=document.createElement("div"),H.className="decimal-mini-benny",H.innerHTML=`
      <div class="benny-body"></div>
      <div class="benny-head"></div>
      <div class="benny-leg left"></div>
      <div class="benny-leg right"></div>
    `,le.appendChild(H);const n=F.querySelector(".decimal-mini-controls");ve=F.querySelector("#decimalMiniJoystick"),Te=F.querySelector("#decimalMiniStick"),Be=F.querySelector("#decimalMiniShoot");const a=()=>{Ae=!1,Ye={x:0,y:0},Te&&(Te.style.transform="translate(-50%, -50%)")},r=(s,c)=>{const m=s-et.x,y=c-et.y,x=Math.hypot(m,y),b=x>0?Math.min(1,tt/x):0,$=m*b,v=y*b;Ye={x:$/tt,y:v/tt},Te&&(Te.style.transform=`translate(calc(-50% + ${$}px), calc(-50% + ${v}px))`)};if(ve&&(ve.addEventListener("touchstart",s=>{const c=s.touches[0],m=ve.getBoundingClientRect();et={x:m.left+m.width/2,y:m.top+m.height/2},Ae=!0,r(c.clientX,c.clientY),s.preventDefault()},{passive:!1}),ve.addEventListener("touchmove",s=>{if(!Ae)return;const c=s.touches[0];r(c.clientX,c.clientY),s.preventDefault()},{passive:!1}),ve.addEventListener("touchend",a),ve.addEventListener("touchcancel",a)),Be){const s=c=>{c&&c.preventDefault(),Jt()};Be.addEventListener("touchstart",s,{passive:!1}),Be.addEventListener("pointerdown",s),Be.addEventListener("click",s)}!("ontouchstart"in window)&&n&&(n.style.display="none")}function Wn(){if(Dn(),!F||!le||!H)return;ie=!0,F.style.display="flex",ge=150,Re=st,ue=[],he=[],ee={left:!1,right:!1,up:!1,down:!1},Ve={x:1,y:0},be.forEach(r=>r.remove()),be=[],Pe&&(Pe.style.width="100%"),_e&&(_e.textContent=`${ge} hits`),Le&&(Le.style.width="100%");const t=le.getBoundingClientRect();H.dataset.x=String(t.width*.2),H.dataset.y=String(t.height*.7),H.style.transform=`translate(${H.dataset.x}px, ${H.dataset.y}px)`;const n=Ge(),a=n==="easy"?1:n==="medium"?2:3;for(let r=0;r<a;r++){const s=document.createElement("div");s.className="decimal-mini-shape",s.innerHTML="<span></span><span></span><span></span><span></span>";const c=t.width*(.6+Math.random()*.3),m=t.height*(.2+Math.random()*.6);s.dataset.x=String(c),s.dataset.y=String(m),s.dataset.speed=String(.7+Math.random()*.4),s.style.transform=`translate(${c}px, ${m}px)`,le.appendChild(s),be.push(s)}Ze=performance.now()+1200,Z&&cancelAnimationFrame(Z),Z=requestAnimationFrame(Vt)}function Hn(){ie=!1,Z&&cancelAnimationFrame(Z),Z=null,ue.forEach(t=>t.remove()),ue=[],he.forEach(t=>t.remove()),he=[],F&&(F.style.display="none"),E.textContent="Benny disarmed the synthe!",h.textContent="Press Start to play again.",Ut()}function Gn(){ie=!1,Z&&cancelAnimationFrame(Z),Z=null,ue.forEach(t=>t.remove()),ue=[],he.forEach(t=>t.remove()),he=[],F&&(F.style.display="none"),E.textContent="Its ok benny just needs a nap",h.textContent="Resting...",setTimeout(()=>{Ut()},4e3)}function qn(t){const n=["easy20","easy25","easy30","medium","mathamatical"],a=n.indexOf(t);return a===-1||a===n.length-1?t:n[a+1]}function Ut(){U&&(o&&(o.value=U),U=null,yt())}function Jt(){if(!ie||!le||!H)return;const t=parseFloat(H.dataset.x||"0"),n=parseFloat(H.dataset.y||"0"),a=Ve.x||1,r=Ve.y||0;[-6,6].forEach(c=>{const m=document.createElement("div");m.className="decimal-mini-shot",m.textContent="−",m.dataset.x=String(t+18),m.dataset.y=String(n+18+c),m.dataset.vx=String(a*6),m.dataset.vy=String(r*6),le.appendChild(m),ue.push(m)})}function On(){const t=M(2,9),n=M(1,9),a=Math.random()<.5?"+":"-";return{text:`${t}${a}${n}`}}function Vt(){if(!ie||!le||!H)return;const t=le.getBoundingClientRect(),n=40,a=56;let r=parseFloat(H.dataset.x||"0"),s=parseFloat(H.dataset.y||"0");const c=Ae?Ye.x:(ee.right?1:0)-(ee.left?1:0),m=Ae?Ye.y:(ee.down?1:0)-(ee.up?1:0);if(c||m){const b=Math.hypot(c,m)||1;Ve={x:c/b,y:m/b}}const y=3.2;r=at(r+c*y,0,Math.max(0,t.width-n)),s=at(s+m*y,0,Math.max(0,t.height-n)),H.dataset.x=String(r),H.dataset.y=String(s),H.style.transform=`translate(${r}px, ${s}px)`,be.forEach((b,$)=>{let v=parseFloat(b.dataset.x||"0"),z=parseFloat(b.dataset.y||"0");const je=r-v,we=s-z,Ke=Math.max(1,Math.hypot(je,we)),Xe=parseFloat(b.dataset.speed||"1.1"),se=($%2===0?1:-1)*.4;v=at(v+je/Ke*Xe+se,0,Math.max(0,t.width-a)),z=at(z+we/Ke*Xe-se,0,Math.max(0,t.height-a)),b.dataset.x=String(v),b.dataset.y=String(z),b.style.transform=`translate(${v}px, ${z}px)`});const x=performance.now();x>=Ze&&(Ze=x+1400,be.forEach(b=>{const $=parseFloat(b.dataset.x||"0"),v=parseFloat(b.dataset.y||"0"),z=r-$,je=s-v,we=Math.max(1,Math.hypot(z,je)),Ke=z/we*2.4,Xe=je/we*2.4,se=document.createElement("div");se.className="decimal-mini-enemy-shot";const Yt=On();se.textContent=Yt.text,se.dataset.x=String($+a/2),se.dataset.y=String(v+a/2),se.dataset.vx=String(Ke),se.dataset.vy=String(Xe),le.appendChild(se),he.push(se)})),ue=ue.filter(b=>{let $=parseFloat(b.dataset.x||"0"),v=parseFloat(b.dataset.y||"0");const z=parseFloat(b.dataset.vx||"0"),je=parseFloat(b.dataset.vy||"0");if($+=z,v+=je,b.dataset.x=String($),b.dataset.y=String(v),b.style.transform=`translate(${$}px, ${v}px)`,$<-20||v<-20||$>t.width+20||v>t.height+20)return b.remove(),!1;for(let we=0;we<be.length;we++){const Ke=be[we],Xe=parseFloat(Ke.dataset.x||"0"),se=parseFloat(Ke.dataset.y||"0");if($+10>Xe&&$<Xe+a&&v+10>se&&v<se+a)return b.remove(),ge=Math.max(0,ge-1),Pe&&(Pe.style.width=`${ge/150*100}%`),_e&&(_e.textContent=`${ge} hits`),ge<=0&&Hn(),!1}return!0}),he=he.filter(b=>{let $=parseFloat(b.dataset.x||"0"),v=parseFloat(b.dataset.y||"0");const z=parseFloat(b.dataset.vx||"0"),je=parseFloat(b.dataset.vy||"0");return $+=z,v+=je,b.dataset.x=String($),b.dataset.y=String(v),b.style.transform=`translate(${$}px, ${v}px)`,$<-40||v<-40||$>t.width+40||v>t.height+40?(b.remove(),!1):$+14>r&&$<r+n&&v+14>s&&v<s+n?(b.remove(),H.classList.add("hit"),setTimeout(()=>H.classList.remove("hit"),180),Re=Math.max(0,Re-1),Le&&(Le.style.width=`${Re/st*100}%`),Re<=0&&Gn(),!1):!0}),Z=requestAnimationFrame(Vt)}window.__DecimalCleanup=()=>{window.removeEventListener("keydown",Ht),window.removeEventListener("keyup",Gt),Z&&cancelAnimationFrame(Z),Z=null,ie=!1,V&&V.removeEventListener("click",Ct),w&&$e&&w.removeEventListener("keydown",$e),Q==null||Q.removeEventListener("click",Ie),o==null||o.removeEventListener("change",Fe),u==null||u.removeEventListener("click",De),d==null||d.removeEventListener("click",k),A==null||A.removeEventListener("input",l),P==null||P.removeEventListener("input",l),W==null||W.removeEventListener("input",l);try{Mt()}catch{}}}function xa(){return D.useEffect(()=>(ya(),()=>{window.__DecimalCleanup&&window.__DecimalCleanup()}),[]),e.jsxs("main",{className:"game-shell app decimal-page game-page--decimal",children:[e.jsxs("header",{className:"game-shell__header",children:[e.jsx(T,{to:"/list",className:"back-link",id:"backBtn",children:"Back"}),e.jsx("h1",{children:"Deci-What?"}),e.jsxs("div",{className:"game-shell__controls controls",children:[e.jsx("label",{htmlFor:"level",children:"Level"}),e.jsxs("select",{id:"level",defaultValue:"easy20",children:[e.jsx("option",{value:"easy20",children:"Easy .20 — words to number"}),e.jsx("option",{value:"easy25",children:"Easy .25 — words to number"}),e.jsx("option",{value:"easy30",children:"Easy .30 — words to number"}),e.jsx("option",{value:"medium",children:"Medium — add/subtract decimals"}),e.jsx("option",{value:"mathamatical",children:"Mathanomical — all ops"})]}),e.jsx("button",{id:"start",onClick:()=>{var o,u;return(u=(o=window.DecimalTetris)==null?void 0:o.startGame)==null?void 0:u.call(o)},children:"Start"}),e.jsx("button",{id:"pause",disabled:!0,onClick:()=>{var o,u;return(u=(o=window.DecimalTetris)==null?void 0:o.togglePause)==null?void 0:u.call(o)},children:"Pause"})]})]}),e.jsxs("section",{className:"settings-row",children:[e.jsxs("div",{className:"grid-controls",children:[e.jsxs("label",{children:["Columns",e.jsx("input",{id:"colsInput",type:"number",min:"8",max:"24",step:"1",defaultValue:"15"})]}),e.jsxs("label",{children:["Rows",e.jsx("input",{id:"rowsInput",type:"number",min:"10",max:"30",step:"1",defaultValue:"15"})]}),e.jsxs("label",{children:["Cell size",e.jsx("input",{id:"cellSizeInput",type:"range",min:"20",max:"48",step:"1",defaultValue:"28"})]}),e.jsx("button",{id:"applyGridBtn",children:"Apply Grid"}),e.jsxs("div",{className:"grid-info",children:["Grid: ",e.jsx("span",{id:"gridPreview",children:"15×18 @28px"})]})]}),e.jsxs("div",{className:"palette-controls",children:[e.jsx("div",{className:"palette-title",children:"Block color (choose one of 50 acrylics)"}),e.jsx("div",{id:"palette",className:"palette",role:"list"}),e.jsxs("div",{className:"selected-color",children:["Selected:",e.jsx("span",{id:"selectedColorPreview",className:"color-swatch"})]})]})]}),e.jsxs("section",{className:"status-row",children:[e.jsxs("div",{className:"score",children:["Score: ",e.jsx("span",{id:"score",children:"0"})]}),e.jsxs("div",{className:"timer",children:["Time: ",e.jsx("span",{id:"timer",children:"0.0"}),"s"]}),e.jsxs("div",{className:"streak",children:["Streak: x",e.jsx("span",{id:"streak",children:"0"})]})]}),e.jsxs("section",{className:"problem-area game-shell__body",children:[e.jsxs("div",{className:"side-panel game-shell__panel",children:[e.jsxs("div",{className:"game-controls",children:[e.jsx("div",{className:"typed",children:e.jsx("input",{id:"answerInput",placeholder:"Type numeric answer and press Enter"})}),e.jsx("div",{className:"feedback",id:"feedback"})]}),e.jsx("div",{className:"prompt",id:"prompt",children:"Press Start to begin."}),e.jsx("div",{className:"hint",id:"hint"}),e.jsx("div",{className:"legend",children:"Click a full row to solve. Type the numeric value of the word + decimal shown."})]}),e.jsx("div",{className:"board-panel game-shell__board",children:e.jsx("div",{id:"canvasAnchor",className:"canvas-anchor"})})]}),e.jsx("footer",{children:e.jsx("small",{children:"Designed for learning decimal reading and operations. Block color is selectable."})})]})}function ba(){return Qe("/js/howtoplay.js","howtoplay"),Qe("/js/howto-benny.js","howto-benny"),D.useEffect(()=>()=>{window.__HowToPlayCleanup&&window.__HowToPlayCleanup()},[]),e.jsxs("div",{className:"background",children:[e.jsx("header",{className:"howto-header",children:e.jsxs("div",{className:"hero-card small",children:[e.jsx("h1",{children:"Few Rules from the dev"}),e.jsx("p",{className:"tagline",children:"Play fair, avoid calculators, and have fun learning. This world is about steady progress, not rushing the answer."}),e.jsx("button",{id:"throwBallBtn",className:"throw-btn",type:"button",children:"Throw Benny's Ball"})]})}),e.jsxs("main",{className:"campfire-scene","aria-label":"Campfire scene",children:[e.jsxs("section",{className:"campfire-stage","aria-label":"Campfire characters",children:[e.jsx("div",{className:"campfire",children:e.jsx("canvas",{id:"fireCanvas",width:"420",height:"260"})}),e.jsxs("div",{className:"booiiii","aria-label":"Mr. Boooiiii",children:[e.jsxs("div",{className:"hat",children:[e.jsx("div",{className:"hat-brim"}),e.jsx("span",{className:"dot"}),e.jsx("div",{className:"hat-top"})]}),e.jsxs("div",{className:"head",children:[e.jsx("span",{className:"eye"}),e.jsx("span",{className:"eye"}),e.jsx("span",{className:"mouth"})]}),e.jsxs("div",{className:"collar",children:[e.jsx("span",{className:"collar-left"}),e.jsx("span",{className:"collar-right"})]}),e.jsxs("div",{className:"torso",children:[e.jsx("span",{className:"torso-left"}),e.jsx("span",{className:"torso-right"})]}),e.jsxs("div",{className:"arms",children:[e.jsx("span",{className:"arm left"}),e.jsx("span",{className:"arm right"}),e.jsx("span",{className:"hand left"}),e.jsx("span",{className:"hand right"})]}),e.jsxs("div",{className:"lap-top",children:[e.jsx("span",{className:"laptop-back"}),e.jsx("span",{className:"laptop-seat"})]}),e.jsx("div",{className:"radius"}),e.jsx("span",{className:"radius one"}),e.jsx("span",{className:"radius two"}),e.jsxs("div",{className:"legs",children:[e.jsx("span",{className:"leg left"}),e.jsx("span",{className:"leg right"}),e.jsx("span",{className:"foot left"}),e.jsx("span",{className:"foot right"})]})]}),e.jsx("div",{className:"howto-benny","aria-label":"Benny",children:e.jsx("div",{className:"benny-base",children:e.jsxs("div",{className:"benny-shape",children:[e.jsx("div",{className:"back"}),e.jsx("div",{className:"leg-left"}),e.jsx("div",{className:"leg-right"}),e.jsx("div",{className:"head"})]})})})]}),e.jsxs("section",{className:"instructions","aria-label":"Quick tips",children:[e.jsx("h2",{children:"Quick Tips"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Math Pup: click the correct zombie or type the answer."}),e.jsx("li",{children:"Capture: solve the fraction prompt and pop the right bubble."}),e.jsx("li",{children:"Deci-What?: fill a row and solve it to clear."})]}),e.jsx(T,{id:"backLink",to:"/",className:"back-link",children:"Back Home"})]})]}),e.jsx("div",{id:"nightOverlay"})]})}function ga(){return e.jsxs("main",{className:"about-page",children:[e.jsx(T,{to:"/",className:"back-link",children:"Back"}),e.jsxs("header",{className:"about-hero",children:[e.jsx("h1",{children:"About"}),e.jsxs("p",{className:"about-subtitle",children:["Welcome to a platform for anyone. ",e.jsx("br",{}),"No matter where your from you can practice math and maybe have some fun ",e.jsx("br",{}),"Play with numbers and words that confuse the soul, ",e.jsx("br",{}),"fractions and decimals even santa doesn't know ",e.jsx("br",{}),"can you take your self serious and reach the goal? become a math wiz and maybe just maybe Mathanomical!"]})]}),e.jsxs("section",{className:"about-section",children:[e.jsx("h2",{children:"Mission"}),e.jsxs("p",{children:["Get better at basic and somewhat complex math. 2 sides here. One side a game. the other side a tool for parents and teachers.",e.jsx("br",{}),e.jsx("mark",{children:" have fun.... duh!"})]})]}),e.jsxs("section",{className:"about-section",children:[e.jsx("h2",{children:"Team"}),e.jsx("p",{children:" I would really like to get a team of like minded people to work on this project with me. If you're interested in building this with me email me daquota92@gmail.com "})]})]})}function va(){return Qe("/js/mathsynth.js","mathsynth"),D.useEffect(()=>()=>{window.__MathSynthCleanup&&window.__MathSynthCleanup()},[]),e.jsxs("main",{className:"game-shell app mathsynth game-page--mathsynth",children:[e.jsxs("header",{className:"game-shell__header",children:[e.jsx(T,{to:"/list",className:"back-link",id:"backBtn",children:"Back"}),e.jsx("h1",{children:"Ma+h 5Yn+h3"}),e.jsxs("div",{className:"game-shell__controls controls",children:[e.jsx("label",{htmlFor:"mathSynthLevel",className:"sr-only",children:"Level"}),e.jsxs("select",{id:"mathSynthLevel",defaultValue:"easy",children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"mathanomical",children:"Mathanomical"})]}),e.jsx("button",{id:"startMathSynth",onClick:()=>{var o,u;return(u=(o=window.MathSynth)==null?void 0:o.start)==null?void 0:u.call(o)},children:"Start"}),e.jsx("button",{id:"resetMathSynth",type:"button",onClick:()=>{var o,u;return(u=(o=window.MathSynth)==null?void 0:o.reset)==null?void 0:u.call(o)},children:"Reset"}),e.jsxs("div",{className:"mathsynth-grid-note",children:["Grid: ",e.jsx("span",{id:"mathSynthPreview"}),"   Easy: 7×6, Medium: 8×6, Mathanomical: 10×6"]})]})]}),e.jsx("div",{className:"mathsynth-board-name",children:"MathSynth (algebra stuff)"}),e.jsxs("section",{className:"status-row",children:[e.jsxs("div",{className:"score",children:["Score: ",e.jsx("span",{id:"mathSynthScore",children:"0"})]}),e.jsxs("div",{className:"timer",children:["Time left: ",e.jsx("span",{id:"mathSynthTimer",children:"0"}),"s"]}),e.jsxs("div",{className:"streak",children:["Best: ",e.jsx("span",{id:"mathSynthBest",children:"--"})]})]}),e.jsxs("section",{className:"problem-area game-shell__body",children:[e.jsxs("div",{className:"side-panel game-shell__panel",children:[e.jsx("div",{className:"prompt",id:"mathSynthPrompt",children:"Press Start to begin."}),e.jsx("div",{className:"hint",id:"mathSynthFeedback"}),e.jsx("div",{className:"mathsynth-hint",children:"Solve each equation for x. Correct answers lock the cell and give -1 point. The best score is the lowest number with the most time left. Oh yea watch out for the others (Mr. Boooiiii's bill collectors)!"}),e.jsxs("div",{className:"mathsynth-clues",children:[e.jsx("div",{className:"mathsynth-label",children:"Warm up problems"}),e.jsx("div",{id:"mathSynthEquations",className:"mathsynth-equations"}),e.jsxs("div",{className:"mathsynth-quote",children:[`just ask yourself, "What's the next right choice?"`,e.jsx("br",{}),"If x = your best self, then I believe in you. -Mr. Boooiiii-"]})]})]}),e.jsxs("div",{className:"board-panel game-shell__board",children:[e.jsx("div",{id:"mathSynthOthers",className:"mathsynth-others","aria-live":"polite"}),e.jsx("div",{id:"mathSynthBoard",className:"mathsynth-board"}),e.jsxs("div",{className:"palette-controls",children:[e.jsx("div",{className:"palette-title",children:"Board colors"}),e.jsx("div",{id:"mathSynthPalette",className:"palette",role:"list"}),e.jsxs("div",{className:"selected-color",children:["Selected:",e.jsx("span",{id:"mathSynthColorPreview",className:"color-swatch"})]}),e.jsxs("div",{className:"grid-info",children:["Colors unlocked: ",e.jsx("span",{id:"mathSynthColorInfo",children:"0"}),"/50"]})]})]})]}),e.jsx("footer",{children:e.jsx("small",{children:"MathSynth blends algebra with a crossword-style grid."})})]})}const Oe=[{id:"solid-01",name:"Sky",type:"solid",primary:"#7dd3fc"},{id:"tone-01",name:"Mint/Lime",type:"tone",primary:"#6ee7b7",secondary:"#a3e635"},{id:"solid-02",name:"Lavender",type:"solid",primary:"#c4b5fd"},{id:"tone-02",name:"Ocean/Blue",type:"tone",primary:"#38bdf8",secondary:"#2563eb"},{id:"solid-03",name:"Sunshine",type:"solid",primary:"#fde047"},{id:"tone-03",name:"Blush/Coral",type:"tone",primary:"#f9a8d4",secondary:"#fb7185"},{id:"solid-04",name:"Mint",type:"solid",primary:"#5eead4"},{id:"tone-04",name:"Berry/Plum",type:"tone",primary:"#f472b6",secondary:"#a855f7"},{id:"solid-05",name:"Lime",type:"solid",primary:"#a3e635"},{id:"tone-05",name:"Teal/Blue",type:"tone",primary:"#22d3ee",secondary:"#0ea5e9"},{id:"solid-06",name:"Rose",type:"solid",primary:"#fb7185"},{id:"tone-06",name:"Berry/Sun",type:"tone",primary:"#f472b6",secondary:"#facc15"},{id:"solid-07",name:"Blue",type:"solid",primary:"#60a5fa"},{id:"tone-07",name:"Grape/Indigo",type:"tone",primary:"#818cf8",secondary:"#4f46e5"},{id:"solid-08",name:"Spring",type:"solid",primary:"#86efac"},{id:"tone-08",name:"Ice/Lavender",type:"tone",primary:"#a5b4fc",secondary:"#e0f2fe"},{id:"solid-09",name:"Bubblegum",type:"solid",primary:"#f9a8d4"},{id:"tone-09",name:"Lemon/Lime",type:"tone",primary:"#fde047",secondary:"#bef264"},{id:"solid-10",name:"Soft Gray",type:"solid",primary:"#cbd5f5"},{id:"tone-10",name:"Cloud/Blue",type:"tone",primary:"#e2e8f0",secondary:"#93c5fd"},{id:"solid-11",name:"Minty Blue",type:"solid",primary:"#7dd3fc"},{id:"tone-11",name:"Aqua/Mint",type:"tone",primary:"#2dd4bf",secondary:"#99f6e4"},{id:"solid-12",name:"Grape",type:"solid",primary:"#c084fc"},{id:"tone-12",name:"Lilac/Rose",type:"tone",primary:"#d8b4fe",secondary:"#fda4af"},{id:"solid-13",name:"Coral",type:"solid",primary:"#fb7185"},{id:"tone-13",name:"Kiwi/Green",type:"tone",primary:"#bef264",secondary:"#4ade80"},{id:"solid-14",name:"Ice Blue",type:"solid",primary:"#bae6fd"},{id:"tone-14",name:"Sky/Indigo",type:"tone",primary:"#60a5fa",secondary:"#6366f1"},{id:"solid-15",name:"Periwinkle",type:"solid",primary:"#a5b4fc"},{id:"tone-15",name:"Mint/Teal",type:"tone",primary:"#5eead4",secondary:"#14b8a6"},{id:"solid-16",name:"Sunbeam",type:"solid",primary:"#fde68a"},{id:"tone-16",name:"Pink/Coral",type:"tone",primary:"#fda4af",secondary:"#fb7185"},{id:"solid-17",name:"Cool Blue",type:"solid",primary:"#93c5fd"},{id:"tone-17",name:"Lime/Teal",type:"tone",primary:"#a3e635",secondary:"#2dd4bf"},{id:"solid-18",name:"Soft Plum",type:"solid",primary:"#d8b4fe"},{id:"tone-18",name:"Sky/Mint",type:"tone",primary:"#7dd3fc",secondary:"#6ee7b7"},{id:"solid-19",name:"Seafoam",type:"solid",primary:"#99f6e4"},{id:"tone-19",name:"Berry/Sky",type:"tone",primary:"#f472b6",secondary:"#60a5fa"},{id:"solid-20",name:"Sunny",type:"solid",primary:"#facc15"},{id:"tone-20",name:"Cool Mint",type:"tone",primary:"#5eead4",secondary:"#38bdf8"},{id:"solid-21",name:"Twilight",type:"solid",primary:"#a78bfa"},{id:"tone-21",name:"Blue/Teal",type:"tone",primary:"#3b82f6",secondary:"#14b8a6"},{id:"solid-22",name:"Spring Leaf",type:"solid",primary:"#4ade80"},{id:"tone-22",name:"Lilac/Ice",type:"tone",primary:"#c4b5fd",secondary:"#bae6fd"},{id:"solid-23",name:"Blush",type:"solid",primary:"#fda4af"},{id:"tone-23",name:"Mint/Sky",type:"tone",primary:"#5eead4",secondary:"#38bdf8"},{id:"solid-24",name:"Cool Mint",type:"solid",primary:"#2dd4bf"},{id:"tone-24",name:"Sun/Lav",type:"tone",primary:"#fde047",secondary:"#c4b5fd"},{id:"solid-25",name:"Powder",type:"solid",primary:"#e2e8f0"},{id:"tone-25",name:"Rose/Mint",type:"tone",primary:"#fb7185",secondary:"#6ee7b7"}],ja=["Easy","Easy25","Easy50","Easy75"],wa=["Medium","Medium26","Medium60","Medium100"],bt=[{id:1,name:"Starter Pup",power:"Subtraction eyes",points:0,streak:0},{id:2,name:"Greater Signs",power:"Greater-than blast",points:3e3,streak:3,requires:ja},{id:3,name:"Arrow Blaster",power:"Arrow keys + space",points:6e3,streak:5,requires:wa},{id:4,name:"Lightsaber Pup",power:"Lightsaber cut",points:12e3,streak:6},{id:5,name:"Viral Driver",power:"Viral driver clip",points:24e3,streak:8},{id:6,name:"Nuclear Gauge",power:"Gamma / neutron beam",points:36e3,streak:10},{id:7,name:"Doctor Spray",power:"Disinfectant spray",points:48e3,streak:12},{id:8,name:"Dogko RKO",power:"Dogko finisher",points:6e4,streak:14},{id:9,name:"Mythic Pup",power:"Mythic finisher",points:8e4,streak:16},{id:10,name:"Mathtality",power:"All zombies cleared",points:1e5,streak:18}];function Na(o){if(!o)return null;const u=localStorage.getItem(`mathpop_profile_stats_${o}`);if(!u)return{totalPoints:0,totalCorrect:0,totalAttempted:0,pupStreakRecord:0,levelsCompleted:[],games:{}};try{const d=JSON.parse(u);return{totalPoints:Number(d.totalPoints)||0,totalCorrect:Number(d.totalCorrect)||0,totalAttempted:Number(d.totalAttempted)||0,pupStreakRecord:Number(d.pupStreakRecord)||0,levelsCompleted:Array.isArray(d.levelsCompleted)?d.levelsCompleted:[],games:d.games&&typeof d.games=="object"?d.games:{}}}catch{return{totalPoints:0,totalCorrect:0,totalAttempted:0,pupStreakRecord:0,levelsCompleted:[],games:{}}}}function ka(o){if(!o)return 0;const u=`mathpop_highscore_${o}_`;let d=0;return Object.keys(localStorage).forEach(h=>{if(!h.startsWith(u))return;const i=parseInt(localStorage.getItem(h)||"0",10);i>d&&(d=i)}),d}function $t(o){return o.type==="tone"?`linear-gradient(135deg, ${o.primary} 0%, ${o.primary} 50%, ${o.secondary} 50%, ${o.secondary} 100%)`:o.primary}function Sa(){var de,Je,X,ye,me,Y,R,O,ce,xe,ae,ie,F,le,H,be,Pe,_e,Le,Z,ue,he,Ze,ee,Ve,ge,Re,st,ve,Te,Be,Ae,Ye,et,tt,$e,Ie,Fe,De;const[o,u]=D.useState(0),d=D.useMemo(()=>localStorage.getItem("mathpop_current_user"),[]),h=D.useMemo(()=>{if(!d)return null;const l=localStorage.getItem(`mathpop_profile_${d}`);return l?JSON.parse(l):null},[d,o]),i=D.useMemo(()=>Na(d),[d,o]);if(!d||!h||!i)return e.jsxs("main",{className:"profile-page",children:[e.jsxs("header",{className:"profile-header",children:[e.jsx("h1",{children:"Profile"}),e.jsx("p",{className:"profile-subtitle",children:"Sign in to view your progress."})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("p",{children:"No profile found. Head back to the home page to sign in."}),e.jsx(T,{to:"/",className:"profile-link",children:"Back to Home"})]})]});const f=i.totalAttempted||0,g=i.totalCorrect||0,S=f?Math.round(g/f*100):0,w=i.totalPoints||0,E=Math.max(0,w),P=i.levelsCompleted||[],W=i.pupStreakRecord||0,A=Array.isArray(i.tierUnlocks)?i.tierUnlocks:[],Q=Number(i.activeTier)||1,ne=ka(d),re=(()=>{const l=localStorage.getItem("mathsynth-best");if(!l)return null;try{return JSON.parse(l)}catch{return null}})(),pe=((Je=(de=i.games)==null?void 0:de.mathpup)==null?void 0:Je.points)||0,j=Math.min(Math.floor(pe/2500),Oe.length),L=localStorage.getItem(`mathpup_benny_color_${d}`)||Oe[0].id,N=Oe.find(l=>l.id===L)||Oe[0],Ee=l=>!l.requires||l.requires.length===0?!0:l.requires.every(k=>P.includes(k)),Se=l=>l.id===1?!0:A.includes(l.id),fe=[...bt].reverse().find(Se)||bt[0],oe=l=>!(Se(l)||!Ee(l)||E<l.points),Ce=l=>Se(l),J=l=>{var rt;if(!d||!i||!oe(l))return;const k=(rt=window.math)==null?void 0:rt.evaluate,U=k?Number(k(`${w}-${l.points}`)):w-l.points,We={...i,totalPoints:Math.max(0,U),tierUnlocks:[...A,l.id]};localStorage.setItem(`mathpop_profile_stats_${d}`,JSON.stringify(We)),u(nt=>nt+1)},V=l=>{if(!d||!i||!Ce(l))return;const k={...i,activeTier:l.id};localStorage.setItem(`mathpop_profile_stats_${d}`,JSON.stringify(k)),u(U=>U+1)},p=[{id:"mathpup",title:"Math Pup",stats:{points:((ye=(X=i.games)==null?void 0:X.mathpup)==null?void 0:ye.points)||0,correct:((Y=(me=i.games)==null?void 0:me.mathpup)==null?void 0:Y.correct)||0,attempted:((O=(R=i.games)==null?void 0:R.mathpup)==null?void 0:O.attempted)||0,bestScore:ne,streakRecord:((xe=(ce=i.games)==null?void 0:ce.mathpup)==null?void 0:xe.streakRecord)||0,levels:((F=(ie=(ae=i.games)==null?void 0:ae.mathpup)==null?void 0:ie.levelsCompleted)==null?void 0:F.length)||0}},{id:"capture",title:"Capture The Fraction",stats:{points:((H=(le=i.games)==null?void 0:le.capture)==null?void 0:H.points)||0,correct:((Pe=(be=i.games)==null?void 0:be.capture)==null?void 0:Pe.correct)||0,attempted:((Le=(_e=i.games)==null?void 0:_e.capture)==null?void 0:Le.attempted)||0,bestScore:((ue=(Z=i.games)==null?void 0:Z.capture)==null?void 0:ue.bestScore)||0,streakRecord:((Ze=(he=i.games)==null?void 0:he.capture)==null?void 0:Ze.streakRecord)||0}},{id:"decimal",title:"Deci-What?",stats:{points:((Ve=(ee=i.games)==null?void 0:ee.decimal)==null?void 0:Ve.points)||0,correct:((Re=(ge=i.games)==null?void 0:ge.decimal)==null?void 0:Re.correct)||0,attempted:((ve=(st=i.games)==null?void 0:st.decimal)==null?void 0:ve.attempted)||0,bestScore:((Be=(Te=i.games)==null?void 0:Te.decimal)==null?void 0:Be.bestScore)||0,streakRecord:((Ye=(Ae=i.games)==null?void 0:Ae.decimal)==null?void 0:Ye.streakRecord)||0}},{id:"mathsynth",title:"Ma+h5Yn+h3",stats:{points:((tt=(et=i.games)==null?void 0:et.mathsynth)==null?void 0:tt.points)||0,correct:((Ie=($e=i.games)==null?void 0:$e.mathsynth)==null?void 0:Ie.correct)||0,attempted:((De=(Fe=i.games)==null?void 0:Fe.mathsynth)==null?void 0:De.attempted)||0,bestScore:re?re.score:"--",timeLeft:re?re.timeLeft:"--"}}],_=D.useMemo(()=>{const l={};return p.forEach(k=>{l[k.id]=k}),l},[p]),I=p.map(l=>({id:l.id,title:l.title})),[B,K]=D.useState({points:"mathpup",correct:"mathpup",attempted:"mathpup",accuracy:"mathpup",levels:"mathpup",streak:"mathpup",colors:"mathpup",tiers:"mathpup"}),q=(l,k)=>{K(U=>({...U,[l]:k}))},C=l=>{var k;return((k=_[l])==null?void 0:k.stats)||{}},Me=l=>{const k=l.attempted||0,U=l.correct||0;return k?Math.round(U/k*100):0};return e.jsxs("main",{className:"profile-page",children:[e.jsxs("header",{className:"profile-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:h.username}),e.jsx("p",{className:"profile-subtitle",children:"Profile dashboard"})]}),e.jsxs("div",{className:"profile-actions",children:[e.jsx(T,{to:"/",className:"profile-link",children:"Home"}),e.jsx(T,{to:"/list",className:"profile-link",children:"Games"})]})]}),e.jsxs("section",{className:"profile-mobile-grid","aria-label":"Mobile game stats",children:[e.jsxs("div",{className:"profile-box benny-colors-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Total Points"}),e.jsx("select",{value:B.points,onChange:l=>q("points",l.target.value),children:I.map(l=>e.jsx("option",{value:l.id,children:l.title},l.id))})]}),e.jsx("p",{className:"metric",children:C(B.points).points||0})]}),e.jsxs("div",{className:"profile-box benny-powers-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Total Correct"}),e.jsx("select",{value:B.correct,onChange:l=>q("correct",l.target.value),children:I.map(l=>e.jsx("option",{value:l.id,children:l.title},l.id))})]}),e.jsx("p",{className:"metric",children:C(B.correct).correct||0})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Total Attempted"}),e.jsx("select",{value:B.attempted,onChange:l=>q("attempted",l.target.value),children:I.map(l=>e.jsx("option",{value:l.id,children:l.title},l.id))})]}),e.jsx("p",{className:"metric",children:C(B.attempted).attempted||0})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Accuracy"}),e.jsx("select",{value:B.accuracy,onChange:l=>q("accuracy",l.target.value),children:I.map(l=>e.jsx("option",{value:l.id,children:l.title},l.id))})]}),e.jsxs("p",{className:"metric",children:[Me(C(B.accuracy)),"%"]})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Levels Completed"}),e.jsx("select",{value:B.levels,onChange:l=>q("levels",l.target.value),children:I.map(l=>e.jsx("option",{value:l.id,children:l.title},l.id))})]}),e.jsx("p",{className:"metric",children:C(B.levels).levels||0})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Pup Streak Record"}),e.jsx("select",{value:B.streak,onChange:l=>q("streak",l.target.value),children:I.map(l=>e.jsx("option",{value:l.id,children:l.title},l.id))})]}),e.jsx("p",{className:"metric",children:C(B.streak).streakRecord||0})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Benny Colors"}),e.jsx("select",{value:B.colors,onChange:l=>q("colors",l.target.value),children:I.map(l=>e.jsx("option",{value:l.id,children:l.title},l.id))})]}),B.colors==="mathpup"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"profile-subtitle",children:["Unlocked colors: ",j,"/",Oe.length]}),e.jsx("div",{className:"benny-colors",children:Oe.map((l,k)=>{const U=k<j;return e.jsx("span",{className:`benny-color ${U?"unlocked":"locked"}`,title:l.name,style:{background:$t(l)}},l.id)})})]}):e.jsx("p",{className:"profile-subtitle",children:"Only Math Pup"})]}),e.jsxs("div",{className:"profile-box",children:[e.jsxs("div",{className:"box-header",children:[e.jsx("h2",{children:"Benny Powers"}),e.jsx("select",{value:B.tiers,onChange:l=>q("tiers",l.target.value),children:I.map(l=>e.jsx("option",{value:l.id,children:l.title},l.id))})]}),B.tiers==="mathpup"?e.jsx("div",{className:"tier-track",children:bt.map(l=>{const k=Se(l);return e.jsxs("div",{className:`tier-card ${k?"unlocked":"locked"}${Q===l.id?" active":""}`,children:[e.jsxs("h3",{children:["Tier ",l.id]}),e.jsx("p",{className:"tier-name",children:l.name})]},l.id)})}):e.jsx("p",{className:"profile-subtitle",children:"Only Math Pup"})]})]}),e.jsxs("section",{className:"profile-metrics",children:[e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Total Points"}),e.jsx("p",{className:"metric",children:w})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Total Correct"}),e.jsx("p",{className:"metric",children:g})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Total Attempted"}),e.jsx("p",{className:"metric",children:f})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Accuracy"}),e.jsxs("p",{className:"metric",children:[S,"%"]})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Levels Completed"}),e.jsx("p",{className:"metric",children:P.length})]}),e.jsxs("div",{className:"profile-card",children:[e.jsx("h2",{children:"Pup Streak Record"}),e.jsx("p",{className:"metric",children:W})]})]}),e.jsxs("section",{className:"profile-lower",children:[e.jsxs("div",{className:"profile-benny",children:[e.jsxs("div",{className:"profile-card benny-card",children:[e.jsxs("div",{className:"benny-card-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Benny Sum"}),e.jsxs("p",{className:"profile-subtitle",children:["Current tier: ",fe.name]})]}),e.jsx("div",{className:"benny-color-preview",style:{background:$t(N)},"aria-label":"Benny color"})]}),e.jsxs("p",{className:"benny-meta",children:["Unlocked colors: ",j,"/",Oe.length," (2500 pts each)"]}),e.jsx("div",{className:"benny-colors",children:Oe.map((l,k)=>{const U=k<j;return e.jsx("span",{className:`benny-color ${U?"unlocked":"locked"}`,title:l.name,style:{background:$t(l)}},l.id)})})]}),e.jsxs("div",{className:"profile-card benny-tiers",children:[e.jsx("h2",{children:"Benny Tiers"}),e.jsx("div",{className:"tier-track",children:bt.map(l=>{const k=Se(l),U=Ee(l);return oe(l),e.jsxs("div",{className:`tier-card ${k?"unlocked":"locked"}${Q===l.id?" active":""}`,role:"button",tabIndex:k?0:-1,onClick:()=>V(l),onKeyDown:We=>{(We.key==="Enter"||We.key===" ")&&V(l)},children:[e.jsxs("h3",{children:["Tier ",l.id]}),e.jsx("p",{className:"tier-name",children:l.name}),e.jsx("p",{className:"tier-power",children:l.power}),e.jsxs("p",{className:"tier-req",children:["Points: ",l.points]}),e.jsxs("p",{className:"tier-req",children:["Pup streak: ",l.streak]}),l.requires&&l.requires.length>0&&e.jsxs("p",{className:"tier-req tier-requires","aria-label":"Level requirements",children:["Requires: ",l.requires.join(", ")]}),!k&&!U&&l.requires&&e.jsx("p",{className:"tier-locked-reason",children:"Complete required levels first"}),!k&&U&&e.jsxs("span",{className:"tier-ticket",children:["Ticket price: ",l.points," pts"]}),l.id===8&&k&&e.jsxs("div",{className:"tier-freeze-frame","aria-label":"Benny Dog KO freeze frame",children:[e.jsx("span",{className:"ff-benny"}),e.jsx("span",{className:"ff-zombie"}),e.jsx("span",{className:"ff-impact"})]}),oe(l)&&e.jsxs("button",{type:"button",className:"tier-buy",onClick:()=>J(l),children:["Unlock ",l.name]})]},l.id)})})]})]}),e.jsxs("section",{className:"profile-card profile-games",children:[e.jsx("h2",{children:"Game Stats"}),e.jsx("div",{className:"game-card-track",children:p.map(l=>{const k=l.stats.attempted||0,U=l.stats.correct||0,We=k?Math.round(U/k*100):0;return e.jsxs("div",{className:"profile-card game-card",children:[e.jsx("h3",{children:l.title}),e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Points"}),e.jsx("span",{children:l.stats.points})]}),e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Correct"}),e.jsx("span",{children:U})]}),e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Attempted"}),e.jsx("span",{children:k})]}),e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Accuracy"}),e.jsxs("span",{children:[We,"%"]})]}),"levels"in l.stats&&e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Levels Completed"}),e.jsx("span",{children:l.stats.levels})]}),"streakRecord"in l.stats&&e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Streak Record"}),e.jsx("span",{children:l.stats.streakRecord})]}),e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Best"}),e.jsx("span",{children:l.stats.bestScore})]}),"timeLeft"in l.stats&&e.jsxs("div",{className:"game-stat-row",children:[e.jsx("span",{children:"Best Time"}),e.jsxs("span",{children:[l.stats.timeLeft,"s"]})]})]},l.id)})})]})]})]})}function Ca(){return Qe("https://cdn.babylonjs.com/babylon.js","babylon"),Qe("/js/bennyworld-babylon.js","bennyworld-babylon"),Qe("/js/bennyworld.js","bennyworld"),D.useEffect(()=>()=>{window.__BennyWorldCleanup&&window.__BennyWorldCleanup(),window.__BennyWorldBabylonCleanup&&window.__BennyWorldBabylonCleanup()},[]),e.jsxs("main",{className:"benny-world",id:"bennyWorldRoot",children:[e.jsxs("header",{className:"bw-header",children:[e.jsx(T,{className:"back-link",to:"/list",children:"Back"}),e.jsx("h1",{children:"Benny World"}),e.jsx("div",{className:"bw-level",id:"bwLevelLabel",children:"Level 1"})]}),e.jsxs("section",{className:"bw-hud",children:[e.jsx("div",{className:"bw-stat",id:"bwPoints",children:"Points: 0"}),e.jsx("div",{className:"bw-stat",id:"bwDash",children:"Dash: 0m"}),e.jsx("div",{className:"bw-stat",id:"bwStatus",children:"Run to the star!"}),e.jsxs("label",{className:"bw-difficulty",htmlFor:"bwDifficulty",children:["Difficulty",e.jsxs("select",{id:"bwDifficulty",defaultValue:"mathanomical",children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"mathanomical",children:"Mathanomical"})]})]})]}),e.jsxs("section",{className:"bw-stage",children:[e.jsx("div",{id:"bennyWorldArea",className:"bw-area","aria-label":"Benny World playfield",children:e.jsx("canvas",{id:"bwBabylon",className:"bw-babylon","aria-hidden":"true"})}),e.jsx("div",{id:"bwGameOver",className:"bw-gameover","aria-live":"polite"}),e.jsx("div",{id:"bwMessage",className:"bw-message","aria-live":"polite"})]}),e.jsxs("div",{className:"bw-controls",id:"bwControls",children:[e.jsx("button",{className:"bw-move",id:"bwLeft",type:"button","aria-label":"Move left",children:"◀"}),e.jsx("button",{className:"bw-move",id:"bwJump",type:"button","aria-label":"Jump",children:"Jump"}),e.jsx("button",{className:"bw-move",id:"bwRight",type:"button","aria-label":"Move right",children:"▶"}),e.jsx("button",{className:"bw-move",id:"bwGlide",type:"button","aria-label":"Glide",children:"Glide"})]})]})}function Ma(){const o=Vn(),u=o.pathname!=="/"&&o.pathname!=="/mathsynth"&&o.pathname!=="/about",d=["/game","/capture","/decimal","/bennyworld"].includes(o.pathname),h=o.pathname==="/list",i=o.pathname==="/howto",f=o.pathname==="/profile",g=h||d||i||f;return e.jsxs(e.Fragment,{children:[u&&e.jsxs("nav",{className:"app-nav",children:[!d&&e.jsx(T,{to:"/",className:"app-logo","aria-label":"Home",children:e.jsxs("span",{className:"desk-logo",children:[e.jsx("span",{className:"back"}),e.jsx("span",{className:"seat"}),e.jsx("span",{className:"leg-left"}),e.jsx("span",{className:"leg-right"}),e.jsx("span",{className:"desk"})]})}),!g&&e.jsx(T,{to:"/howto",children:"How to Play"}),!g&&e.jsx("button",{className:"nav-back",onClick:()=>history.length>1?history.back():window.location.href="/",children:"Back"}),!g&&e.jsx(T,{to:"/game",children:"Math Pup"}),!g&&e.jsx(T,{to:"/capture",children:"Capture"}),!g&&e.jsx(T,{to:"/decimal",children:"Deci-What?"}),!g&&e.jsx(T,{to:"/mathsynth",children:"Ma+h5Yn+h3"}),!g&&e.jsx(T,{to:"/about",children:"About"}),!g&&e.jsx(T,{to:"/list",children:"Games"}),!g&&e.jsx(T,{to:"/",children:"Home"})]}),e.jsx("main",{children:e.jsxs(Yn,{children:[e.jsx(Ne,{path:"/",element:e.jsx(aa,{})}),e.jsx(Ne,{path:"/game",element:e.jsx(sa,{})}),e.jsx(Ne,{path:"/capture",element:e.jsx(ia,{})}),e.jsx(Ne,{path:"/decimal",element:e.jsx(xa,{})}),e.jsx(Ne,{path:"/mathsynth",element:e.jsx(va,{})}),e.jsx(Ne,{path:"/bennyworld",element:e.jsx(Ca,{})}),e.jsx(Ne,{path:"/list",element:e.jsx(ra,{})}),e.jsx(Ne,{path:"/profile",element:e.jsx(Sa,{})}),e.jsx(Ne,{path:"/howto",element:e.jsx(ba,{})}),e.jsx(Ne,{path:"/about",element:e.jsx(ga,{})})]})})]})}en(document.getElementById("root")).render(e.jsx(zn.StrictMode,{children:e.jsx(Kn,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(Ma,{})})}));
